!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.QAPM=e():t.QAPM=e()}(window,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=63)}([function(t,e,r){var n=r(37)();t.exports=n;try{regeneratorRuntime=n}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},function(t,e){function r(t,e,r,n,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void r(t)}a.done?e(u):Promise.resolve(u).then(n,i)}t.exports=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var s=t.apply(e,n);function a(t){r(s,i,o,a,u,"next",t)}function u(t){r(s,i,o,a,u,"throw",t)}a(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,r){var n,i,o,s,a;n=r(38),i=r(18).utf8,o=r(39),s=r(18).bin,(a=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?s.stringToBytes(t):i.stringToBytes(t):o(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var r=n.bytesToWords(t),u=8*t.length,h=1732584193,c=-271733879,f=-1732584194,l=271733878,p=0;p<r.length;p++)r[p]=16711935&(r[p]<<8|r[p]>>>24)|4278255360&(r[p]<<24|r[p]>>>8);r[u>>>5]|=128<<u%32,r[14+(u+64>>>9<<4)]=u;var d=a._ff,g=a._gg,m=a._hh,y=a._ii;for(p=0;p<r.length;p+=16){var v=h,w=c,b=f,_=l;h=d(h,c,f,l,r[p+0],7,-680876936),l=d(l,h,c,f,r[p+1],12,-389564586),f=d(f,l,h,c,r[p+2],17,606105819),c=d(c,f,l,h,r[p+3],22,-1044525330),h=d(h,c,f,l,r[p+4],7,-176418897),l=d(l,h,c,f,r[p+5],12,1200080426),f=d(f,l,h,c,r[p+6],17,-1473231341),c=d(c,f,l,h,r[p+7],22,-45705983),h=d(h,c,f,l,r[p+8],7,1770035416),l=d(l,h,c,f,r[p+9],12,-1958414417),f=d(f,l,h,c,r[p+10],17,-42063),c=d(c,f,l,h,r[p+11],22,-1990404162),h=d(h,c,f,l,r[p+12],7,1804603682),l=d(l,h,c,f,r[p+13],12,-40341101),f=d(f,l,h,c,r[p+14],17,-1502002290),h=g(h,c=d(c,f,l,h,r[p+15],22,1236535329),f,l,r[p+1],5,-165796510),l=g(l,h,c,f,r[p+6],9,-1069501632),f=g(f,l,h,c,r[p+11],14,643717713),c=g(c,f,l,h,r[p+0],20,-373897302),h=g(h,c,f,l,r[p+5],5,-701558691),l=g(l,h,c,f,r[p+10],9,38016083),f=g(f,l,h,c,r[p+15],14,-660478335),c=g(c,f,l,h,r[p+4],20,-405537848),h=g(h,c,f,l,r[p+9],5,568446438),l=g(l,h,c,f,r[p+14],9,-1019803690),f=g(f,l,h,c,r[p+3],14,-187363961),c=g(c,f,l,h,r[p+8],20,1163531501),h=g(h,c,f,l,r[p+13],5,-1444681467),l=g(l,h,c,f,r[p+2],9,-51403784),f=g(f,l,h,c,r[p+7],14,1735328473),h=m(h,c=g(c,f,l,h,r[p+12],20,-1926607734),f,l,r[p+5],4,-378558),l=m(l,h,c,f,r[p+8],11,-2022574463),f=m(f,l,h,c,r[p+11],16,1839030562),c=m(c,f,l,h,r[p+14],23,-35309556),h=m(h,c,f,l,r[p+1],4,-1530992060),l=m(l,h,c,f,r[p+4],11,1272893353),f=m(f,l,h,c,r[p+7],16,-155497632),c=m(c,f,l,h,r[p+10],23,-1094730640),h=m(h,c,f,l,r[p+13],4,681279174),l=m(l,h,c,f,r[p+0],11,-358537222),f=m(f,l,h,c,r[p+3],16,-722521979),c=m(c,f,l,h,r[p+6],23,76029189),h=m(h,c,f,l,r[p+9],4,-640364487),l=m(l,h,c,f,r[p+12],11,-421815835),f=m(f,l,h,c,r[p+15],16,530742520),h=y(h,c=m(c,f,l,h,r[p+2],23,-995338651),f,l,r[p+0],6,-198630844),l=y(l,h,c,f,r[p+7],10,1126891415),f=y(f,l,h,c,r[p+14],15,-1416354905),c=y(c,f,l,h,r[p+5],21,-57434055),h=y(h,c,f,l,r[p+12],6,1700485571),l=y(l,h,c,f,r[p+3],10,-1894986606),f=y(f,l,h,c,r[p+10],15,-1051523),c=y(c,f,l,h,r[p+1],21,-2054922799),h=y(h,c,f,l,r[p+8],6,1873313359),l=y(l,h,c,f,r[p+15],10,-30611744),f=y(f,l,h,c,r[p+6],15,-1560198380),c=y(c,f,l,h,r[p+13],21,1309151649),h=y(h,c,f,l,r[p+4],6,-145523070),l=y(l,h,c,f,r[p+11],10,-1120210379),f=y(f,l,h,c,r[p+2],15,718787259),c=y(c,f,l,h,r[p+9],21,-343485551),h=h+v>>>0,c=c+w>>>0,f=f+b>>>0,l=l+_>>>0}return n.endian([h,c,f,l])})._ff=function(t,e,r,n,i,o,s){var a=t+(e&r|~e&n)+(i>>>0)+s;return(a<<o|a>>>32-o)+e},a._gg=function(t,e,r,n,i,o,s){var a=t+(e&n|r&~n)+(i>>>0)+s;return(a<<o|a>>>32-o)+e},a._hh=function(t,e,r,n,i,o,s){var a=t+(e^r^n)+(i>>>0)+s;return(a<<o|a>>>32-o)+e},a._ii=function(t,e,r,n,i,o,s){var a=t+(r^(e|~n))+(i>>>0)+s;return(a<<o|a>>>32-o)+e},a._blocksize=16,a._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var r=n.wordsToBytes(a(t,e));return e&&e.asBytes?r:e&&e.asString?s.bytesToString(r):n.bytesToHex(r)}},function(t,e){function r(e){return t.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,r(e)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}},function(t,e,r){(function(t){var n,i=function(t){"use strict";var e=1e7,r=9007199254740992,n=f(r),o="function"==typeof BigInt;function s(t,e,r,n){return void 0===t?s[0]:void 0!==e&&(10!=+e||r)?U(t,e,r,n):J(t)}function a(t,e){this.value=t,this.sign=e,this.isSmall=!1}function u(t){this.value=t,this.sign=t<0,this.isSmall=!0}function h(t){this.value=t}function c(t){return-r<t&&t<r}function f(t){return t<1e7?[t]:t<1e14?[t%1e7,Math.floor(t/1e7)]:[t%1e7,Math.floor(t/1e7)%1e7,Math.floor(t/1e14)]}function l(t){p(t);var r=t.length;if(r<4&&k(t,n)<0)switch(r){case 0:return 0;case 1:return t[0];case 2:return t[0]+t[1]*e;default:return t[0]+(t[1]+t[2]*e)*e}return t}function p(t){for(var e=t.length;0===t[--e];);t.length=e+1}function d(t){for(var e=new Array(t),r=-1;++r<t;)e[r]=0;return e}function g(t){return t>0?Math.floor(t):Math.ceil(t)}function m(t,r){var n,i,o=t.length,s=r.length,a=new Array(o),u=0,h=e;for(i=0;i<s;i++)u=(n=t[i]+r[i]+u)>=h?1:0,a[i]=n-u*h;for(;i<o;)u=(n=t[i]+u)===h?1:0,a[i++]=n-u*h;return u>0&&a.push(u),a}function y(t,e){return t.length>=e.length?m(t,e):m(e,t)}function v(t,r){var n,i,o=t.length,s=new Array(o),a=e;for(i=0;i<o;i++)n=t[i]-a+r,r=Math.floor(n/a),s[i]=n-r*a,r+=1;for(;r>0;)s[i++]=r%a,r=Math.floor(r/a);return s}function w(t,e){var r,n,i=t.length,o=e.length,s=new Array(i),a=0;for(r=0;r<o;r++)(n=t[r]-a-e[r])<0?(n+=1e7,a=1):a=0,s[r]=n;for(r=o;r<i;r++){if(!((n=t[r]-a)<0)){s[r++]=n;break}n+=1e7,s[r]=n}for(;r<i;r++)s[r]=t[r];return p(s),s}function b(t,e,r){var n,i,o=t.length,s=new Array(o),h=-e;for(n=0;n<o;n++)i=t[n]+h,h=Math.floor(i/1e7),i%=1e7,s[n]=i<0?i+1e7:i;return"number"==typeof(s=l(s))?(r&&(s=-s),new u(s)):new a(s,r)}function _(t,e){var r,n,i,o,s=t.length,a=e.length,u=d(s+a);for(i=0;i<s;++i){o=t[i];for(var h=0;h<a;++h)r=o*e[h]+u[i+h],n=Math.floor(r/1e7),u[i+h]=r-1e7*n,u[i+h+1]+=n}return p(u),u}function S(t,r){var n,i,o=t.length,s=new Array(o),a=e,u=0;for(i=0;i<o;i++)n=t[i]*r+u,u=Math.floor(n/a),s[i]=n-u*a;for(;u>0;)s[i++]=u%a,u=Math.floor(u/a);return s}function M(t,e){for(var r=[];e-- >0;)r.push(0);return r.concat(t)}function E(t,r,n){return new a(t<e?S(r,t):_(r,f(t)),n)}function A(t){var e,r,n,i,o=t.length,s=d(o+o);for(n=0;n<o;n++){r=0-(i=t[n])*i;for(var a=n;a<o;a++)e=i*t[a]*2+s[n+a]+r,r=Math.floor(e/1e7),s[n+a]=e-1e7*r;s[n+o]=r}return p(s),s}function T(t,e){var r,n,i,o,s=t.length,a=d(s);for(i=0,r=s-1;r>=0;--r)i=(o=1e7*i+t[r])-(n=g(o/e))*e,a[r]=0|n;return[a,0|i]}function x(t,r){var n,i=J(r);if(o)return[new h(t.value/i.value),new h(t.value%i.value)];var c,m=t.value,y=i.value;if(0===y)throw new Error("Cannot divide by zero");if(t.isSmall)return i.isSmall?[new u(g(m/y)),new u(m%y)]:[s[0],t];if(i.isSmall){if(1===y)return[t,s[0]];if(-1==y)return[t.negate(),s[0]];var v=Math.abs(y);if(v<e){c=l((n=T(m,v))[0]);var b=n[1];return t.sign&&(b=-b),"number"==typeof c?(t.sign!==i.sign&&(c=-c),[new u(c),new u(b)]):[new a(c,t.sign!==i.sign),new u(b)]}y=f(v)}var _=k(m,y);if(-1===_)return[s[0],t];if(0===_)return[s[t.sign===i.sign?1:-1],s[0]];c=(n=m.length+y.length<=200?function(t,r){var n,i,o,s,a,u,h,c=t.length,f=r.length,p=e,g=d(r.length),m=r[f-1],y=Math.ceil(p/(2*m)),v=S(t,y),w=S(r,y);for(v.length<=c&&v.push(0),w.push(0),m=w[f-1],i=c-f;i>=0;i--){for(n=p-1,v[i+f]!==m&&(n=Math.floor((v[i+f]*p+v[i+f-1])/m)),o=0,s=0,u=w.length,a=0;a<u;a++)o+=n*w[a],h=Math.floor(o/p),s+=v[i+a]-(o-h*p),o=h,s<0?(v[i+a]=s+p,s=-1):(v[i+a]=s,s=0);for(;0!==s;){for(n-=1,o=0,a=0;a<u;a++)(o+=v[i+a]-p+w[a])<0?(v[i+a]=o+p,o=0):(v[i+a]=o,o=1);s+=o}g[i]=n}return v=T(v,y)[0],[l(g),l(v)]}(m,y):function(t,e){for(var r,n,i,o,s,a=t.length,u=e.length,h=[],c=[];a;)if(c.unshift(t[--a]),p(c),k(c,e)<0)h.push(0);else{i=1e7*c[(n=c.length)-1]+c[n-2],o=1e7*e[u-1]+e[u-2],n>u&&(i=1e7*(i+1)),r=Math.ceil(i/o);do{if(k(s=S(e,r),c)<=0)break;r--}while(r);h.push(r),c=w(c,s)}return h.reverse(),[l(h),l(c)]}(m,y))[0];var M=t.sign!==i.sign,E=n[1],A=t.sign;return"number"==typeof c?(M&&(c=-c),c=new u(c)):c=new a(c,M),"number"==typeof E?(A&&(E=-E),E=new u(E)):E=new a(E,A),[c,E]}function k(t,e){if(t.length!==e.length)return t.length>e.length?1:-1;for(var r=t.length-1;r>=0;r--)if(t[r]!==e[r])return t[r]>e[r]?1:-1;return 0}function P(t){var e=t.abs();return!e.isUnit()&&(!!(e.equals(2)||e.equals(3)||e.equals(5))||!(e.isEven()||e.isDivisibleBy(3)||e.isDivisibleBy(5))&&(!!e.lesser(49)||void 0))}function B(t,e){for(var r,n,o,s=t.prev(),a=s,u=0;a.isEven();)a=a.divide(2),u++;t:for(n=0;n<e.length;n++)if(!t.lesser(e[n])&&!(o=i(e[n]).modPow(a,t)).isUnit()&&!o.equals(s)){for(r=u-1;0!=r;r--){if((o=o.square().mod(t)).isUnit())return!1;if(o.equals(s))continue t}return!1}return!0}a.prototype=Object.create(s.prototype),u.prototype=Object.create(s.prototype),h.prototype=Object.create(s.prototype),a.prototype.add=function(t){var e=J(t);if(this.sign!==e.sign)return this.subtract(e.negate());var r=this.value,n=e.value;return e.isSmall?new a(v(r,Math.abs(n)),this.sign):new a(y(r,n),this.sign)},a.prototype.plus=a.prototype.add,u.prototype.add=function(t){var e=J(t),r=this.value;if(r<0!==e.sign)return this.subtract(e.negate());var n=e.value;if(e.isSmall){if(c(r+n))return new u(r+n);n=f(Math.abs(n))}return new a(v(n,Math.abs(r)),r<0)},u.prototype.plus=u.prototype.add,h.prototype.add=function(t){return new h(this.value+J(t).value)},h.prototype.plus=h.prototype.add,a.prototype.subtract=function(t){var e=J(t);if(this.sign!==e.sign)return this.add(e.negate());var r=this.value,n=e.value;return e.isSmall?b(r,Math.abs(n),this.sign):function(t,e,r){var n;return k(t,e)>=0?n=w(t,e):(n=w(e,t),r=!r),"number"==typeof(n=l(n))?(r&&(n=-n),new u(n)):new a(n,r)}(r,n,this.sign)},a.prototype.minus=a.prototype.subtract,u.prototype.subtract=function(t){var e=J(t),r=this.value;if(r<0!==e.sign)return this.add(e.negate());var n=e.value;return e.isSmall?new u(r-n):b(n,Math.abs(r),r>=0)},u.prototype.minus=u.prototype.subtract,h.prototype.subtract=function(t){return new h(this.value-J(t).value)},h.prototype.minus=h.prototype.subtract,a.prototype.negate=function(){return new a(this.value,!this.sign)},u.prototype.negate=function(){var t=this.sign,e=new u(-this.value);return e.sign=!t,e},h.prototype.negate=function(){return new h(-this.value)},a.prototype.abs=function(){return new a(this.value,!1)},u.prototype.abs=function(){return new u(Math.abs(this.value))},h.prototype.abs=function(){return new h(this.value>=0?this.value:-this.value)},a.prototype.multiply=function(t){var r,n,i,o=J(t),u=this.value,h=o.value,c=this.sign!==o.sign;if(o.isSmall){if(0===h)return s[0];if(1===h)return this;if(-1===h)return this.negate();if((r=Math.abs(h))<e)return new a(S(u,r),c);h=f(r)}return n=u.length,i=h.length,new a(-.012*n-.012*i+15e-6*n*i>0?function t(e,r){var n=Math.max(e.length,r.length);if(n<=30)return _(e,r);n=Math.ceil(n/2);var i=e.slice(n),o=e.slice(0,n),s=r.slice(n),a=r.slice(0,n),u=t(o,a),h=t(i,s),c=t(y(o,i),y(a,s)),f=y(y(u,M(w(w(c,u),h),n)),M(h,2*n));return p(f),f}(u,h):_(u,h),c)},a.prototype.times=a.prototype.multiply,u.prototype._multiplyBySmall=function(t){return c(t.value*this.value)?new u(t.value*this.value):E(Math.abs(t.value),f(Math.abs(this.value)),this.sign!==t.sign)},a.prototype._multiplyBySmall=function(t){return 0===t.value?s[0]:1===t.value?this:-1===t.value?this.negate():E(Math.abs(t.value),this.value,this.sign!==t.sign)},u.prototype.multiply=function(t){return J(t)._multiplyBySmall(this)},u.prototype.times=u.prototype.multiply,h.prototype.multiply=function(t){return new h(this.value*J(t).value)},h.prototype.times=h.prototype.multiply,a.prototype.square=function(){return new a(A(this.value),!1)},u.prototype.square=function(){var t=this.value*this.value;return c(t)?new u(t):new a(A(f(Math.abs(this.value))),!1)},h.prototype.square=function(t){return new h(this.value*this.value)},a.prototype.divmod=function(t){var e=x(this,t);return{quotient:e[0],remainder:e[1]}},h.prototype.divmod=u.prototype.divmod=a.prototype.divmod,a.prototype.divide=function(t){return x(this,t)[0]},h.prototype.over=h.prototype.divide=function(t){return new h(this.value/J(t).value)},u.prototype.over=u.prototype.divide=a.prototype.over=a.prototype.divide,a.prototype.mod=function(t){return x(this,t)[1]},h.prototype.mod=h.prototype.remainder=function(t){return new h(this.value%J(t).value)},u.prototype.remainder=u.prototype.mod=a.prototype.remainder=a.prototype.mod,a.prototype.pow=function(t){var e,r,n,i=J(t),o=this.value,a=i.value;if(0===a)return s[1];if(0===o)return s[0];if(1===o)return s[1];if(-1===o)return i.isEven()?s[1]:s[-1];if(i.sign)return s[0];if(!i.isSmall)throw new Error("The exponent "+i.toString()+" is too large.");if(this.isSmall&&c(e=Math.pow(o,a)))return new u(g(e));for(r=this,n=s[1];!0&a&&(n=n.times(r),--a),0!==a;)a/=2,r=r.square();return n},u.prototype.pow=a.prototype.pow,h.prototype.pow=function(t){var e=J(t),r=this.value,n=e.value,i=BigInt(0),o=BigInt(1),a=BigInt(2);if(n===i)return s[1];if(r===i)return s[0];if(r===o)return s[1];if(r===BigInt(-1))return e.isEven()?s[1]:s[-1];if(e.isNegative())return new h(i);for(var u=this,c=s[1];(n&o)===o&&(c=c.times(u),--n),n!==i;)n/=a,u=u.square();return c},a.prototype.modPow=function(t,e){if(t=J(t),(e=J(e)).isZero())throw new Error("Cannot take modPow with modulus 0");var r=s[1],n=this.mod(e);for(t.isNegative()&&(t=t.multiply(s[-1]),n=n.modInv(e));t.isPositive();){if(n.isZero())return s[0];t.isOdd()&&(r=r.multiply(n).mod(e)),t=t.divide(2),n=n.square().mod(e)}return r},h.prototype.modPow=u.prototype.modPow=a.prototype.modPow,a.prototype.compareAbs=function(t){var e=J(t),r=this.value,n=e.value;return e.isSmall?1:k(r,n)},u.prototype.compareAbs=function(t){var e=J(t),r=Math.abs(this.value),n=e.value;return e.isSmall?r===(n=Math.abs(n))?0:r>n?1:-1:-1},h.prototype.compareAbs=function(t){var e=this.value,r=J(t).value;return(e=e>=0?e:-e)===(r=r>=0?r:-r)?0:e>r?1:-1},a.prototype.compare=function(t){if(t===1/0)return-1;if(t===-1/0)return 1;var e=J(t),r=this.value,n=e.value;return this.sign!==e.sign?e.sign?1:-1:e.isSmall?this.sign?-1:1:k(r,n)*(this.sign?-1:1)},a.prototype.compareTo=a.prototype.compare,u.prototype.compare=function(t){if(t===1/0)return-1;if(t===-1/0)return 1;var e=J(t),r=this.value,n=e.value;return e.isSmall?r==n?0:r>n?1:-1:r<0!==e.sign?r<0?-1:1:r<0?1:-1},u.prototype.compareTo=u.prototype.compare,h.prototype.compare=function(t){if(t===1/0)return-1;if(t===-1/0)return 1;var e=this.value,r=J(t).value;return e===r?0:e>r?1:-1},h.prototype.compareTo=h.prototype.compare,a.prototype.equals=function(t){return 0===this.compare(t)},h.prototype.eq=h.prototype.equals=u.prototype.eq=u.prototype.equals=a.prototype.eq=a.prototype.equals,a.prototype.notEquals=function(t){return 0!==this.compare(t)},h.prototype.neq=h.prototype.notEquals=u.prototype.neq=u.prototype.notEquals=a.prototype.neq=a.prototype.notEquals,a.prototype.greater=function(t){return this.compare(t)>0},h.prototype.gt=h.prototype.greater=u.prototype.gt=u.prototype.greater=a.prototype.gt=a.prototype.greater,a.prototype.lesser=function(t){return this.compare(t)<0},h.prototype.lt=h.prototype.lesser=u.prototype.lt=u.prototype.lesser=a.prototype.lt=a.prototype.lesser,a.prototype.greaterOrEquals=function(t){return this.compare(t)>=0},h.prototype.geq=h.prototype.greaterOrEquals=u.prototype.geq=u.prototype.greaterOrEquals=a.prototype.geq=a.prototype.greaterOrEquals,a.prototype.lesserOrEquals=function(t){return this.compare(t)<=0},h.prototype.leq=h.prototype.lesserOrEquals=u.prototype.leq=u.prototype.lesserOrEquals=a.prototype.leq=a.prototype.lesserOrEquals,a.prototype.isEven=function(){return 0==(1&this.value[0])},u.prototype.isEven=function(){return 0==(1&this.value)},h.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},a.prototype.isOdd=function(){return 1==(1&this.value[0])},u.prototype.isOdd=function(){return 1==(1&this.value)},h.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},a.prototype.isPositive=function(){return!this.sign},u.prototype.isPositive=function(){return this.value>0},h.prototype.isPositive=u.prototype.isPositive,a.prototype.isNegative=function(){return this.sign},u.prototype.isNegative=function(){return this.value<0},h.prototype.isNegative=u.prototype.isNegative,a.prototype.isUnit=function(){return!1},u.prototype.isUnit=function(){return 1===Math.abs(this.value)},h.prototype.isUnit=function(){return this.abs().value===BigInt(1)},a.prototype.isZero=function(){return!1},u.prototype.isZero=function(){return 0===this.value},h.prototype.isZero=function(){return this.value===BigInt(0)},a.prototype.isDivisibleBy=function(t){var e=J(t);return!e.isZero()&&(!!e.isUnit()||(0===e.compareAbs(2)?this.isEven():this.mod(e).isZero()))},h.prototype.isDivisibleBy=u.prototype.isDivisibleBy=a.prototype.isDivisibleBy,a.prototype.isPrime=function(t){var e=P(this);if(void 0!==e)return e;var r=this.abs(),n=r.bitLength();if(n<=64)return B(r,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var o=Math.log(2)*n.toJSNumber(),s=Math.ceil(!0===t?2*Math.pow(o,2):o),a=[],u=0;u<s;u++)a.push(i(u+2));return B(r,a)},h.prototype.isPrime=u.prototype.isPrime=a.prototype.isPrime,a.prototype.isProbablePrime=function(t,e){var r=P(this);if(void 0!==r)return r;for(var n=this.abs(),o=void 0===t?5:t,s=[],a=0;a<o;a++)s.push(i.randBetween(2,n.minus(2),e));return B(n,s)},h.prototype.isProbablePrime=u.prototype.isProbablePrime=a.prototype.isProbablePrime,a.prototype.modInv=function(t){for(var e,r,n,o=i.zero,s=i.one,a=J(t),u=this.abs();!u.isZero();)e=a.divide(u),r=o,n=a,o=s,a=u,s=r.subtract(e.multiply(s)),u=n.subtract(e.multiply(u));if(!a.isUnit())throw new Error(this.toString()+" and "+t.toString()+" are not co-prime");return-1===o.compare(0)&&(o=o.add(t)),this.isNegative()?o.negate():o},h.prototype.modInv=u.prototype.modInv=a.prototype.modInv,a.prototype.next=function(){var t=this.value;return this.sign?b(t,1,this.sign):new a(v(t,1),this.sign)},u.prototype.next=function(){var t=this.value;return t+1<r?new u(t+1):new a(n,!1)},h.prototype.next=function(){return new h(this.value+BigInt(1))},a.prototype.prev=function(){var t=this.value;return this.sign?new a(v(t,1),!0):b(t,1,this.sign)},u.prototype.prev=function(){var t=this.value;return t-1>-r?new u(t-1):new a(n,!0)},h.prototype.prev=function(){return new h(this.value-BigInt(1))};for(var I=[1];2*I[I.length-1]<=e;)I.push(2*I[I.length-1]);var C=I.length,R=I[C-1];function O(t){return Math.abs(t)<=e}function N(t,e,r){e=J(e);for(var n=t.isNegative(),o=e.isNegative(),s=n?t.not():t,a=o?e.not():e,u=0,h=0,c=null,f=null,l=[];!s.isZero()||!a.isZero();)u=(c=x(s,R))[1].toJSNumber(),n&&(u=R-1-u),h=(f=x(a,R))[1].toJSNumber(),o&&(h=R-1-h),s=c[0],a=f[0],l.push(r(u,h));for(var p=0!==r(n?1:0,o?1:0)?i(-1):i(0),d=l.length-1;d>=0;d-=1)p=p.multiply(R).add(i(l[d]));return p}a.prototype.shiftLeft=function(t){var e=J(t).toJSNumber();if(!O(e))throw new Error(String(e)+" is too large for shifting.");if(e<0)return this.shiftRight(-e);var r=this;if(r.isZero())return r;for(;e>=C;)r=r.multiply(R),e-=C-1;return r.multiply(I[e])},h.prototype.shiftLeft=u.prototype.shiftLeft=a.prototype.shiftLeft,a.prototype.shiftRight=function(t){var e,r=J(t).toJSNumber();if(!O(r))throw new Error(String(r)+" is too large for shifting.");if(r<0)return this.shiftLeft(-r);for(var n=this;r>=C;){if(n.isZero()||n.isNegative()&&n.isUnit())return n;n=(e=x(n,R))[1].isNegative()?e[0].prev():e[0],r-=C-1}return(e=x(n,I[r]))[1].isNegative()?e[0].prev():e[0]},h.prototype.shiftRight=u.prototype.shiftRight=a.prototype.shiftRight,a.prototype.not=function(){return this.negate().prev()},h.prototype.not=u.prototype.not=a.prototype.not,a.prototype.and=function(t){return N(this,t,(function(t,e){return t&e}))},h.prototype.and=u.prototype.and=a.prototype.and,a.prototype.or=function(t){return N(this,t,(function(t,e){return t|e}))},h.prototype.or=u.prototype.or=a.prototype.or,a.prototype.xor=function(t){return N(this,t,(function(t,e){return t^e}))},h.prototype.xor=u.prototype.xor=a.prototype.xor;function q(t){var r=t.value,n="number"==typeof r?r|1<<30:"bigint"==typeof r?r|BigInt(1<<30):r[0]+r[1]*e|1073758208;return n&-n}function L(t,e){return t=J(t),e=J(e),t.greater(e)?t:e}function D(t,e){return t=J(t),e=J(e),t.lesser(e)?t:e}function F(t,e){if(t=J(t).abs(),e=J(e).abs(),t.equals(e))return t;if(t.isZero())return e;if(e.isZero())return t;for(var r,n,i=s[1];t.isEven()&&e.isEven();)r=D(q(t),q(e)),t=t.divide(r),e=e.divide(r),i=i.multiply(r);for(;t.isEven();)t=t.divide(q(t));do{for(;e.isEven();)e=e.divide(q(e));t.greater(e)&&(n=e,e=t,t=n),e=e.subtract(t)}while(!e.isZero());return i.isUnit()?t:t.multiply(i)}a.prototype.bitLength=function(){var t=this;return t.compareTo(i(0))<0&&(t=t.negate().subtract(i(1))),0===t.compareTo(i(0))?i(0):i(function t(e,r){if(r.compareTo(e)<=0){var n=t(e,r.square(r)),o=n.p,s=n.e,a=o.multiply(r);return a.compareTo(e)<=0?{p:a,e:2*s+1}:{p:o,e:2*s}}return{p:i(1),e:0}}(t,i(2)).e).add(i(1))},h.prototype.bitLength=u.prototype.bitLength=a.prototype.bitLength;var U=function(t,e,r,n){r=r||"0123456789abcdefghijklmnopqrstuvwxyz",t=String(t),n||(t=t.toLowerCase(),r=r.toLowerCase());var i,o=t.length,s=Math.abs(e),a={};for(i=0;i<r.length;i++)a[r[i]]=i;for(i=0;i<o;i++){if("-"!==(c=t[i])&&(c in a&&a[c]>=s)){if("1"===c&&1===s)continue;throw new Error(c+" is not a valid digit in base "+e+".")}}e=J(e);var u=[],h="-"===t[0];for(i=h?1:0;i<t.length;i++){var c;if((c=t[i])in a)u.push(J(a[c]));else{if("<"!==c)throw new Error(c+" is not a valid character");var f=i;do{i++}while(">"!==t[i]&&i<t.length);u.push(J(t.slice(f+1,i)))}}return j(u,e,h)};function j(t,e,r){var n,i=s[0],o=s[1];for(n=t.length-1;n>=0;n--)i=i.add(t[n].times(o)),o=o.times(e);return r?i.negate():i}function H(t,e){if((e=i(e)).isZero()){if(t.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(e.equals(-1)){if(t.isZero())return{value:[0],isNegative:!1};if(t.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-t.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var r=Array.apply(null,Array(t.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return r.unshift([1]),{value:[].concat.apply([],r),isNegative:!1}}var n=!1;if(t.isNegative()&&e.isPositive()&&(n=!0,t=t.abs()),e.isUnit())return t.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(t.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:n};for(var o,s=[],a=t;a.isNegative()||a.compareAbs(e)>=0;){o=a.divmod(e),a=o.quotient;var u=o.remainder;u.isNegative()&&(u=e.minus(u).abs(),a=a.next()),s.push(u.toJSNumber())}return s.push(a.toJSNumber()),{value:s.reverse(),isNegative:n}}function K(t,e,r){var n=H(t,e);return(n.isNegative?"-":"")+n.value.map((function(t){return function(t,e){return t<(e=e||"0123456789abcdefghijklmnopqrstuvwxyz").length?e[t]:"<"+t+">"}(t,r)})).join("")}function z(t){if(c(+t)){var e=+t;if(e===g(e))return o?new h(BigInt(e)):new u(e);throw new Error("Invalid integer: "+t)}var r="-"===t[0];r&&(t=t.slice(1));var n=t.split(/e/i);if(n.length>2)throw new Error("Invalid integer: "+n.join("e"));if(2===n.length){var i=n[1];if("+"===i[0]&&(i=i.slice(1)),(i=+i)!==g(i)||!c(i))throw new Error("Invalid integer: "+i+" is not a valid exponent.");var s=n[0],f=s.indexOf(".");if(f>=0&&(i-=s.length-f-1,s=s.slice(0,f)+s.slice(f+1)),i<0)throw new Error("Cannot include negative exponent part for integers");t=s+=new Array(i+1).join("0")}if(!/^([0-9][0-9]*)$/.test(t))throw new Error("Invalid integer: "+t);if(o)return new h(BigInt(r?"-"+t:t));for(var l=[],d=t.length,m=d-7;d>0;)l.push(+t.slice(m,d)),(m-=7)<0&&(m=0),d-=7;return p(l),new a(l,r)}function J(t){return"number"==typeof t?function(t){if(o)return new h(BigInt(t));if(c(t)){if(t!==g(t))throw new Error(t+" is not an integer.");return new u(t)}return z(t.toString())}(t):"string"==typeof t?z(t):"bigint"==typeof t?new h(t):t}a.prototype.toArray=function(t){return H(this,t)},u.prototype.toArray=function(t){return H(this,t)},h.prototype.toArray=function(t){return H(this,t)},a.prototype.toString=function(t,e){if(void 0===t&&(t=10),10!==t||e)return K(this,t,e);for(var r,n=this.value,i=n.length,o=String(n[--i]);--i>=0;)r=String(n[i]),o+="0000000".slice(r.length)+r;return(this.sign?"-":"")+o},u.prototype.toString=function(t,e){return void 0===t&&(t=10),10!=t||e?K(this,t,e):String(this.value)},h.prototype.toString=u.prototype.toString,h.prototype.toJSON=a.prototype.toJSON=u.prototype.toJSON=function(){return this.toString()},a.prototype.valueOf=function(){return parseInt(this.toString(),10)},a.prototype.toJSNumber=a.prototype.valueOf,u.prototype.valueOf=function(){return this.value},u.prototype.toJSNumber=u.prototype.valueOf,h.prototype.valueOf=h.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};for(var Q=0;Q<1e3;Q++)s[Q]=J(Q),Q>0&&(s[-Q]=J(-Q));return s.one=s[1],s.zero=s[0],s.minusOne=s[-1],s.max=L,s.min=D,s.gcd=F,s.lcm=function(t,e){return t=J(t).abs(),e=J(e).abs(),t.divide(F(t,e)).multiply(e)},s.isInstance=function(t){return t instanceof a||t instanceof u||t instanceof h},s.randBetween=function(t,r,n){t=J(t),r=J(r);var i=n||Math.random,o=D(t,r),a=L(t,r).subtract(o).add(1);if(a.isSmall)return o.add(Math.floor(i()*a));for(var u=H(a,e).value,h=[],c=!0,f=0;f<u.length;f++){var l=c?u[f]+(f+1<u.length?u[f+1]/e:0):e,p=g(i()*l);h.push(p),p<u[f]&&(c=!1)}return o.add(s.fromArray(h,e,!1))},s.fromArray=function(t,e,r){return j(t.map(J),J(e||10),r)},s}();t.hasOwnProperty("exports")&&(t.exports=i),void 0===(n=function(){return i}.call(e,r,e,t))||(t.exports=n)}).call(this,r(19)(t))},function(t,e,r){const n=r(22);t.exports={stringToByteArrayInUtf8:function(t){return function(t){if("undefined"!=typeof window&&window.TextEncoder)return new window.TextEncoder("utf-8").encode(t);const{TextEncoder:e}=r(24);return(new e).encode(t)}(t)},utf8ByteArrayToString:function(t){if(-1!==t)return Array.isArray(t)&&(t=new Uint8Array(t)),function(t){if("undefined"!=typeof window&&window.TextDecoder)return new window.TextDecoder("utf-8").decode(t);const{TextDecoder:e}=r(24);return(new e).decode(t)}(t)},byteArrayToBase64:function(t){return n.fromByteArray(t)},base64ToByteArray:function(t){return n.toByteArray(t)},byteArrayToHex:function(t){for(let e=0;e<t.length;e++)t[e]=(t[e]>>>0)%256;const e=[];let r=0;for(let n=0;n<2*t.length;n+=2)e[n>>>3]|=parseInt(t[r],10)<<24-n%8*4,r++;const n=[];for(let r=0;r<t.length;r++){const t=e[r>>>2]>>>24-r%4*8&255;n.push((t>>>4).toString(16)),n.push((15&t).toString(16))}return n.join("")},hexToByteArray:function(t){if("string"!=typeof t)throw new TypeError("Expected input to be a string");if(t.length%2!=0)throw new RangeError("Expected string to be an even number of characters");const e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=parseInt(t.substring(r,r+2),16);return e},byteArrayToByteArray:function(t){return t}}},function(t,e,r){const n=r(4),i=r(15).Reporter,o=r(13).Buffer;function s(t,e){i.call(this,e),o.isBuffer(t)?(this.base=t,this.offset=0,this.length=t.length):this.error("Input not Buffer")}function a(t,e){if(Array.isArray(t))this.length=0,this.value=t.map((function(t){return a.isEncoderBuffer(t)||(t=new a(t,e)),this.length+=t.length,t}),this);else if("number"==typeof t){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if("string"==typeof t)this.value=t,this.length=o.byteLength(t);else{if(!o.isBuffer(t))return e.error("Unsupported type: "+typeof t);this.value=t,this.length=t.length}}n(s,i),e.DecoderBuffer=s,s.isDecoderBuffer=function(t){if(t instanceof s)return!0;return"object"==typeof t&&o.isBuffer(t.base)&&"DecoderBuffer"===t.constructor.name&&"number"==typeof t.offset&&"number"==typeof t.length&&"function"==typeof t.save&&"function"==typeof t.restore&&"function"==typeof t.isEmpty&&"function"==typeof t.readUInt8&&"function"==typeof t.skip&&"function"==typeof t.raw},s.prototype.save=function(){return{offset:this.offset,reporter:i.prototype.save.call(this)}},s.prototype.restore=function(t){const e=new s(this.base);return e.offset=t.offset,e.length=this.offset,this.offset=t.offset,i.prototype.restore.call(this,t.reporter),e},s.prototype.isEmpty=function(){return this.offset===this.length},s.prototype.readUInt8=function(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||"DecoderBuffer overrun")},s.prototype.skip=function(t,e){if(!(this.offset+t<=this.length))return this.error(e||"DecoderBuffer overrun");const r=new s(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+t,this.offset+=t,r},s.prototype.raw=function(t){return this.base.slice(t?t.offset:this.offset,this.length)},e.EncoderBuffer=a,a.isEncoderBuffer=function(t){if(t instanceof a)return!0;return"object"==typeof t&&"EncoderBuffer"===t.constructor.name&&"number"==typeof t.length&&"function"==typeof t.join},a.prototype.join=function(t,e){return t||(t=o.alloc(this.length)),e||(e=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(r){r.join(t,e),e+=r.length})):("number"==typeof this.value?t[e]=this.value:"string"==typeof this.value?t.write(this.value,e):o.isBuffer(this.value)&&this.value.copy(t,e),e+=this.length)),t}},function(t,e,r){const n=r(21),i=r(12),o=r(54),s=r(56),a=r(6);t.exports={SM2:n,SM3:i,SM4:o,CSR:s,utils:a}},function(t,e,r){(function(){var e;function r(t,e,r){null!=t&&("number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function n(){return new r(null)}var i="undefined"!=typeof navigator;i&&"Microsoft Internet Explorer"==navigator.appName?(r.prototype.am=function(t,e,r,n,i,o){for(var s=32767&e,a=e>>15;--o>=0;){var u=32767&this[t],h=this[t++]>>15,c=a*u+h*s;i=((u=s*u+((32767&c)<<15)+r[n]+(1073741823&i))>>>30)+(c>>>15)+a*h+(i>>>30),r[n++]=1073741823&u}return i},e=30):i&&"Netscape"!=navigator.appName?(r.prototype.am=function(t,e,r,n,i,o){for(;--o>=0;){var s=e*this[t++]+r[n]+i;i=Math.floor(s/67108864),r[n++]=67108863&s}return i},e=26):(r.prototype.am=function(t,e,r,n,i,o){for(var s=16383&e,a=e>>14;--o>=0;){var u=16383&this[t],h=this[t++]>>14,c=a*u+h*s;i=((u=s*u+((16383&c)<<14)+r[n]+i)>>28)+(c>>14)+a*h,r[n++]=268435455&u}return i},e=28),r.prototype.DB=e,r.prototype.DM=(1<<e)-1,r.prototype.DV=1<<e;r.prototype.FV=Math.pow(2,52),r.prototype.F1=52-e,r.prototype.F2=2*e-52;var o,s,a=new Array;for(o="0".charCodeAt(0),s=0;s<=9;++s)a[o++]=s;for(o="a".charCodeAt(0),s=10;s<36;++s)a[o++]=s;for(o="A".charCodeAt(0),s=10;s<36;++s)a[o++]=s;function u(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function h(t,e){var r=a[t.charCodeAt(e)];return null==r?-1:r}function c(t){var e=n();return e.fromInt(t),e}function f(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}function l(t){this.m=t}function p(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function d(t,e){return t&e}function g(t,e){return t|e}function m(t,e){return t^e}function y(t,e){return t&~e}function v(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function w(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function b(){}function _(t){return t}function S(t){this.r2=n(),this.q3=n(),r.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}l.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},l.prototype.revert=function(t){return t},l.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},l.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},l.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},p.prototype.convert=function(t){var e=n();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(r.ZERO)>0&&this.m.subTo(e,e),e},p.prototype.revert=function(t){var e=n();return t.copyTo(e),this.reduce(e),e},p.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t[e],n=r*this.mpl+((r*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[r=e+this.m.t]+=this.m.am(0,n,t,e,0,this.m.t);t[r]>=t.DV;)t[r]-=t.DV,t[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},p.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},p.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},r.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},r.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},r.prototype.fromString=function(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.fromRadix(t,e);n=2}this.t=0,this.s=0;for(var i=t.length,o=!1,s=0;--i>=0;){var a=8==n?255&t[i]:h(t,i);a<0?"-"==t.charAt(i)&&(o=!0):(o=!1,0==s?this[this.t++]=a:s+n>this.DB?(this[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this[this.t++]=a>>this.DB-s):this[this.t-1]|=a<<s,(s+=n)>=this.DB&&(s-=this.DB))}8==n&&0!=(128&t[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),o&&r.ZERO.subTo(this,this)},r.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},r.prototype.dlShiftTo=function(t,e){var r;for(r=this.t-1;r>=0;--r)e[r+t]=this[r];for(r=t-1;r>=0;--r)e[r]=0;e.t=this.t+t,e.s=this.s},r.prototype.drShiftTo=function(t,e){for(var r=t;r<this.t;++r)e[r-t]=this[r];e.t=Math.max(this.t-t,0),e.s=this.s},r.prototype.lShiftTo=function(t,e){var r,n=t%this.DB,i=this.DB-n,o=(1<<i)-1,s=Math.floor(t/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)e[r+s+1]=this[r]>>i|a,a=(this[r]&o)<<n;for(r=s-1;r>=0;--r)e[r]=0;e[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()},r.prototype.rShiftTo=function(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)e.t=0;else{var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e[0]=this[r]>>n;for(var s=r+1;s<this.t;++s)e[s-r-1]|=(this[s]&o)<<i,e[s-r]=this[s]>>n;n>0&&(e[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}},r.prototype.subTo=function(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this[r]-t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t[r],e[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e[r++]=this.DV+n:n>0&&(e[r++]=n),e.t=r,e.clamp()},r.prototype.multiplyTo=function(t,e){var n=this.abs(),i=t.abs(),o=n.t;for(e.t=o+i.t;--o>=0;)e[o]=0;for(o=0;o<i.t;++o)e[o+n.t]=n.am(0,i[o],e,o,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&r.ZERO.subTo(e,e)},r.prototype.squareTo=function(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e[r],t,2*r,0,1);(t[r+e.t]+=e.am(r+1,2*e[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t[r+e.t]-=e.DV,t[r+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(r,e[r],t,2*r,0,1)),t.s=0,t.clamp()},r.prototype.divRemTo=function(t,e,i){var o=t.abs();if(!(o.t<=0)){var s=this.abs();if(s.t<o.t)return null!=e&&e.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=n());var a=n(),u=this.s,h=t.s,c=this.DB-f(o[o.t-1]);c>0?(o.lShiftTo(c,a),s.lShiftTo(c,i)):(o.copyTo(a),s.copyTo(i));var l=a.t,p=a[l-1];if(0!=p){var d=p*(1<<this.F1)+(l>1?a[l-2]>>this.F2:0),g=this.FV/d,m=(1<<this.F1)/d,y=1<<this.F2,v=i.t,w=v-l,b=null==e?n():e;for(a.dlShiftTo(w,b),i.compareTo(b)>=0&&(i[i.t++]=1,i.subTo(b,i)),r.ONE.dlShiftTo(l,b),b.subTo(a,a);a.t<l;)a[a.t++]=0;for(;--w>=0;){var _=i[--v]==p?this.DM:Math.floor(i[v]*g+(i[v-1]+y)*m);if((i[v]+=a.am(0,_,i,w,0,l))<_)for(a.dlShiftTo(w,b),i.subTo(b,i);i[v]<--_;)i.subTo(b,i)}null!=e&&(i.drShiftTo(l,e),u!=h&&r.ZERO.subTo(e,e)),i.t=l,i.clamp(),c>0&&i.rShiftTo(c,i),u<0&&r.ZERO.subTo(i,i)}}},r.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},r.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},r.prototype.exp=function(t,e){if(t>4294967295||t<1)return r.ONE;var i=n(),o=n(),s=e.convert(this),a=f(t)-1;for(s.copyTo(i);--a>=0;)if(e.sqrTo(i,o),(t&1<<a)>0)e.mulTo(o,s,i);else{var u=i;i=o,o=u}return e.revert(i)},r.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var r,n=(1<<e)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%e;if(s-- >0)for(a<this.DB&&(r=this[s]>>a)>0&&(i=!0,o=u(r));s>=0;)a<e?(r=(this[s]&(1<<a)-1)<<e-a,r|=this[--s]>>(a+=this.DB-e)):(r=this[s]>>(a-=e)&n,a<=0&&(a+=this.DB,--s)),r>0&&(i=!0),i&&(o+=u(r));return i?o:"0"},r.prototype.negate=function(){var t=n();return r.ZERO.subTo(this,t),t},r.prototype.abs=function(){return this.s<0?this.negate():this},r.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(0!=(e=r-t.t))return this.s<0?-e:e;for(;--r>=0;)if(0!=(e=this[r]-t[r]))return e;return 0},r.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+f(this[this.t-1]^this.s&this.DM)},r.prototype.mod=function(t){var e=n();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(r.ZERO)>0&&t.subTo(e,e),e},r.prototype.modPowInt=function(t,e){var r;return r=t<256||e.isEven()?new l(e):new p(e),this.exp(t,r)},r.ZERO=c(0),r.ONE=c(1),b.prototype.convert=_,b.prototype.revert=_,b.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r)},b.prototype.sqrTo=function(t,e){t.squareTo(e)},S.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=n();return t.copyTo(e),this.reduce(e),e},S.prototype.revert=function(t){return t},S.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},S.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},S.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var M,E,A,T=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],x=(1<<26)/T[T.length-1];function k(){var t;t=(new Date).getTime(),E[A++]^=255&t,E[A++]^=t>>8&255,E[A++]^=t>>16&255,E[A++]^=t>>24&255,A>=N&&(A-=N)}if(r.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},r.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),i=c(r),o=n(),s=n(),a="";for(this.divRemTo(i,o,s);o.signum()>0;)a=(r+s.intValue()).toString(t).substr(1)+a,o.divRemTo(i,o,s);return s.intValue().toString(t)+a},r.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var n=this.chunkSize(e),i=Math.pow(e,n),o=!1,s=0,a=0,u=0;u<t.length;++u){var c=h(t,u);c<0?"-"==t.charAt(u)&&0==this.signum()&&(o=!0):(a=e*a+c,++s>=n&&(this.dMultiply(i),this.dAddOffset(a,0),s=0,a=0))}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(a,0)),o&&r.ZERO.subTo(this,this)},r.prototype.fromNumber=function(t,e,n){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(r.ONE.shiftLeft(t-1),g,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(r.ONE.shiftLeft(t-1),this);else{var i=new Array,o=7&t;i.length=1+(t>>3),e.nextBytes(i),o>0?i[0]&=(1<<o)-1:i[0]=0,this.fromString(i,256)}},r.prototype.bitwiseTo=function(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r[n]=e(this[n],t[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r[n]=e(this[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r[n]=e(i,t[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()},r.prototype.changeBit=function(t,e){var n=r.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n},r.prototype.addTo=function(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this[r]+t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t[r],e[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e[r++]=n:n<-1&&(e[r++]=this.DV+n),e.t=r,e.clamp()},r.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},r.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},r.prototype.multiplyLowerTo=function(t,e,r){var n,i=Math.min(this.t+t.t,e);for(r.s=0,r.t=i;i>0;)r[--i]=0;for(n=r.t-this.t;i<n;++i)r[i+this.t]=this.am(0,t[i],r,i,0,this.t);for(n=Math.min(t.t,e);i<n;++i)this.am(0,t[i],r,i,0,e-i);r.clamp()},r.prototype.multiplyUpperTo=function(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r[this.t+n-e]=this.am(e-n,t[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)},r.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0==e)r=this[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this[n])%t;return r},r.prototype.millerRabin=function(t){var e=this.subtract(r.ONE),i=e.getLowestSetBit();if(i<=0)return!1;var o=e.shiftRight(i);(t=t+1>>1)>T.length&&(t=T.length);for(var s=n(),a=0;a<t;++a){s.fromInt(T[Math.floor(Math.random()*T.length)]);var u=s.modPow(o,this);if(0!=u.compareTo(r.ONE)&&0!=u.compareTo(e)){for(var h=1;h++<i&&0!=u.compareTo(e);)if(0==(u=u.modPowInt(2,this)).compareTo(r.ONE))return!1;if(0!=u.compareTo(e))return!1}}return!0},r.prototype.clone=function(){var t=n();return this.copyTo(t),t},r.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},r.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},r.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},r.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},r.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var r,n=this.DB-t*this.DB%8,i=0;if(t-- >0)for(n<this.DB&&(r=this[t]>>n)!=(this.s&this.DM)>>n&&(e[i++]=r|this.s<<this.DB-n);t>=0;)n<8?(r=(this[t]&(1<<n)-1)<<8-n,r|=this[--t]>>(n+=this.DB-8)):(r=this[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(e[i++]=r);return e},r.prototype.equals=function(t){return 0==this.compareTo(t)},r.prototype.min=function(t){return this.compareTo(t)<0?this:t},r.prototype.max=function(t){return this.compareTo(t)>0?this:t},r.prototype.and=function(t){var e=n();return this.bitwiseTo(t,d,e),e},r.prototype.or=function(t){var e=n();return this.bitwiseTo(t,g,e),e},r.prototype.xor=function(t){var e=n();return this.bitwiseTo(t,m,e),e},r.prototype.andNot=function(t){var e=n();return this.bitwiseTo(t,y,e),e},r.prototype.not=function(){for(var t=n(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},r.prototype.shiftLeft=function(t){var e=n();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},r.prototype.shiftRight=function(t){var e=n();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},r.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+v(this[t]);return this.s<0?this.t*this.DB:-1},r.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=w(this[r]^e);return t},r.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},r.prototype.setBit=function(t){return this.changeBit(t,g)},r.prototype.clearBit=function(t){return this.changeBit(t,y)},r.prototype.flipBit=function(t){return this.changeBit(t,m)},r.prototype.add=function(t){var e=n();return this.addTo(t,e),e},r.prototype.subtract=function(t){var e=n();return this.subTo(t,e),e},r.prototype.multiply=function(t){var e=n();return this.multiplyTo(t,e),e},r.prototype.divide=function(t){var e=n();return this.divRemTo(t,e,null),e},r.prototype.remainder=function(t){var e=n();return this.divRemTo(t,null,e),e},r.prototype.divideAndRemainder=function(t){var e=n(),r=n();return this.divRemTo(t,e,r),new Array(e,r)},r.prototype.modPow=function(t,e){var r,i,o=t.bitLength(),s=c(1);if(o<=0)return s;r=o<18?1:o<48?3:o<144?4:o<768?5:6,i=o<8?new l(e):e.isEven()?new S(e):new p(e);var a=new Array,u=3,h=r-1,d=(1<<r)-1;if(a[1]=i.convert(this),r>1){var g=n();for(i.sqrTo(a[1],g);u<=d;)a[u]=n(),i.mulTo(g,a[u-2],a[u]),u+=2}var m,y,v=t.t-1,w=!0,b=n();for(o=f(t[v])-1;v>=0;){for(o>=h?m=t[v]>>o-h&d:(m=(t[v]&(1<<o+1)-1)<<h-o,v>0&&(m|=t[v-1]>>this.DB+o-h)),u=r;0==(1&m);)m>>=1,--u;if((o-=u)<0&&(o+=this.DB,--v),w)a[m].copyTo(s),w=!1;else{for(;u>1;)i.sqrTo(s,b),i.sqrTo(b,s),u-=2;u>0?i.sqrTo(s,b):(y=s,s=b,b=y),i.mulTo(b,a[m],s)}for(;v>=0&&0==(t[v]&1<<o);)i.sqrTo(s,b),y=s,s=b,b=y,--o<0&&(o=this.DB-1,--v)}return i.revert(s)},r.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return r.ZERO;for(var n=t.clone(),i=this.clone(),o=c(1),s=c(0),a=c(0),u=c(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),e?(o.isEven()&&s.isEven()||(o.addTo(this,o),s.subTo(t,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;i.isEven();)i.rShiftTo(1,i),e?(a.isEven()&&u.isEven()||(a.addTo(this,a),u.subTo(t,u)),a.rShiftTo(1,a)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);n.compareTo(i)>=0?(n.subTo(i,n),e&&o.subTo(a,o),s.subTo(u,s)):(i.subTo(n,i),e&&a.subTo(o,a),u.subTo(s,u))}return 0!=i.compareTo(r.ONE)?r.ZERO:u.compareTo(t)>=0?u.subtract(t):u.signum()<0?(u.addTo(t,u),u.signum()<0?u.add(t):u):u},r.prototype.pow=function(t){return this.exp(t,new b)},r.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r},r.prototype.isProbablePrime=function(t){var e,r=this.abs();if(1==r.t&&r[0]<=T[T.length-1]){for(e=0;e<T.length;++e)if(r[0]==T[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<T.length;){for(var n=T[e],i=e+1;i<T.length&&n<x;)n*=T[i++];for(n=r.modInt(n);e<i;)if(n%T[e++]==0)return!1}return r.millerRabin(t)},r.prototype.square=function(){var t=n();return this.squareTo(t),t},r.prototype.Barrett=S,null==E){var P;if(E=new Array,A=0,"undefined"!=typeof window&&window.crypto)if(window.crypto.getRandomValues){var B=new Uint8Array(32);for(window.crypto.getRandomValues(B),P=0;P<32;++P)E[A++]=B[P]}else if("Netscape"==navigator.appName&&navigator.appVersion<"5"){var I=window.crypto.random(32);for(P=0;P<I.length;++P)E[A++]=255&I.charCodeAt(P)}for(;A<N;)P=Math.floor(65536*Math.random()),E[A++]=P>>>8,E[A++]=255&P;A=0,k()}function C(){if(null==M){for(k(),(M=new O).init(E),A=0;A<E.length;++A)E[A]=0;A=0}return M.next()}function R(){}function O(){this.i=0,this.j=0,this.S=new Array}R.prototype.nextBytes=function(t){var e;for(e=0;e<t.length;++e)t[e]=C()},O.prototype.init=function(t){var e,r,n;for(e=0;e<256;++e)this.S[e]=e;for(r=0,e=0;e<256;++e)r=r+this.S[e]+t[e%t.length]&255,n=this.S[e],this.S[e]=this.S[r],this.S[r]=n;this.i=0,this.j=0},O.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]};var N=256;t.exports={default:r,BigInteger:r,SecureRandom:R}}).call(this)},function(t,e,r){const{BigInteger:n}=r(9);t.exports=class{constructor(){this.p=new n("FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00000000FFFFFFFFFFFFFFFF",16),this.a=new n("FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00000000FFFFFFFFFFFFFFFC",16),this.b=new n("28E9FA9E9D9F5E344D5A9E4BCF6509A7F39789F515AB8F92DDBCBD414D940E93",16),this.Gx=new n("32C4AE2C1F1981195F9904466A39C9948FE30BBFF2660BE1715A4589334C74C7",16),this.Gy=new n("BC3736A2F4F6779C59BDCEE36B692153D0A9877CC62A474002DF32E52139F0A0",16),this.n=new n("FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFF7203DF6B21C6052B53BBF40939D54123",16),this.h=new n("1",16)}}},function(t,e,r){(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=r(22),i=r(42),o=r(43);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return h(this,t,e,r)}function h(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=l(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(e,r),i=(t=a(t,n)).write(e,r);i!==n&&(t=t.slice(0,i));return t}(t,e,r):function(t,e){if(u.isBuffer(e)){var r=0|p(e.length);return 0===(t=a(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?a(t,0):l(t,e);if("Buffer"===e.type&&o(e.data))return l(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(c(e),t=a(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function l(t,e){var r=e.length<0?0:0|p(e.length);t=a(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function p(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return j(t).length;default:if(n)return U(t).length;e=(""+e).toLowerCase(),n=!0}}function g(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,r);case"utf8":case"utf-8":return T(this,e,r);case"ascii":return x(this,e,r);case"latin1":case"binary":return k(this,e,r);case"base64":return A(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function m(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function y(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:v(t,e,r,n,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):v(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,r,n,i){var o,s=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function h(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var c=-1;for(o=r;o<a;o++)if(h(t,o)===h(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){for(var f=!0,l=0;l<u;l++)if(h(t,o+l)!==h(e,l)){f=!1;break}if(f)return o}return-1}function w(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[r+s]=a}return s}function b(t,e,r,n){return H(U(e,t.length-r),t,r,n)}function _(t,e,r,n){return H(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function S(t,e,r,n){return _(t,e,r,n)}function M(t,e,r,n){return H(j(e),t,r,n)}function E(t,e,r,n){return H(function(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function A(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function T(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,s,a,u,h=t[i],c=null,f=h>239?4:h>223?3:h>191?2:1;if(i+f<=r)switch(f){case 1:h<128&&(c=h);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&h)<<6|63&o)>127&&(c=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&h)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&h)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(c=u)}null===c?(c=65533,f=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=f}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=4096));return r}(n)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,r){return h(null,t,e,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,r){return function(t,e,r,n){return c(e),e<=0?a(t,e):void 0!==r?"string"==typeof n?a(t,e).fill(r,n):a(t,e).fill(r):a(t,e)}(null,t,e,r)},u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=u.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var s=t[r];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?T(this,0,t):g.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,r,n,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),a=Math.min(o,s),h=this.slice(n,i),c=t.slice(e,r),f=0;f<a;++f)if(h[f]!==c[f]){o=h[f],s=c[f];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return y(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return y(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return w(this,t,e,r);case"utf8":case"utf-8":return b(this,t,e,r);case"ascii":return _(this,t,e,r);case"latin1":case"binary":return S(this,t,e,r);case"base64":return M(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function x(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function k(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function P(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=F(t[o]);return i}function B(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function I(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function C(t,e,r,n,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function R(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function O(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function N(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function q(t,e,r,n,o){return o||N(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function L(t,e,r,n,o){return o||N(t,0,r,8),i.write(t,e,r,n,52,8),r+8}u.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;r=new u(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},u.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||I(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},u.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||I(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},u.prototype.readUInt8=function(t,e){return e||I(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||I(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||I(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||I(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||I(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||I(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||I(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||I(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||I(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){e||I(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return e||I(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||I(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||I(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||I(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||I(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||I(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||C(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},u.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||C(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},u.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):O(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);C(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);C(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):O(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,r){return q(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return q(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return L(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return L(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},u.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var s=u.isBuffer(t)?t:U(new u(t,n).toString()),a=s.length;for(o=0;o<r-e;++o)this[o+e]=s[o%a]}return this};var D=/[^+\/0-9A-Za-z-_]/g;function F(t){return t<16?"0"+t.toString(16):t.toString(16)}function U(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function j(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(D,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function H(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}}).call(this,r(41))},function(t,e,r){const n=r(6),i=[2043430169,4086860338,3878753381,3462539467,2630111639,965255983,1930511966,3861023932,3427080569,2559193843,823420391,1646840782,3293681564,2292395833,289824371,579648742,2643098247,991229199,1982458398,3964916796,3634866297,2974765299,1654563303,3309126606,2323285917,351604539,703209078,1406418156,2812836312,1330705329,2661410658,1027854021,2055708042,4111416084,3927864873,3560762451,2826557607,1358147919,2716295838,1137624381,2275248762,255530229,511060458,1022120916,2044241832,4088483664,3882000033,3469032771,2643098247,991229199,1982458398,3964916796,3634866297,2974765299,1654563303,3309126606,2323285917,351604539,703209078,1406418156,2812836312,1330705329,2661410658,1027854021],o=new Array(68);function s(t,e){return t<<e|t>>>32-e}function a(t){return t^s(t,15)^s(t,23)}function u(t,e,r,n,a,u,h,c,f){let l=s(e,12);const p=s(l+u+i[t],7);return l^=p,t<=15?(a=a+(e^r^n)+l+(o[t]^o[t+4]),f=f+function(t,e,r){return t^e^r}(u,h,c)+p+o[t]):(a=a+function(t,e,r){return t&e|t&r|e&r}(e,r,n)+l+(o[t]^o[t+4]),f=f+function(t,e,r){return t&e|~t&r}(u,h,c)+p+o[t]),[r=s(r,9),a,h=s(h,19),f=function(t){return t^s(t,9)^s(t,17)}(f)]}t.exports=class{constructor(){this.digest=new Array(8),this.nblocks=0,this.block=new Array(64),this.num=0}init(){this.digest[0]=1937774191,this.digest[1]=1226093241,this.digest[2]=388252375,this.digest[3]=3666478592,this.digest[4]=2842636476,this.digest[5]=372324522,this.digest[6]=3817729613,this.digest[7]=2969243214;for(let t=0;t<64;t++)this.block[t]=0;this.nblocks=0,this.num=0}SM3Compress(t){let e=0,r=new Array(4),n=this.digest[0],i=this.digest[1],h=this.digest[2],c=this.digest[3],f=this.digest[4],l=this.digest[5],p=this.digest[6],d=this.digest[7];const g=new Array(16);for(let e=0;e+3<64;e+=4)g[e/4]=(t[e]<<24)+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];for(e=0;e<4;e++)o[e]=g[e];for(e=0;e<=8;e+=4)o[e+4]=g[e+4],r=u(e,n,i,h,c,f,l,p,d),i=r[0],c=r[1],l=r[2],d=r[3],o[e+5]=g[e+5],r=u(e+1,c,n,i,h,d,f,l,p),n=r[0],h=r[1],f=r[2],p=r[3],o[e+6]=g[e+6],r=u(e+2,h,c,n,i,p,d,f,l),c=r[0],i=r[1],d=r[2],l=r[3],o[e+7]=g[e+7],r=u(e+3,i,h,c,n,l,p,d,f),h=r[0],n=r[1],p=r[2],f=r[3];for(e=12;e<=60;e+=4)o[e+4]=a(o[e-12]^o[e-5]^s(o[e+1],15))^s(o[e-9],7)^o[e-2],r=u(e,n,i,h,c,f,l,p,d),i=r[0],c=r[1],l=r[2],d=r[3],o[e+5]=a(o[e-11]^o[e-4]^s(o[e+2],15))^s(o[e-8],7)^o[e-1],r=u(e+1,c,n,i,h,d,f,l,p),n=r[0],h=r[1],f=r[2],p=r[3],o[e+6]=a(o[e-10]^o[e-3]^s(o[e+3],15))^s(o[e-7],7)^o[e],r=u(e+2,h,c,n,i,p,d,f,l),c=r[0],i=r[1],d=r[2],l=r[3],o[e+7]=a(o[e-9]^o[e-2]^s(o[e+4],15))^s(o[e-6],7)^o[e+1],r=u(e+3,i,h,c,n,l,p,d,f),h=r[0],n=r[1],p=r[2],f=r[3];this.digest[0]^=n,this.digest[1]^=i,this.digest[2]^=h,this.digest[3]^=c,this.digest[4]^=f,this.digest[5]^=l,this.digest[6]^=p,this.digest[7]^=d;for(let t=0;t<8;t++)this.digest[t]=this.digest[t]>>>0}update(t){let e=t.length;for(let r=0;r<e;r++)t[r]=(t[r]>>>0)%256;if(this.num){const r=64-this.num;if(e<r){for(let r=0;r<e;r++)this.block[this.num+r]=t[r];return void(this.num+=e)}for(let e=0;e<r;e++)this.block[this.num+e]=t[e];this.SM3Compress(this.block),this.nblocks++,t=t.slice(r),e-=r}let r=0;for(;e>=64;){const n=64*r,i=t.slice(n,n+64);this.SM3Compress(i),this.nblocks++,r++,e-=64}this.num=e;const n=64*r;if(e)for(let r=0;r<e;r++)this.block[r]=t[n+r]}final(){if(this.block[this.num]=128,this.num+9<=64)for(let t=0;t<64-this.num-9;t++)this.block[this.num+1+t]=0;else{for(let t=0;t<64-this.num-1;t++)this.block[this.num+1+t]=0;this.SM3Compress(this.block);for(let t=0;t<56;t++)this.block[t]=0}const t=this.nblocks>>>23,e=(this.nblocks<<9)+(this.num<<3);this.block[56]=(t>>>24)%256,this.block[57]=(t>>>16)%256,this.block[58]=(t>>>8)%256,this.block[59]=(t>>>0)%256,this.block[60]=(e>>>24)%256,this.block[61]=(e>>>16)%256,this.block[62]=(e>>>8)%256,this.block[63]=(e>>>0)%256;const r=new Array(32);this.SM3Compress(this.block);for(let t=0;t<8;t++)r[4*t]=(this.digest[t]>>>24)%256,r[4*t+1]=(this.digest[t]>>>16)%256,r[4*t+2]=(this.digest[t]>>>8)%256,r[4*t+3]=(this.digest[t]>>>0)%256;return r}hashForBinaryArray(t){this.init(),this.update(t);const e=this.final();return n.byteArrayToHex(e)}hashForUTF8String(t){const e=n.stringToByteArrayInUtf8(t);return this.hashForBinaryArray(e)}}},function(t,e,r){(function(e){var n,i=r(11),o=i.Buffer,s={};for(n in i)i.hasOwnProperty(n)&&"SlowBuffer"!==n&&"Buffer"!==n&&(s[n]=i[n]);var a=s.Buffer={};for(n in o)o.hasOwnProperty(n)&&"allocUnsafe"!==n&&"allocUnsafeSlow"!==n&&(a[n]=o[n]);if(s.Buffer.prototype=o.prototype,a.from&&a.from!==Uint8Array.from||(a.from=function(t,e,r){if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&void 0===t.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return o(t,e,r)}),a.alloc||(a.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=o(t);return e&&0!==e.length?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n}),!s.kStringMaxLength)try{s.kStringMaxLength=e.binding("buffer").kStringMaxLength}catch(t){}s.constants||(s.constants={MAX_LENGTH:s.kMaxLength},s.kStringMaxLength&&(s.constants.MAX_STRING_LENGTH=s.kStringMaxLength)),t.exports=s}).call(this,r(48))},function(t,e,r){const n=r(15).Reporter,i=r(7).EncoderBuffer,o=r(7).DecoderBuffer,s=r(49),a=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],u=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(a);function h(t,e,r){const n={};this._baseState=n,n.name=r,n.enc=t,n.parent=e||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}t.exports=h;const c=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];h.prototype.clone=function(){const t=this._baseState,e={};c.forEach((function(r){e[r]=t[r]}));const r=new this.constructor(e.parent);return r._baseState=e,r},h.prototype._wrap=function(){const t=this._baseState;u.forEach((function(e){this[e]=function(){const r=new this.constructor(this);return t.children.push(r),r[e].apply(r,arguments)}}),this)},h.prototype._init=function(t){const e=this._baseState;s(null===e.parent),t.call(this),e.children=e.children.filter((function(t){return t._baseState.parent===this}),this),s.equal(e.children.length,1,"Root node can have only one child")},h.prototype._useArgs=function(t){const e=this._baseState,r=t.filter((function(t){return t instanceof this.constructor}),this);t=t.filter((function(t){return!(t instanceof this.constructor)}),this),0!==r.length&&(s(null===e.children),e.children=r,r.forEach((function(t){t._baseState.parent=this}),this)),0!==t.length&&(s(null===e.args),e.args=t,e.reverseArgs=t.map((function(t){if("object"!=typeof t||t.constructor!==Object)return t;const e={};return Object.keys(t).forEach((function(r){r==(0|r)&&(r|=0);const n=t[r];e[n]=r})),e})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(t){h.prototype[t]=function(){const e=this._baseState;throw new Error(t+" not implemented for encoding: "+e.enc)}})),a.forEach((function(t){h.prototype[t]=function(){const e=this._baseState,r=Array.prototype.slice.call(arguments);return s(null===e.tag),e.tag=t,this._useArgs(r),this}})),h.prototype.use=function(t){s(t);const e=this._baseState;return s(null===e.use),e.use=t,this},h.prototype.optional=function(){return this._baseState.optional=!0,this},h.prototype.def=function(t){const e=this._baseState;return s(null===e.default),e.default=t,e.optional=!0,this},h.prototype.explicit=function(t){const e=this._baseState;return s(null===e.explicit&&null===e.implicit),e.explicit=t,this},h.prototype.implicit=function(t){const e=this._baseState;return s(null===e.explicit&&null===e.implicit),e.implicit=t,this},h.prototype.obj=function(){const t=this._baseState,e=Array.prototype.slice.call(arguments);return t.obj=!0,0!==e.length&&this._useArgs(e),this},h.prototype.key=function(t){const e=this._baseState;return s(null===e.key),e.key=t,this},h.prototype.any=function(){return this._baseState.any=!0,this},h.prototype.choice=function(t){const e=this._baseState;return s(null===e.choice),e.choice=t,this._useArgs(Object.keys(t).map((function(e){return t[e]}))),this},h.prototype.contains=function(t){const e=this._baseState;return s(null===e.use),e.contains=t,this},h.prototype._decode=function(t,e){const r=this._baseState;if(null===r.parent)return t.wrapResult(r.children[0]._decode(t,e));let n,i=r.default,s=!0,a=null;if(null!==r.key&&(a=t.enterKey(r.key)),r.optional){let n=null;if(null!==r.explicit?n=r.explicit:null!==r.implicit?n=r.implicit:null!==r.tag&&(n=r.tag),null!==n||r.any){if(s=this._peekTag(t,n,r.any),t.isError(s))return s}else{const n=t.save();try{null===r.choice?this._decodeGeneric(r.tag,t,e):this._decodeChoice(t,e),s=!0}catch(t){s=!1}t.restore(n)}}if(r.obj&&s&&(n=t.enterObject()),s){if(null!==r.explicit){const e=this._decodeTag(t,r.explicit);if(t.isError(e))return e;t=e}const n=t.offset;if(null===r.use&&null===r.choice){let e;r.any&&(e=t.save());const n=this._decodeTag(t,null!==r.implicit?r.implicit:r.tag,r.any);if(t.isError(n))return n;r.any?i=t.raw(e):t=n}if(e&&e.track&&null!==r.tag&&e.track(t.path(),n,t.length,"tagged"),e&&e.track&&null!==r.tag&&e.track(t.path(),t.offset,t.length,"content"),r.any||(i=null===r.choice?this._decodeGeneric(r.tag,t,e):this._decodeChoice(t,e)),t.isError(i))return i;if(r.any||null!==r.choice||null===r.children||r.children.forEach((function(r){r._decode(t,e)})),r.contains&&("octstr"===r.tag||"bitstr"===r.tag)){const n=new o(i);i=this._getUse(r.contains,t._reporterState.obj)._decode(n,e)}}return r.obj&&s&&(i=t.leaveObject(n)),null===r.key||null===i&&!0!==s?null!==a&&t.exitKey(a):t.leaveKey(a,r.key,i),i},h.prototype._decodeGeneric=function(t,e,r){const n=this._baseState;return"seq"===t||"set"===t?null:"seqof"===t||"setof"===t?this._decodeList(e,t,n.args[0],r):/str$/.test(t)?this._decodeStr(e,t,r):"objid"===t&&n.args?this._decodeObjid(e,n.args[0],n.args[1],r):"objid"===t?this._decodeObjid(e,null,null,r):"gentime"===t||"utctime"===t?this._decodeTime(e,t,r):"null_"===t?this._decodeNull(e,r):"bool"===t?this._decodeBool(e,r):"objDesc"===t?this._decodeStr(e,t,r):"int"===t||"enum"===t?this._decodeInt(e,n.args&&n.args[0],r):null!==n.use?this._getUse(n.use,e._reporterState.obj)._decode(e,r):e.error("unknown tag: "+t)},h.prototype._getUse=function(t,e){const r=this._baseState;return r.useDecoder=this._use(t,e),s(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},h.prototype._decodeChoice=function(t,e){const r=this._baseState;let n=null,i=!1;return Object.keys(r.choice).some((function(o){const s=t.save(),a=r.choice[o];try{const r=a._decode(t,e);if(t.isError(r))return!1;n={type:o,value:r},i=!0}catch(e){return t.restore(s),!1}return!0}),this),i?n:t.error("Choice not matched")},h.prototype._createEncoderBuffer=function(t){return new i(t,this.reporter)},h.prototype._encode=function(t,e,r){const n=this._baseState;if(null!==n.default&&n.default===t)return;const i=this._encodeValue(t,e,r);return void 0===i||this._skipDefault(i,e,r)?void 0:i},h.prototype._encodeValue=function(t,e,r){const i=this._baseState;if(null===i.parent)return i.children[0]._encode(t,e||new n);let o=null;if(this.reporter=e,i.optional&&void 0===t){if(null===i.default)return;t=i.default}let s=null,a=!1;if(i.any)o=this._createEncoderBuffer(t);else if(i.choice)o=this._encodeChoice(t,e);else if(i.contains)s=this._getUse(i.contains,r)._encode(t,e),a=!0;else if(i.children)s=i.children.map((function(r){if("null_"===r._baseState.tag)return r._encode(null,e,t);if(null===r._baseState.key)return e.error("Child should have a key");const n=e.enterKey(r._baseState.key);if("object"!=typeof t)return e.error("Child expected, but input is not object");const i=r._encode(t[r._baseState.key],e,t);return e.leaveKey(n),i}),this).filter((function(t){return t})),s=this._createEncoderBuffer(s);else if("seqof"===i.tag||"setof"===i.tag){if(!i.args||1!==i.args.length)return e.error("Too many args for : "+i.tag);if(!Array.isArray(t))return e.error("seqof/setof, but data is not Array");const r=this.clone();r._baseState.implicit=null,s=this._createEncoderBuffer(t.map((function(r){const n=this._baseState;return this._getUse(n.args[0],t)._encode(r,e)}),r))}else null!==i.use?o=this._getUse(i.use,r)._encode(t,e):(s=this._encodePrimitive(i.tag,t),a=!0);if(!i.any&&null===i.choice){const t=null!==i.implicit?i.implicit:i.tag,r=null===i.implicit?"universal":"context";null===t?null===i.use&&e.error("Tag could be omitted only for .use()"):null===i.use&&(o=this._encodeComposite(t,a,r,s))}return null!==i.explicit&&(o=this._encodeComposite(i.explicit,!1,"context",o)),o},h.prototype._encodeChoice=function(t,e){const r=this._baseState,n=r.choice[t.type];return n||s(!1,t.type+" not found in "+JSON.stringify(Object.keys(r.choice))),n._encode(t.value,e)},h.prototype._encodePrimitive=function(t,e){const r=this._baseState;if(/str$/.test(t))return this._encodeStr(e,t);if("objid"===t&&r.args)return this._encodeObjid(e,r.reverseArgs[0],r.args[1]);if("objid"===t)return this._encodeObjid(e,null,null);if("gentime"===t||"utctime"===t)return this._encodeTime(e,t);if("null_"===t)return this._encodeNull();if("int"===t||"enum"===t)return this._encodeInt(e,r.args&&r.reverseArgs[0]);if("bool"===t)return this._encodeBool(e);if("objDesc"===t)return this._encodeStr(e,t);throw new Error("Unsupported tag: "+t)},h.prototype._isNumstr=function(t){return/^[0-9 ]*$/.test(t)},h.prototype._isPrintstr=function(t){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(t)}},function(t,e,r){const n=r(4);function i(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function o(t,e){this.path=t,this.rethrow(e)}e.Reporter=i,i.prototype.isError=function(t){return t instanceof o},i.prototype.save=function(){const t=this._reporterState;return{obj:t.obj,pathLen:t.path.length}},i.prototype.restore=function(t){const e=this._reporterState;e.obj=t.obj,e.path=e.path.slice(0,t.pathLen)},i.prototype.enterKey=function(t){return this._reporterState.path.push(t)},i.prototype.exitKey=function(t){const e=this._reporterState;e.path=e.path.slice(0,t-1)},i.prototype.leaveKey=function(t,e,r){const n=this._reporterState;this.exitKey(t),null!==n.obj&&(n.obj[e]=r)},i.prototype.path=function(){return this._reporterState.path.join("/")},i.prototype.enterObject=function(){const t=this._reporterState,e=t.obj;return t.obj={},e},i.prototype.leaveObject=function(t){const e=this._reporterState,r=e.obj;return e.obj=t,r},i.prototype.error=function(t){let e;const r=this._reporterState,n=t instanceof o;if(e=n?t:new o(r.path.map((function(t){return"["+JSON.stringify(t)+"]"})).join(""),t.message||t,t.stack),!r.options.partial)throw e;return n||r.errors.push(e),e},i.prototype.wrapResult=function(t){const e=this._reporterState;return e.options.partial?{result:this.isError(t)?null:t,errors:e.errors}:t},n(o,Error),o.prototype.rethrow=function(t){if(this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,o),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this}},function(t,e,r){function n(t){const e={};return Object.keys(t).forEach((function(r){(0|r)==r&&(r|=0);const n=t[r];e[n]=r})),e}e.tagClass={0:"universal",1:"application",2:"context",3:"private"},e.tagClassByName=n(e.tagClass),e.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},e.tagByName=n(e.tag)},function(t){t.exports=JSON.parse('{"a":"5.3.6"}')},function(t,e){var r={utf8:{stringToBytes:function(t){return r.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(r.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e},bytesToString:function(t){for(var e=[],r=0;r<t.length;r++)e.push(String.fromCharCode(t[r]));return e.join("")}}};t.exports=r},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){var n=r(3).default,i=r(40);t.exports=function(t){var e=i(t,"string");return"symbol"===n(e)?e:String(e)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,r){(function(e){const{BigInteger:n,SecureRandom:i}=r(9),o=r(10),s=r(23),a=r(44),u=r(12),h=r(45),c=r(6),f=r(26),l=f.bignum,p=r(25),d=new i,g=f.define("ASN1_SM2EncryptFormat",(function(){this.seq().obj(this.key("X").int(),this.key("Y").int(),this.key("Hash").octstr(),this.key("Cipher").octstr())})),m=f.define("ASN1_SM2SignFormat",(function(){this.seq().obj(this.key("R").int(),this.key("S").int())})),y=f.define("ASN1_SM2PublicKeyObjID",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("subAlgorithm").objid())})),v=f.define("ASN1_SM2PublicKey",(function(){this.seq().obj(this.key("algorithm").use(y),this.key("key").bitstr())}));t.exports=class{constructor(){this.curve=new o,this.ecmath=new h,this.sm3=new u}encodePublicKeyToDer(t){const r=v.encode({algorithm:{algorithm:"1.2.840.10045.2.1".split("."),subAlgorithm:"1.2.156.10197.1.301".split(".")},key:{data:e.from(t,"hex")}},"der");return c.byteArrayToHex(r)}decodePublicKeyFromDer(t){const r=v.decode(e.from(t,"hex"),"der");return c.byteArrayToHex(r.key.data)}encrypt(t,e){if(e&&0===e.length)throw new Error("plaintext cannot be an empty string.");const r=new n(this.curve.n.bitLength(),d).mod(this.curve.n.subtract(n.ONE)).add(n.ONE),i=this.ecmath.ECPointMultiplyG(r),o=p.normalize(i.getX().toByteArray()),u=p.normalize(i.getY().toByteArray()),h=new s(t.substr(2,64),t.substr(66,64)),f=this.ecmath.ECPointMultiply(h,r),m=p.normalize(f.getX().toByteArray()),y=p.normalize(f.getY().toByteArray()),v=m.concat(y),w=a.kdf(v,e.length);let b=!0;for(let t=0;t<w.length;t++)if(0!=w[t]){b=!1;break}if(b)return this.encrypt(t,e);const _=new Array(e.length);for(let t=0;t<e.length;t++)_[t]=e[t]^w[t];const S=m.concat(Array.prototype.slice.call(e)).concat(y);this.sm3.init(),this.sm3.update(S);const M=this.sm3.final(),E=g.encode({X:new l(c.byteArrayToHex(o),16),Y:new l(c.byteArrayToHex(u),16),Hash:M,Cipher:_},"der");return c.byteArrayToHex(E)}decrypt(t,r){const i=e.from(c.hexToByteArray(r)),o=g.decode(i,"der"),u=new s(o.X.toString(16),o.Y.toString(16)),h=new n(t,16),f=this.ecmath.ECPointMultiply(u,h),l=p.normalize(f.getX().toByteArray()),d=p.normalize(f.getY().toByteArray()),m=l.concat(d),y=a.kdf(m,o.Cipher.length);let v=!0;for(let t=0;t<y.length;t++)if(0!=y[t]){v=!1;break}if(v)return-1;const w=new Array(o.Cipher.length);for(let t=0;t<o.Cipher.length;t++)w[t]=o.Cipher[t]^y[t];const b=l.concat(w).concat(d);this.sm3.init(),this.sm3.update(b);return e.from(this.sm3.final()).equals(o.Hash)?w:-1}sign(t,e,r,i){t.startsWith("0x")&&(t=t.slice(2)),e.startsWith("0x")&&(e=e.slice(2));const o=new s(t.substr(2,64),t.substr(66,64)),u=a.SM2MessageDigest(r,i,o),h=new n(this.curve.n.bitLength(),d).mod(this.curve.n.subtract(n.ONE)).add(n.ONE),f=this.ecmath.ECPointMultiplyG(h),p=new n(c.byteArrayToHex(u),16).add(f.getX()).mod(this.curve.n);if(p.equals(this.ecmath.zero))return this.sign(t,e,r,i);if(p.add(h).equals(this.curve.n))return this.sign(t,e,r,i);const g=new n(e,16),y=g.add(this.ecmath.one).modInverse(this.curve.n),v=p.multiply(g),w=y.multiply(h.add(v.negate())).mod(this.curve.n);if(w.equals(this.ecmath.zero))return this.sign(t,e,r,i);const b=m.encode({R:new l(p.toString(16),16),S:new l(w.toString(16),16)},"der");return c.byteArrayToHex(b)}verify(t,r,i,o){t.startsWith("0x")&&(t=t.slice(2));const u=e.from(c.hexToByteArray(o)),h=m.decode(u,"der"),f=new n(h.R.toString(16),16),l=new n(h.S.toString(16),16);if(!(f.compareTo(this.ecmath.zero)>0&&f.compareTo(this.curve.n)<0))return!1;if(!(l.compareTo(this.ecmath.zero)>0&&l.compareTo(this.curve.n)<0))return!1;const p=f.add(l).mod(this.curve.n);if(p.equals(this.ecmath.zero))return!1;const d=this.ecmath.ECPointMultiplyG(l),g=new s(t.substr(2,64),t.substr(66,64)),y=this.ecmath.ECPointMultiply(g,p),v=this.ecmath.ECPointAdd(d,y),w=a.SM2MessageDigest(r,i,g);return!!new n(c.byteArrayToHex(w),16).add(v.getX()).mod(this.curve.n).equals(f)}genKeyPair(){const t=new n(this.curve.n.bitLength(),d).mod(this.curve.n.subtract(n.ONE)).add(n.ONE),e=this.ecmath.ECPointMultiplyG(t),r=p.normalize(e.getX().toByteArray()),i=p.normalize(e.getY().toByteArray()),o=c.byteArrayToHex([4,...r,...i]);return{privateKey:p.leftPad(t.toString(16),64),publicKey:o}}getPublicKeyFromPrivateKey(t){const e=this.ecmath.ECPointMultiplyG(new n(t,16)),r=p.normalize(e.getX().toByteArray()),i=p.normalize(e.getY().toByteArray());return c.byteArrayToHex([4,...r,...i])}kdf(t,e){return a.kdf(t,e)}}}).call(this,r(11).Buffer)},function(t,e,r){e.byteLength=function(t){var e=h(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,n=h(t),s=n[0],a=n[1],u=new o(function(t,e,r){return 3*(e+r)/4-r}(0,s,a)),c=0,f=a>0?s-4:s;for(r=0;r<f;r+=4)e=i[t.charCodeAt(r)]<<18|i[t.charCodeAt(r+1)]<<12|i[t.charCodeAt(r+2)]<<6|i[t.charCodeAt(r+3)],u[c++]=e>>16&255,u[c++]=e>>8&255,u[c++]=255&e;2===a&&(e=i[t.charCodeAt(r)]<<2|i[t.charCodeAt(r+1)]>>4,u[c++]=255&e);1===a&&(e=i[t.charCodeAt(r)]<<10|i[t.charCodeAt(r+1)]<<4|i[t.charCodeAt(r+2)]>>2,u[c++]=e>>8&255,u[c++]=255&e);return u},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],s=0,a=r-i;s<a;s+=16383)o.push(c(t,s,s+16383>a?a:s+16383));1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)n[a]=s[a],i[s.charCodeAt(a)]=a;function h(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function c(t,e,r){for(var i,o,s=[],a=e;a<r;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e,r){const{BigInteger:n}=r(9),i=r(10);t.exports=class{constructor(t,e,r){"string"==typeof t&&"string"==typeof e?(this.X=new n(t,16),this.Y=new n(e,16)):(this.X=t,this.Y=e),this.Z=null==r?n.ONE:r,this.zinv=null,this.curve=new i}getX(){return null===this.zinv&&(this.zinv=this.Z.modInverse(this.curve.p)),this.X.multiply(this.zinv).mod(this.curve.p)}getY(){return null===this.zinv&&(this.zinv=this.Z.modInverse(this.curve.p)),this.Y.multiply(this.zinv).mod(this.curve.p)}isInfinity(){return null===this.X&&null===this.Y||this.Z.equals(n.ZERO)&&!this.Y.equals(n.ZERO)}}},function(t,e){function r(){}function n(){}r.prototype.encode=function(t){const e=[],{length:r}=t;let n=0;for(;n<r;){const r=t.codePointAt(n);let i=0,o=0;for(r<=127?(i=0,o=0):r<=2047?(i=6,o=192):r<=65535?(i=12,o=224):r<=2097151&&(i=18,o=240),e.push(o|r>>i),i-=6;i>=0;)e.push(128|r>>i&63),i-=6;n+=r>=65536?2:1}return e},n.prototype.decode=function(t){let e="",r=0;for(;r<t.length;){let n=t[r],i=0,o=0;if(n<=127?(i=0,o=255&n):n<=223?(i=1,o=31&n):n<=239?(i=2,o=15&n):n<=244&&(i=3,o=7&n),t.length-r-i>0){let e=0;for(;e<i;)n=t[r+e+1],o=o<<6|63&n,e+=1}else o=65533,i=t.length-r;e+=String.fromCodePoint(o),r+=i+1}return e},t.exports={TextDecoder:n,TextEncoder:r}},function(t,e){t.exports={normalize:function(t){let e=[...t];if(e.length>32)e=e.slice(e.length-32,e.length);else if(e.length<32)for(let t=0;t<32-e.length;t++)e.unshift(0);return e},leftPad:function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t}}},function(t,e,r){const n=e;n.bignum=r(27),n.define=r(47).define,n.base=r(52),n.constants=r(53),n.decoders=r(30),n.encoders=r(28)},function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var s;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(46).Buffer}catch(t){}function a(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function u(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function h(t,e,r,n){for(var i=0,o=Math.min(t.length,r),s=e;s<o;s++){var a=t.charCodeAt(s)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=u(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=u(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,u=0,c=r;c<a;c+=n)u=h(t,c,c+n,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var f=1;for(u=h(t,c,t.length,e),c=0;c<s;c++)f*=e;this.imuln(f),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,u=s/67108864|0;r.words[0]=a;for(var h=1;h<n;h++){for(var c=u>>>26,f=67108863&u,l=Math.min(h,e.length-1),p=Math.max(0,h-t.length+1);p<=l;p++){var d=h-p|0;c+=(s=(i=0|t.words[d])*(o=0|e.words[p])+f)/67108864|0,f=67108863&s}r.words[h]=0|f,u=0|c}return 0!==u?r.words[h]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);r=0!==(o=a>>>24-i&16777215)||s!==this.length-1?c[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var h=f[t],p=l[t];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var g=d.modn(p).toString(t);r=(d=d.idivn(p)).isZero()?g+r:c[h-g.length]+g+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n(void 0!==s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var s,a,u="le"===e,h=new t(o),c=this.clone();if(u){for(a=0;!c.isZero();a++)s=c.andln(255),c.iushrn(8),h[a]=s;for(;a<o;a++)h[a]=0}else{for(a=0;a<o-i;a++)h[a]=0;for(a=0;!c.isZero();a++)s=c.andln(255),c.iushrn(8),h[o-a-1]=s}return h},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)o=(e=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)o=(e=(0|r.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,r){var n,i,o,s=t.words,a=e.words,u=r.words,h=0,c=0|s[0],f=8191&c,l=c>>>13,p=0|s[1],d=8191&p,g=p>>>13,m=0|s[2],y=8191&m,v=m>>>13,w=0|s[3],b=8191&w,_=w>>>13,S=0|s[4],M=8191&S,E=S>>>13,A=0|s[5],T=8191&A,x=A>>>13,k=0|s[6],P=8191&k,B=k>>>13,I=0|s[7],C=8191&I,R=I>>>13,O=0|s[8],N=8191&O,q=O>>>13,L=0|s[9],D=8191&L,F=L>>>13,U=0|a[0],j=8191&U,H=U>>>13,K=0|a[1],z=8191&K,J=K>>>13,Q=0|a[2],W=8191&Q,Y=Q>>>13,G=0|a[3],V=8191&G,Z=G>>>13,X=0|a[4],$=8191&X,tt=X>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],ut=8191&at,ht=at>>>13,ct=0|a[8],ft=8191&ct,lt=ct>>>13,pt=0|a[9],dt=8191&pt,gt=pt>>>13;r.negative=t.negative^e.negative,r.length=19;var mt=(h+(n=Math.imul(f,j))|0)+((8191&(i=(i=Math.imul(f,H))+Math.imul(l,j)|0))<<13)|0;h=((o=Math.imul(l,H))+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,n=Math.imul(d,j),i=(i=Math.imul(d,H))+Math.imul(g,j)|0,o=Math.imul(g,H);var yt=(h+(n=n+Math.imul(f,z)|0)|0)+((8191&(i=(i=i+Math.imul(f,J)|0)+Math.imul(l,z)|0))<<13)|0;h=((o=o+Math.imul(l,J)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(y,j),i=(i=Math.imul(y,H))+Math.imul(v,j)|0,o=Math.imul(v,H),n=n+Math.imul(d,z)|0,i=(i=i+Math.imul(d,J)|0)+Math.imul(g,z)|0,o=o+Math.imul(g,J)|0;var vt=(h+(n=n+Math.imul(f,W)|0)|0)+((8191&(i=(i=i+Math.imul(f,Y)|0)+Math.imul(l,W)|0))<<13)|0;h=((o=o+Math.imul(l,Y)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(b,j),i=(i=Math.imul(b,H))+Math.imul(_,j)|0,o=Math.imul(_,H),n=n+Math.imul(y,z)|0,i=(i=i+Math.imul(y,J)|0)+Math.imul(v,z)|0,o=o+Math.imul(v,J)|0,n=n+Math.imul(d,W)|0,i=(i=i+Math.imul(d,Y)|0)+Math.imul(g,W)|0,o=o+Math.imul(g,Y)|0;var wt=(h+(n=n+Math.imul(f,V)|0)|0)+((8191&(i=(i=i+Math.imul(f,Z)|0)+Math.imul(l,V)|0))<<13)|0;h=((o=o+Math.imul(l,Z)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(M,j),i=(i=Math.imul(M,H))+Math.imul(E,j)|0,o=Math.imul(E,H),n=n+Math.imul(b,z)|0,i=(i=i+Math.imul(b,J)|0)+Math.imul(_,z)|0,o=o+Math.imul(_,J)|0,n=n+Math.imul(y,W)|0,i=(i=i+Math.imul(y,Y)|0)+Math.imul(v,W)|0,o=o+Math.imul(v,Y)|0,n=n+Math.imul(d,V)|0,i=(i=i+Math.imul(d,Z)|0)+Math.imul(g,V)|0,o=o+Math.imul(g,Z)|0;var bt=(h+(n=n+Math.imul(f,$)|0)|0)+((8191&(i=(i=i+Math.imul(f,tt)|0)+Math.imul(l,$)|0))<<13)|0;h=((o=o+Math.imul(l,tt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(T,j),i=(i=Math.imul(T,H))+Math.imul(x,j)|0,o=Math.imul(x,H),n=n+Math.imul(M,z)|0,i=(i=i+Math.imul(M,J)|0)+Math.imul(E,z)|0,o=o+Math.imul(E,J)|0,n=n+Math.imul(b,W)|0,i=(i=i+Math.imul(b,Y)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,Y)|0,n=n+Math.imul(y,V)|0,i=(i=i+Math.imul(y,Z)|0)+Math.imul(v,V)|0,o=o+Math.imul(v,Z)|0,n=n+Math.imul(d,$)|0,i=(i=i+Math.imul(d,tt)|0)+Math.imul(g,$)|0,o=o+Math.imul(g,tt)|0;var _t=(h+(n=n+Math.imul(f,rt)|0)|0)+((8191&(i=(i=i+Math.imul(f,nt)|0)+Math.imul(l,rt)|0))<<13)|0;h=((o=o+Math.imul(l,nt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(P,j),i=(i=Math.imul(P,H))+Math.imul(B,j)|0,o=Math.imul(B,H),n=n+Math.imul(T,z)|0,i=(i=i+Math.imul(T,J)|0)+Math.imul(x,z)|0,o=o+Math.imul(x,J)|0,n=n+Math.imul(M,W)|0,i=(i=i+Math.imul(M,Y)|0)+Math.imul(E,W)|0,o=o+Math.imul(E,Y)|0,n=n+Math.imul(b,V)|0,i=(i=i+Math.imul(b,Z)|0)+Math.imul(_,V)|0,o=o+Math.imul(_,Z)|0,n=n+Math.imul(y,$)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,tt)|0,n=n+Math.imul(d,rt)|0,i=(i=i+Math.imul(d,nt)|0)+Math.imul(g,rt)|0,o=o+Math.imul(g,nt)|0;var St=(h+(n=n+Math.imul(f,ot)|0)|0)+((8191&(i=(i=i+Math.imul(f,st)|0)+Math.imul(l,ot)|0))<<13)|0;h=((o=o+Math.imul(l,st)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(C,j),i=(i=Math.imul(C,H))+Math.imul(R,j)|0,o=Math.imul(R,H),n=n+Math.imul(P,z)|0,i=(i=i+Math.imul(P,J)|0)+Math.imul(B,z)|0,o=o+Math.imul(B,J)|0,n=n+Math.imul(T,W)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,Y)|0,n=n+Math.imul(M,V)|0,i=(i=i+Math.imul(M,Z)|0)+Math.imul(E,V)|0,o=o+Math.imul(E,Z)|0,n=n+Math.imul(b,$)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(y,rt)|0,i=(i=i+Math.imul(y,nt)|0)+Math.imul(v,rt)|0,o=o+Math.imul(v,nt)|0,n=n+Math.imul(d,ot)|0,i=(i=i+Math.imul(d,st)|0)+Math.imul(g,ot)|0,o=o+Math.imul(g,st)|0;var Mt=(h+(n=n+Math.imul(f,ut)|0)|0)+((8191&(i=(i=i+Math.imul(f,ht)|0)+Math.imul(l,ut)|0))<<13)|0;h=((o=o+Math.imul(l,ht)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(N,j),i=(i=Math.imul(N,H))+Math.imul(q,j)|0,o=Math.imul(q,H),n=n+Math.imul(C,z)|0,i=(i=i+Math.imul(C,J)|0)+Math.imul(R,z)|0,o=o+Math.imul(R,J)|0,n=n+Math.imul(P,W)|0,i=(i=i+Math.imul(P,Y)|0)+Math.imul(B,W)|0,o=o+Math.imul(B,Y)|0,n=n+Math.imul(T,V)|0,i=(i=i+Math.imul(T,Z)|0)+Math.imul(x,V)|0,o=o+Math.imul(x,Z)|0,n=n+Math.imul(M,$)|0,i=(i=i+Math.imul(M,tt)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,tt)|0,n=n+Math.imul(b,rt)|0,i=(i=i+Math.imul(b,nt)|0)+Math.imul(_,rt)|0,o=o+Math.imul(_,nt)|0,n=n+Math.imul(y,ot)|0,i=(i=i+Math.imul(y,st)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,st)|0,n=n+Math.imul(d,ut)|0,i=(i=i+Math.imul(d,ht)|0)+Math.imul(g,ut)|0,o=o+Math.imul(g,ht)|0;var Et=(h+(n=n+Math.imul(f,ft)|0)|0)+((8191&(i=(i=i+Math.imul(f,lt)|0)+Math.imul(l,ft)|0))<<13)|0;h=((o=o+Math.imul(l,lt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(D,j),i=(i=Math.imul(D,H))+Math.imul(F,j)|0,o=Math.imul(F,H),n=n+Math.imul(N,z)|0,i=(i=i+Math.imul(N,J)|0)+Math.imul(q,z)|0,o=o+Math.imul(q,J)|0,n=n+Math.imul(C,W)|0,i=(i=i+Math.imul(C,Y)|0)+Math.imul(R,W)|0,o=o+Math.imul(R,Y)|0,n=n+Math.imul(P,V)|0,i=(i=i+Math.imul(P,Z)|0)+Math.imul(B,V)|0,o=o+Math.imul(B,Z)|0,n=n+Math.imul(T,$)|0,i=(i=i+Math.imul(T,tt)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,tt)|0,n=n+Math.imul(M,rt)|0,i=(i=i+Math.imul(M,nt)|0)+Math.imul(E,rt)|0,o=o+Math.imul(E,nt)|0,n=n+Math.imul(b,ot)|0,i=(i=i+Math.imul(b,st)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,n=n+Math.imul(y,ut)|0,i=(i=i+Math.imul(y,ht)|0)+Math.imul(v,ut)|0,o=o+Math.imul(v,ht)|0,n=n+Math.imul(d,ft)|0,i=(i=i+Math.imul(d,lt)|0)+Math.imul(g,ft)|0,o=o+Math.imul(g,lt)|0;var At=(h+(n=n+Math.imul(f,dt)|0)|0)+((8191&(i=(i=i+Math.imul(f,gt)|0)+Math.imul(l,dt)|0))<<13)|0;h=((o=o+Math.imul(l,gt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(D,z),i=(i=Math.imul(D,J))+Math.imul(F,z)|0,o=Math.imul(F,J),n=n+Math.imul(N,W)|0,i=(i=i+Math.imul(N,Y)|0)+Math.imul(q,W)|0,o=o+Math.imul(q,Y)|0,n=n+Math.imul(C,V)|0,i=(i=i+Math.imul(C,Z)|0)+Math.imul(R,V)|0,o=o+Math.imul(R,Z)|0,n=n+Math.imul(P,$)|0,i=(i=i+Math.imul(P,tt)|0)+Math.imul(B,$)|0,o=o+Math.imul(B,tt)|0,n=n+Math.imul(T,rt)|0,i=(i=i+Math.imul(T,nt)|0)+Math.imul(x,rt)|0,o=o+Math.imul(x,nt)|0,n=n+Math.imul(M,ot)|0,i=(i=i+Math.imul(M,st)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,st)|0,n=n+Math.imul(b,ut)|0,i=(i=i+Math.imul(b,ht)|0)+Math.imul(_,ut)|0,o=o+Math.imul(_,ht)|0,n=n+Math.imul(y,ft)|0,i=(i=i+Math.imul(y,lt)|0)+Math.imul(v,ft)|0,o=o+Math.imul(v,lt)|0;var Tt=(h+(n=n+Math.imul(d,dt)|0)|0)+((8191&(i=(i=i+Math.imul(d,gt)|0)+Math.imul(g,dt)|0))<<13)|0;h=((o=o+Math.imul(g,gt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(D,W),i=(i=Math.imul(D,Y))+Math.imul(F,W)|0,o=Math.imul(F,Y),n=n+Math.imul(N,V)|0,i=(i=i+Math.imul(N,Z)|0)+Math.imul(q,V)|0,o=o+Math.imul(q,Z)|0,n=n+Math.imul(C,$)|0,i=(i=i+Math.imul(C,tt)|0)+Math.imul(R,$)|0,o=o+Math.imul(R,tt)|0,n=n+Math.imul(P,rt)|0,i=(i=i+Math.imul(P,nt)|0)+Math.imul(B,rt)|0,o=o+Math.imul(B,nt)|0,n=n+Math.imul(T,ot)|0,i=(i=i+Math.imul(T,st)|0)+Math.imul(x,ot)|0,o=o+Math.imul(x,st)|0,n=n+Math.imul(M,ut)|0,i=(i=i+Math.imul(M,ht)|0)+Math.imul(E,ut)|0,o=o+Math.imul(E,ht)|0,n=n+Math.imul(b,ft)|0,i=(i=i+Math.imul(b,lt)|0)+Math.imul(_,ft)|0,o=o+Math.imul(_,lt)|0;var xt=(h+(n=n+Math.imul(y,dt)|0)|0)+((8191&(i=(i=i+Math.imul(y,gt)|0)+Math.imul(v,dt)|0))<<13)|0;h=((o=o+Math.imul(v,gt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(D,V),i=(i=Math.imul(D,Z))+Math.imul(F,V)|0,o=Math.imul(F,Z),n=n+Math.imul(N,$)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(q,$)|0,o=o+Math.imul(q,tt)|0,n=n+Math.imul(C,rt)|0,i=(i=i+Math.imul(C,nt)|0)+Math.imul(R,rt)|0,o=o+Math.imul(R,nt)|0,n=n+Math.imul(P,ot)|0,i=(i=i+Math.imul(P,st)|0)+Math.imul(B,ot)|0,o=o+Math.imul(B,st)|0,n=n+Math.imul(T,ut)|0,i=(i=i+Math.imul(T,ht)|0)+Math.imul(x,ut)|0,o=o+Math.imul(x,ht)|0,n=n+Math.imul(M,ft)|0,i=(i=i+Math.imul(M,lt)|0)+Math.imul(E,ft)|0,o=o+Math.imul(E,lt)|0;var kt=(h+(n=n+Math.imul(b,dt)|0)|0)+((8191&(i=(i=i+Math.imul(b,gt)|0)+Math.imul(_,dt)|0))<<13)|0;h=((o=o+Math.imul(_,gt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(D,$),i=(i=Math.imul(D,tt))+Math.imul(F,$)|0,o=Math.imul(F,tt),n=n+Math.imul(N,rt)|0,i=(i=i+Math.imul(N,nt)|0)+Math.imul(q,rt)|0,o=o+Math.imul(q,nt)|0,n=n+Math.imul(C,ot)|0,i=(i=i+Math.imul(C,st)|0)+Math.imul(R,ot)|0,o=o+Math.imul(R,st)|0,n=n+Math.imul(P,ut)|0,i=(i=i+Math.imul(P,ht)|0)+Math.imul(B,ut)|0,o=o+Math.imul(B,ht)|0,n=n+Math.imul(T,ft)|0,i=(i=i+Math.imul(T,lt)|0)+Math.imul(x,ft)|0,o=o+Math.imul(x,lt)|0;var Pt=(h+(n=n+Math.imul(M,dt)|0)|0)+((8191&(i=(i=i+Math.imul(M,gt)|0)+Math.imul(E,dt)|0))<<13)|0;h=((o=o+Math.imul(E,gt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(D,rt),i=(i=Math.imul(D,nt))+Math.imul(F,rt)|0,o=Math.imul(F,nt),n=n+Math.imul(N,ot)|0,i=(i=i+Math.imul(N,st)|0)+Math.imul(q,ot)|0,o=o+Math.imul(q,st)|0,n=n+Math.imul(C,ut)|0,i=(i=i+Math.imul(C,ht)|0)+Math.imul(R,ut)|0,o=o+Math.imul(R,ht)|0,n=n+Math.imul(P,ft)|0,i=(i=i+Math.imul(P,lt)|0)+Math.imul(B,ft)|0,o=o+Math.imul(B,lt)|0;var Bt=(h+(n=n+Math.imul(T,dt)|0)|0)+((8191&(i=(i=i+Math.imul(T,gt)|0)+Math.imul(x,dt)|0))<<13)|0;h=((o=o+Math.imul(x,gt)|0)+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(D,ot),i=(i=Math.imul(D,st))+Math.imul(F,ot)|0,o=Math.imul(F,st),n=n+Math.imul(N,ut)|0,i=(i=i+Math.imul(N,ht)|0)+Math.imul(q,ut)|0,o=o+Math.imul(q,ht)|0,n=n+Math.imul(C,ft)|0,i=(i=i+Math.imul(C,lt)|0)+Math.imul(R,ft)|0,o=o+Math.imul(R,lt)|0;var It=(h+(n=n+Math.imul(P,dt)|0)|0)+((8191&(i=(i=i+Math.imul(P,gt)|0)+Math.imul(B,dt)|0))<<13)|0;h=((o=o+Math.imul(B,gt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(D,ut),i=(i=Math.imul(D,ht))+Math.imul(F,ut)|0,o=Math.imul(F,ht),n=n+Math.imul(N,ft)|0,i=(i=i+Math.imul(N,lt)|0)+Math.imul(q,ft)|0,o=o+Math.imul(q,lt)|0;var Ct=(h+(n=n+Math.imul(C,dt)|0)|0)+((8191&(i=(i=i+Math.imul(C,gt)|0)+Math.imul(R,dt)|0))<<13)|0;h=((o=o+Math.imul(R,gt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(D,ft),i=(i=Math.imul(D,lt))+Math.imul(F,ft)|0,o=Math.imul(F,lt);var Rt=(h+(n=n+Math.imul(N,dt)|0)|0)+((8191&(i=(i=i+Math.imul(N,gt)|0)+Math.imul(q,dt)|0))<<13)|0;h=((o=o+Math.imul(q,gt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863;var Ot=(h+(n=Math.imul(D,dt))|0)+((8191&(i=(i=Math.imul(D,gt))+Math.imul(F,dt)|0))<<13)|0;return h=((o=Math.imul(F,gt))+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,u[0]=mt,u[1]=yt,u[2]=vt,u[3]=wt,u[4]=bt,u[5]=_t,u[6]=St,u[7]=Mt,u[8]=Et,u[9]=At,u[10]=Tt,u[11]=xt,u[12]=kt,u[13]=Pt,u[14]=Bt,u[15]=It,u[16]=Ct,u[17]=Rt,u[18]=Ot,0!==h&&(u[19]=h,r.length++),r};function g(t,e,r){return(new m).mulp(t,e,r)}function m(t,e){this.x=t,this.y=e}Math.imul||(d=p),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?d(this,t,e):r<63?p(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,u=Math.min(o,e.length-1),h=Math.max(0,o-t.length+1);h<=u;h++){var c=o-h,f=(0|t.words[c])*(0|e.words[h]),l=67108863&f;a=67108863&(l=l+a|0),i+=(s=(s=s+(f/67108864|0)|0)+(l>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):g(this,t,e)},m.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},m.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},m.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},m.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),h=Math.sin(2*Math.PI/a),c=0;c<i;c+=a)for(var f=u,l=h,p=0;p<s;p++){var d=r[c+p],g=n[c+p],m=r[c+p+s],y=n[c+p+s],v=f*m-l*y;y=f*y+l*m,m=v,r[c+p]=d+m,n[c+p]=g+y,r[c+p+s]=d-m,n[c+p+s]=g-y,p!==a&&(v=u*f-h*l,l=u*l+h*f,f=v)}},m.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},m.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},m.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},m.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n(0==(-8192&o))},m.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},m.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),u=new Array(n),h=new Array(n),c=new Array(n),f=new Array(n),l=r.words;l.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,h,n),this.transform(s,o,a,u,n,i),this.transform(h,o,c,f,n,i);for(var p=0;p<n;p++){var d=a[p]*c[p]-u[p]*f[p];u[p]=a[p]*f[p]+u[p]*c[p],a[p]=d}return this.conjugate(a,u,n),this.transform(a,u,l,o,n,i),this.conjugate(l,o,n),this.normalize13b(l,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),g(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"==typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<r;this.words[e]=u|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,u=r;if(i-=s,i=Math.max(0,i),u){for(var h=0;h<s;h++)u.words[h]=this.words[h];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,h=0;h<this.length;h++)this.words[h]=this.words[h+s];else this.words[0]=0,this.length=1;var c=0;for(h=this.length-1;h>=0&&(0!==c||h>=i);h--){var f=0|this.words[h];this.words[h]=c<<26-o|f>>>o,c=f&a}return u&&0!==c&&(u.words[u.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var u=(0|t.words[i])*e;a=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this.strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,s=0|i.words[i.length-1];0!==(r=26-this._countBits(s))&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var a,u=n.length-i.length;if("mod"!==e){(a=new o(null)).length=u+1,a.words=new Array(a.length);for(var h=0;h<a.length;h++)a.words[h]=0}var c=n.clone()._ishlnsubmul(i,1,u);0===c.negative&&(n=c,a&&(a.words[u]=1));for(var f=u-1;f>=0;f--){var l=67108864*(0|n.words[i.length+f])+(0|n.words[i.length+f-1]);for(l=Math.min(l/s|0,67108863),n._ishlnsubmul(i,l,f);0!==n.negative;)l--,n.negative=0,n._ishlnsubmul(i,1,f),n.isZero()||(n.negative^=1);a&&(a.words[f]=l)}return a&&a.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),s=new o(0),a=new o(0),u=new o(1),h=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++h;for(var c=r.clone(),f=e.clone();!e.isZero();){for(var l=0,p=1;0==(e.words[0]&p)&&l<26;++l,p<<=1);if(l>0)for(e.iushrn(l);l-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(c),s.isub(f)),i.iushrn(1),s.iushrn(1);for(var d=0,g=1;0==(r.words[0]&g)&&d<26;++d,g<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(c),u.isub(f)),a.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(u)):(r.isub(e),a.isub(i),u.isub(s))}return{a:a,b:u,gcd:r.iushln(h)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,s=new o(1),a=new o(0),u=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var h=0,c=1;0==(e.words[0]&c)&&h<26;++h,c<<=1);if(h>0)for(e.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var f=0,l=1;0==(r.words[0]&l)&&f<26;++f,l<<=1);if(f>0)for(r.iushrn(f);f-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);e.cmp(r)>=0?(e.isub(r),s.isub(a)):(r.isub(e),a.isub(s))}return(i=0===e.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new M(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var y={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function w(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function E(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},i(w,v),w.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},w.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,v),i(_,v),i(S,v),S.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(y[t])return y[t];var e;if("k256"===t)e=new w;else if("p224"===t)e=new b;else if("p192"===t)e=new _;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new S}return y[t]=e,e},M.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},M.prototype._verify2=function(t,e){n(0==(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},M.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),u=a.redNeg(),h=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);0!==this.pow(c,h).cmp(u);)c.redIAdd(u);for(var f=this.pow(c,i),l=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),d=s;0!==p.cmp(a);){for(var g=p,m=0;0!==g.cmp(a);m++)g=g.redSqr();n(m<d);var y=this.pow(f,new o(1).iushln(d-m-1));l=l.redMul(y),f=y.redSqr(),p=p.redMul(f),d=m}return l},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],s=0,a=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var h=e.words[n],c=u-1;c>=0;c--){var f=h>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==f||0!==s?(s<<=1,s|=f,(4===++a||0===n&&0===c)&&(i=this.mul(i,r[s]),a=0,s=0)):a=0}u=26}return i},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new E(t)},i(E,M),E.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},E.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},E.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},E.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},E.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(19)(t))},function(t,e,r){const n=e;n.der=r(29),n.pem=r(50)},function(t,e,r){const n=r(4),i=r(13).Buffer,o=r(14),s=r(16);function a(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new u,this.tree._init(t.body)}function u(t){o.call(this,"der",t)}function h(t){return t<10?"0"+t:t}t.exports=a,a.prototype.encode=function(t,e){return this.tree._encode(t,e).join()},n(u,o),u.prototype._encodeComposite=function(t,e,r,n){const o=function(t,e,r,n){let i;"seqof"===t?t="seq":"setof"===t&&(t="set");if(s.tagByName.hasOwnProperty(t))i=s.tagByName[t];else{if("number"!=typeof t||(0|t)!==t)return n.error("Unknown tag: "+t);i=t}if(i>=31)return n.error("Multi-octet tag encoding unsupported");e||(i|=32);return i|=s.tagClassByName[r||"universal"]<<6,i}(t,e,r,this.reporter);if(n.length<128){const t=i.alloc(2);return t[0]=o,t[1]=n.length,this._createEncoderBuffer([t,n])}let a=1;for(let t=n.length;t>=256;t>>=8)a++;const u=i.alloc(2+a);u[0]=o,u[1]=128|a;for(let t=1+a,e=n.length;e>0;t--,e>>=8)u[t]=255&e;return this._createEncoderBuffer([u,n])},u.prototype._encodeStr=function(t,e){if("bitstr"===e)return this._createEncoderBuffer([0|t.unused,t.data]);if("bmpstr"===e){const e=i.alloc(2*t.length);for(let r=0;r<t.length;r++)e.writeUInt16BE(t.charCodeAt(r),2*r);return this._createEncoderBuffer(e)}return"numstr"===e?this._isNumstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===e?this._isPrintstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(e)||"objDesc"===e?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: "+e+" unsupported")},u.prototype._encodeObjid=function(t,e,r){if("string"==typeof t){if(!e)return this.reporter.error("string objid given, but no values map found");if(!e.hasOwnProperty(t))return this.reporter.error("objid not found in values map");t=e[t].split(/[\s.]+/g);for(let e=0;e<t.length;e++)t[e]|=0}else if(Array.isArray(t)){t=t.slice();for(let e=0;e<t.length;e++)t[e]|=0}if(!Array.isArray(t))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(t));if(!r){if(t[1]>=40)return this.reporter.error("Second objid identifier OOB");t.splice(0,2,40*t[0]+t[1])}let n=0;for(let e=0;e<t.length;e++){let r=t[e];for(n++;r>=128;r>>=7)n++}const o=i.alloc(n);let s=o.length-1;for(let e=t.length-1;e>=0;e--){let r=t[e];for(o[s--]=127&r;(r>>=7)>0;)o[s--]=128|127&r}return this._createEncoderBuffer(o)},u.prototype._encodeTime=function(t,e){let r;const n=new Date(t);return"gentime"===e?r=[h(n.getUTCFullYear()),h(n.getUTCMonth()+1),h(n.getUTCDate()),h(n.getUTCHours()),h(n.getUTCMinutes()),h(n.getUTCSeconds()),"Z"].join(""):"utctime"===e?r=[h(n.getUTCFullYear()%100),h(n.getUTCMonth()+1),h(n.getUTCDate()),h(n.getUTCHours()),h(n.getUTCMinutes()),h(n.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+e+" time is not supported yet"),this._encodeStr(r,"octstr")},u.prototype._encodeNull=function(){return this._createEncoderBuffer("")},u.prototype._encodeInt=function(t,e){if("string"==typeof t){if(!e)return this.reporter.error("String int or enum given, but no values map");if(!e.hasOwnProperty(t))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(t));t=e[t]}if("number"!=typeof t&&!i.isBuffer(t)){const e=t.toArray();!t.sign&&128&e[0]&&e.unshift(0),t=i.from(e)}if(i.isBuffer(t)){let e=t.length;0===t.length&&e++;const r=i.alloc(e);return t.copy(r),0===t.length&&(r[0]=0),this._createEncoderBuffer(r)}if(t<128)return this._createEncoderBuffer(t);if(t<256)return this._createEncoderBuffer([0,t]);let r=1;for(let e=t;e>=256;e>>=8)r++;const n=new Array(r);for(let e=n.length-1;e>=0;e--)n[e]=255&t,t>>=8;return 128&n[0]&&n.unshift(0),this._createEncoderBuffer(i.from(n))},u.prototype._encodeBool=function(t){return this._createEncoderBuffer(t?255:0)},u.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getEncoder("der").tree},u.prototype._skipDefault=function(t,e,r){const n=this._baseState;let i;if(null===n.default)return!1;const o=t.join();if(void 0===n.defaultBuffer&&(n.defaultBuffer=this._encodeValue(n.default,e,r).join()),o.length!==n.defaultBuffer.length)return!1;for(i=0;i<o.length;i++)if(o[i]!==n.defaultBuffer[i])return!1;return!0}},function(t,e,r){const n=e;n.der=r(31),n.pem=r(51)},function(t,e,r){const n=r(4),i=r(27),o=r(7).DecoderBuffer,s=r(14),a=r(16);function u(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new h,this.tree._init(t.body)}function h(t){s.call(this,"der",t)}function c(t,e){let r=t.readUInt8(e);if(t.isError(r))return r;const n=a.tagClass[r>>6],i=0==(32&r);if(31==(31&r)){let n=r;for(r=0;128==(128&n);){if(n=t.readUInt8(e),t.isError(n))return n;r<<=7,r|=127&n}}else r&=31;return{cls:n,primitive:i,tag:r,tagStr:a.tag[r]}}function f(t,e,r){let n=t.readUInt8(r);if(t.isError(n))return n;if(!e&&128===n)return null;if(0==(128&n))return n;const i=127&n;if(i>4)return t.error("length octect is too long");n=0;for(let e=0;e<i;e++){n<<=8;const e=t.readUInt8(r);if(t.isError(e))return e;n|=e}return n}t.exports=u,u.prototype.decode=function(t,e){return o.isDecoderBuffer(t)||(t=new o(t,e)),this.tree._decode(t,e)},n(h,s),h.prototype._peekTag=function(t,e,r){if(t.isEmpty())return!1;const n=t.save(),i=c(t,'Failed to peek tag: "'+e+'"');return t.isError(i)?i:(t.restore(n),i.tag===e||i.tagStr===e||i.tagStr+"of"===e||r)},h.prototype._decodeTag=function(t,e,r){const n=c(t,'Failed to decode tag of "'+e+'"');if(t.isError(n))return n;let i=f(t,n.primitive,'Failed to get length of "'+e+'"');if(t.isError(i))return i;if(!r&&n.tag!==e&&n.tagStr!==e&&n.tagStr+"of"!==e)return t.error('Failed to match tag: "'+e+'"');if(n.primitive||null!==i)return t.skip(i,'Failed to match body of: "'+e+'"');const o=t.save(),s=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"');return t.isError(s)?s:(i=t.offset-o.offset,t.restore(o),t.skip(i,'Failed to match body of: "'+e+'"'))},h.prototype._skipUntilEnd=function(t,e){for(;;){const r=c(t,e);if(t.isError(r))return r;const n=f(t,r.primitive,e);if(t.isError(n))return n;let i;if(i=r.primitive||null!==n?t.skip(n):this._skipUntilEnd(t,e),t.isError(i))return i;if("end"===r.tagStr)break}},h.prototype._decodeList=function(t,e,r,n){const i=[];for(;!t.isEmpty();){const e=this._peekTag(t,"end");if(t.isError(e))return e;const o=r.decode(t,"der",n);if(t.isError(o)&&e)break;i.push(o)}return i},h.prototype._decodeStr=function(t,e){if("bitstr"===e){const e=t.readUInt8();return t.isError(e)?e:{unused:e,data:t.raw()}}if("bmpstr"===e){const e=t.raw();if(e.length%2==1)return t.error("Decoding of string type: bmpstr length mismatch");let r="";for(let t=0;t<e.length/2;t++)r+=String.fromCharCode(e.readUInt16BE(2*t));return r}if("numstr"===e){const e=t.raw().toString("ascii");return this._isNumstr(e)?e:t.error("Decoding of string type: numstr unsupported characters")}if("octstr"===e)return t.raw();if("objDesc"===e)return t.raw();if("printstr"===e){const e=t.raw().toString("ascii");return this._isPrintstr(e)?e:t.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(e)?t.raw().toString():t.error("Decoding of string type: "+e+" unsupported")},h.prototype._decodeObjid=function(t,e,r){let n;const i=[];let o=0,s=0;for(;!t.isEmpty();)s=t.readUInt8(),o<<=7,o|=127&s,0==(128&s)&&(i.push(o),o=0);128&s&&i.push(o);const a=i[0]/40|0,u=i[0]%40;if(n=r?i:[a,u].concat(i.slice(1)),e){let t=e[n.join(" ")];void 0===t&&(t=e[n.join(".")]),void 0!==t&&(n=t)}return n},h.prototype._decodeTime=function(t,e){const r=t.raw().toString();let n,i,o,s,a,u;if("gentime"===e)n=0|r.slice(0,4),i=0|r.slice(4,6),o=0|r.slice(6,8),s=0|r.slice(8,10),a=0|r.slice(10,12),u=0|r.slice(12,14);else{if("utctime"!==e)return t.error("Decoding "+e+" time is not supported yet");n=0|r.slice(0,2),i=0|r.slice(2,4),o=0|r.slice(4,6),s=0|r.slice(6,8),a=0|r.slice(8,10),u=0|r.slice(10,12),n=n<70?2e3+n:1900+n}return Date.UTC(n,i-1,o,s,a,u,0)},h.prototype._decodeNull=function(){return null},h.prototype._decodeBool=function(t){const e=t.readUInt8();return t.isError(e)?e:0!==e},h.prototype._decodeInt=function(t,e){const r=t.raw();let n=new i(r);return e&&(n=e[n.toString(10)]||n),n},h.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getDecoder("der").tree}},function(t,e){t.exports={bitSlice(t,e,r){return t=this._shiftRight(t.slice(e/32),32-(31&e)).slice(1),void 0===r?t:this.clamp(t,r-e)},extract(t,e,r){let n;const i=Math.floor(-e-r&31);return n=-32&(e+r-1^e)?t[e/32|0]<<32-i^t[e/32+1|0]>>>i:t[e/32|0]>>>i,n&(1<<r)-1},concat(t,e){if(0===t.length||0===e.length)return t.concat(e);const r=t[t.length-1],n=this.getPartial(r);return 32===n?t.concat(e):this._shiftRight(e,n,0|r,t.slice(0,t.length-1))},bitLength(t){const e=t.length;let r;return 0===e?0:(r=t[e-1],32*(e-1)+this.getPartial(r))},clamp(t,e){if(32*t.length<e)return t;const r=(t=t.slice(0,Math.ceil(e/32))).length;return e&=31,r>0&&e&&(t[r-1]=this.partial(e,t[r-1]&2147483648>>e-1,1)),t},partial:(t,e,r)=>32===t?e:(r?0|e:e<<32-t)+1099511627776*t,getPartial:t=>Math.round(t/1099511627776)||32,equal(t,e){if(this.bitLength(t)!==this.bitLength(e))return!1;let r,n=0;for(r=0;r<t.length;r++)n|=t[r]^e[r];return 0===n},_shiftRight(t,e,r,n){let i,o,s=0;for(void 0===n&&(n=[]);e>=32;e-=32)n.push(r),r=0;if(0===e)return n.concat(t);for(i=0;i<t.length;i++)n.push(r|t[i]>>>e),r=t[i]<<32-e;return s=t.length?t[t.length-1]:0,o=this.getPartial(s),n.push(this.partial(e+o&31,e+o>32?r:n.pop(),1)),n},_xor4:(t,e)=>[t[0]^e[0],t[1]^e[1],t[2]^e[2],t[3]^e[3]],byteswapM(t){let e,r;for(e=0;e<t.length;++e)r=t[e],t[e]=r>>>24|r>>>8&65280|(65280&r)<<8|r<<24;return t},bytesFromBits(t){let e,r,n=[],i=this.bitLength(t);for(e=0;e<i/8;e++)0==(3&e)&&(r=t[e/4]),n.push(r>>>24),r<<=8;return n},bytesToBits(t){let e,r=[],n=0;for(e=0;e<t.length;e++)n=n<<8|t[e],3==(3&e)&&(r.push(n),n=0);return 3&e&&r.push(this.partial(8*(3&e),n)),r}}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,r){var n=r(20);function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,n(i.key),i)}}t.exports=function(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,r){!function(){"use strict";var e=r(59),n=r(60),i={deflate:8},o=1,s=2,a=4,u=8,h=16,c={fat:0,amiga:1,vmz:2,unix:3,"vm/cms":4,atari:5,hpfs:6,macintosh:7,"z-system":8,cplm:9,"tops-20":10,ntfs:11,qdos:12,acorn:13,vfat:14,vms:15,beos:16,tandem:17,theos:18};function f(t,e){e.push(255&t)}function l(t,e){e.push(255&t),e.push(t>>>8)}function p(t,e){l(65535&t,e),l(t>>>16,e)}function d(t){return t.shift()}function g(t){return t.shift()|t.shift()<<8}function m(t){var e=g(t),r=g(t);return r>32768?((r-=32768)<<16|e)+32768*Math.pow(2,16):r<<16|e}function y(t){for(var e=[];0!==t[0];)e.push(String.fromCharCode(t.shift()));return t.shift(),e.join("")}t.exports={zip:function(t,r){var o,s=0,a=[];return r||(r={}),o=r.level||6,"string"==typeof t&&(t=Array.prototype.map.call(t,(function(t){return t.charCodeAt(0)}))),f(31,a),f(139,a),f(i.deflate,a),r.name&&(s|=u),f(s,a),p(r.timestamp||parseInt(Date.now()/1e3,10),a),f(1===o?4:9===o?2:0,a),f(c.unix,a),r.name&&(!function(t,e){var r,n=t.length;for(r=0;r<n;r+=1)f(t.charCodeAt(r),e)}(r.name.substring(r.name.lastIndexOf("/")+1),a),f(0,a)),n.deflate(t,o).forEach((function(t){f(t,a)})),p(parseInt(e(t),16),a),p(t.length,a),a},unzip:function(t,r){var f,l,p,v,w=Array.prototype.slice.call(t,0);if(31!==d(w)||139!==d(w))throw"Not a GZIP file";if(f=d(w),!(f=Object.keys(i).some((function(t){return l=t,i[t]===f}))))throw"Unsupported compression method";if(p=d(w),m(w),d(w),f=d(w),Object.keys(c).some((function(t){if(c[t]===f)return t,!0})),p&a&&function(t,e){var r,n=[];for(r=0;r<e;r+=1)n.push(t.shift())}(w,f=g(w)),p&u&&y(w),p&h&&y(w),p&s&&g(w),"deflate"===l&&(v=n.inflate(w.splice(0,w.length-8))),p&o&&(v=Array.prototype.map.call(v,(function(t){return String.fromCharCode(t)})).join("")),m(w)!==parseInt(e(v),16))throw"Checksum does not match";if(m(w)!==v.length)throw"Size of decompressed file not correct";return v},get DEFAULT_LEVEL(){return 6}}}()},function(t,e,r){var n=r(20);t.exports=function(t,e,r){return(e=n(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,r){var n=r(3).default;function i(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t.exports=i=function(){return r},t.exports.__esModule=!0,t.exports.default=t.exports;var e,r={},o=Object.prototype,s=o.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},u="function"==typeof Symbol?Symbol:{},h=u.iterator||"@@iterator",c=u.asyncIterator||"@@asyncIterator",f=u.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(e){l=function(t,e,r){return t[e]=r}}function p(t,e,r,n){var i=e&&e.prototype instanceof w?e:w,o=Object.create(i.prototype),s=new C(n||[]);return a(o,"_invoke",{value:k(t,r,s)}),o}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}r.wrap=p;var g="suspendedStart",m="executing",y="completed",v={};function w(){}function b(){}function _(){}var S={};l(S,h,(function(){return this}));var M=Object.getPrototypeOf,E=M&&M(M(R([])));E&&E!==o&&s.call(E,h)&&(S=E);var A=_.prototype=w.prototype=Object.create(S);function T(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(i,o,a,u){var h=d(t[i],t,o);if("throw"!==h.type){var c=h.arg,f=c.value;return f&&"object"==n(f)&&s.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(h.arg)}var i;a(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(o,o):o()}})}function k(t,r,n){var i=g;return function(o,s){if(i===m)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw s;return{value:e,done:!0}}for(n.method=o,n.arg=s;;){var a=n.delegate;if(a){var u=P(a,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===g)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=m;var h=d(t,r,n);if("normal"===h.type){if(i=n.done?y:"suspendedYield",h.arg===v)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(i=y,n.method="throw",n.arg=h.arg)}}}function P(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=d(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var s=o.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function B(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(B,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[h];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(s.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(n(t)+" is not iterable")}return b.prototype=_,a(A,"constructor",{value:_,configurable:!0}),a(_,"constructor",{value:b,configurable:!0}),b.displayName=l(_,f,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,l(t,f,"GeneratorFunction")),t.prototype=Object.create(A),t},r.awrap=function(t){return{__await:t}},T(x.prototype),l(x.prototype,c,(function(){return this})),r.AsyncIterator=x,r.async=function(t,e,n,i,o){void 0===o&&(o=Promise);var s=new x(p(t,e,n,i),o);return r.isGeneratorFunction(e)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},T(A),l(A,f,"Generator"),l(A,h,(function(){return this})),l(A,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=R,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&s.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,i){return a.type="throw",a.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=s.call(o,"catchLoc"),h=s.call(o,"finallyLoc");if(u&&h){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&s.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;I(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},r}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){var r,n;r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],r=0,n=0;r<t.length;r++,n+=8)e[n>>>5]|=t[r]<<24-n%32;return e},wordsToBytes:function(t){for(var e=[],r=0;r<32*t.length;r+=8)e.push(t[r>>>5]>>>24-r%32&255);return e},bytesToHex:function(t){for(var e=[],r=0;r<t.length;r++)e.push((t[r]>>>4).toString(16)),e.push((15&t[r]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t.substr(r,2),16));return e},bytesToBase64:function(t){for(var e=[],n=0;n<t.length;n+=3)for(var i=t[n]<<16|t[n+1]<<8|t[n+2],o=0;o<4;o++)8*n+6*o<=8*t.length?e.push(r.charAt(i>>>6*(3-o)&63)):e.push("=");return e.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],n=0,i=0;n<t.length;i=++n%4)0!=i&&e.push((r.indexOf(t.charAt(n-1))&Math.pow(2,-2*i+8)-1)<<2*i|r.indexOf(t.charAt(n))>>>6-2*i);return e}},t.exports=n},function(t,e){function r(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(r(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,r){var n=r(3).default;t.exports=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,h=u>>1,c=-7,f=r?i-1:0,l=r?-1:1,p=t[e+f];for(f+=l,o=p&(1<<-c)-1,p>>=-c,c+=a;c>0;o=256*o+t[e+f],f+=l,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+t[e+f],f+=l,c-=8);if(0===o)o=1-h;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=h}return(p?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,a,u,h=8*o-i-1,c=(1<<h)-1,f=c>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+f>=1?l/u:l*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=c?(a=0,s=c):s+f>=1?(a=(e*u-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,h+=i;h>0;t[r+p]=255&s,p+=d,s/=256,h-=8);t[r+p-d]|=128*g}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){const n=r(12),i=new(r(10)),o=new n,s=r(25);function a(t,e){const r=new Array(2+t.length+192),n=8*t.length;r[0]=n>>8&255,r[1]=255&n;for(let e=0;e<t.length;e++)r[2+e]=t[e];let a=2+t.length;const u=s.normalize(i.a.toByteArray());for(let t=0;t<u.length;t++)r[a+t]=(u[t]>>>0)%256;a+=u.length;const h=s.normalize(i.b.toByteArray());for(let t=0;t<h.length;t++)r[a+t]=(h[t]>>>0)%256;a+=h.length;const c=s.normalize(i.Gx.toByteArray());for(let t=0;t<c.length;t++)r[a+t]=(c[t]>>>0)%256;a+=c.length;const f=s.normalize(i.Gy.toByteArray());for(let t=0;t<f.length;t++)r[a+t]=(f[t]>>>0)%256;a+=f.length;const l=s.normalize(e.getX().toByteArray());for(let t=0;t<l.length;t++)r[a+t]=(l[t]>>>0)%256;a+=l.length;const p=s.normalize(e.getY().toByteArray());for(let t=0;t<p.length;t++)r[a+t]=(p[t]>>>0)%256;return a+=p.length,o.init(),o.update(r),o.final()}t.exports={SM2MessageDigest:function(t,e,r){const n=a(e,r);return o.init(),o.update(n),o.update(t),o.final()},SM2GetZ:a,kdf:function(t,e){if(e>137438953440)return-1;if(t.length>1024)return-1;let r,n=1,i=e;const s=[];let a=0;for(t.push((n>>>24)%256),t.push((n>>>16)%256),t.push((n>>>8)%256),t.push((n>>>0)%256);i>0;){if(o.init(),o.update(t),r=o.final(),i<=32)for(let t=0;t<i;t++)s[a+t]=r[t];else{const t=e>=32?32:e;for(let e=0;e<t;e++)s[a+e]=r[e]}i-=32,a+=32,n++,t[t.length-4]=(n>>>24)%256,t[t.length-3]=(n>>>16)%256,t[t.length-2]=(n>>>8)%256,t[t.length-1]=(n>>>0)%256}return s}}},function(t,e,r){const{BigInteger:n}=r(9),i=r(10),o=r(23);t.exports=class{constructor(){this.curve=new i,this.G=new o("32C4AE2C1F1981195F9904466A39C9948FE30BBFF2660BE1715A4589334C74C7","BC3736A2F4F6779C59BDCEE36B692153D0A9877CC62A474002DF32E52139F0A0"),this.zero=new n("0"),this.one=new n("1"),this.two=new n("2"),this.three=new n("3"),this.infinity=new o(null,null),this.preCompute()}preCompute(){const t=new Map;for(let e=1;e<256;e++)t.set(""+e,this.preComputeMultiplyG(new n(""+e)));this.map=t}preComputeMultiplyG(t){if(t.equals(this.one))return this.G;let e=this.G;for(let r=t.bitLength()-2;r>=0;r--){e=this.ECPointDoubling(e);1==t.testBit(r)&&(e=this.ECPointAdd(e,this.G))}return e}ECPointAdd(t,e){const r=this.curve.p;if(t.isInfinity())return e;if(e.isInfinity())return t;const n=t.X,i=t.Y,s=t.Z,a=e.X,u=e.Y,h=e.Z,c=n.multiply(h).mod(r),f=a.multiply(s).mod(r),l=c.subtract(f),p=i.multiply(h).mod(r),d=u.multiply(s).mod(r),g=p.subtract(d);if(this.zero.equals(l))return this.zero.equals(g)?this.ECPointDoubling(t):this.infinity;const m=c.add(f),y=s.multiply(h).mod(r),v=l.square().mod(r),w=l.multiply(v).mod(r),b=y.multiply(g.square()).subtract(m.multiply(v)).mod(r),_=l.multiply(b).mod(r),S=g.multiply(v.multiply(c).subtract(b)).subtract(p.multiply(w)).mod(r),M=w.multiply(y).mod(r);return new o(_,S,M)}ECPointDoubling(t){if(t.isInfinity())return t;if(!t.Y.signum())return this.infinity;const e=t.X,r=t.Y,n=t.Z,i=this.curve.p,{a:s}=this.curve,a=e.square().multiply(this.three).add(s.multiply(n.square())).mod(i),u=r.shiftLeft(1).multiply(n).mod(i),h=r.square().mod(i),c=h.multiply(e).multiply(n).mod(i),f=u.square().mod(i),l=a.square().subtract(c.shiftLeft(3)).mod(i),p=u.multiply(l).mod(i),d=a.multiply(c.shiftLeft(2).subtract(l)).subtract(f.shiftLeft(1).multiply(h)).mod(i),g=u.multiply(f).mod(i);return new o(p,d,g)}ECPointMultiply(t,e){if(e.equals(this.one))return t;let r=t;for(let n=e.bitLength()-2;n>=0;n--){r=this.ECPointDoubling(r);1==e.testBit(n)&&(r=this.ECPointAdd(r,t))}return r}ECPointMultiplyG(t){if(t.equals(this.one))return this.G;const e=t.bitLength(),r=e%8==0?8:e%8;let n=this.map.get(t.shiftRight(e-r).toString());for(let e=t.bitLength()-r-1;e>0;e-=8){n=this.ECPointDoubling(n),n=this.ECPointDoubling(n),n=this.ECPointDoubling(n),n=this.ECPointDoubling(n),n=this.ECPointDoubling(n),n=this.ECPointDoubling(n),n=this.ECPointDoubling(n),n=this.ECPointDoubling(n);let r=0;for(let n=0;n<8;n++)r*=2,t.testBit(e-n)&&(r+=1);0!==r&&(n=this.ECPointAdd(n,this.map.get(""+r)))}return n}ECPointIsOnCurve(t){const e=t.Y.multiply(t.Y).mod(this.curve.p),r=t.X.multiply(t.X).multiply(t.X).add(t.X.multiply(this.curve.a)).add(this.curve.b).mod(this.curve.p);return e.equals(r)}}},function(t,e){},function(t,e,r){const n=r(28),i=r(30),o=r(4);function s(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={}}e.define=function(t,e){return new s(t,e)},s.prototype._createNamed=function(t){const e=this.name;function r(t){this._initNamed(t,e)}return o(r,t),r.prototype._initNamed=function(e,r){t.call(this,e,r)},new r(this)},s.prototype._getDecoder=function(t){return t=t||"der",this.decoders.hasOwnProperty(t)||(this.decoders[t]=this._createNamed(i[t])),this.decoders[t]},s.prototype.decode=function(t,e,r){return this._getDecoder(e).decode(t,r)},s.prototype._getEncoder=function(t){return t=t||"der",this.encoders.hasOwnProperty(t)||(this.encoders[t]=this._createNamed(n[t])),this.encoders[t]},s.prototype.encode=function(t,e,r){return this._getEncoder(e).encode(t,r)}},function(t,e){var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var u,h=[],c=!1,f=-1;function l(){c&&u&&(c=!1,u.length?h=u.concat(h):f=-1,h.length&&p())}function p(){if(!c){var t=a(l);c=!0;for(var e=h.length;e;){for(u=h,h=[];++f<e;)u&&u[f].run();f=-1,e=h.length}u=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];h.push(new d(t,e)),1!==h.length||c||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){function r(t,e){if(!t)throw new Error(e||"Assertion failed")}t.exports=r,r.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)}},function(t,e,r){const n=r(4),i=r(29);function o(t){i.call(this,t),this.enc="pem"}n(o,i),t.exports=o,o.prototype.encode=function(t,e){const r=i.prototype.encode.call(this,t).toString("base64"),n=["-----BEGIN "+e.label+"-----"];for(let t=0;t<r.length;t+=64)n.push(r.slice(t,t+64));return n.push("-----END "+e.label+"-----"),n.join("\n")}},function(t,e,r){const n=r(4),i=r(13).Buffer,o=r(31);function s(t){o.call(this,t),this.enc="pem"}n(s,o),t.exports=s,s.prototype.decode=function(t,e){const r=t.toString().split(/[\r\n]+/g),n=e.label.toUpperCase(),s=/^-----(BEGIN|END) ([^-]+)-----$/;let a=-1,u=-1;for(let t=0;t<r.length;t++){const e=r[t].match(s);if(null!==e&&e[2]===n){if(-1!==a){if("END"!==e[1])break;u=t;break}if("BEGIN"!==e[1])break;a=t}}if(-1===a||-1===u)throw new Error("PEM section not found for: "+n);const h=r.slice(a+1,u).join("");h.replace(/[^a-z0-9+/=]+/gi,"");const c=i.from(h,"base64");return o.prototype.decode.call(this,c,e)}},function(t,e,r){const n=e;n.Reporter=r(15).Reporter,n.DecoderBuffer=r(7).DecoderBuffer,n.EncoderBuffer=r(7).EncoderBuffer,n.Node=r(14)},function(t,e,r){const n=e;n._reverse=function(t){const e={};return Object.keys(t).forEach((function(r){(0|r)==r&&(r|=0);const n=t[r];e[n]=r})),e},n.der=r(16)},function(t,e,r){const n=r(55),i=r(32),o=r(6),s=[214,144,233,254,204,225,61,183,22,182,20,194,40,251,44,5,43,103,154,118,42,190,4,195,170,68,19,38,73,134,6,153,156,66,80,244,145,239,152,122,51,84,11,67,237,207,172,98,228,179,28,169,201,8,232,149,128,223,148,250,117,143,63,166,71,7,167,252,243,115,23,186,131,89,60,25,230,133,79,168,104,107,129,178,113,100,218,139,248,235,15,75,112,86,157,53,30,36,14,94,99,88,209,162,37,34,124,59,1,33,120,135,212,0,70,87,159,211,39,82,76,54,2,231,160,196,200,158,234,191,138,210,64,199,56,181,163,247,242,206,249,97,21,161,224,174,93,164,155,52,26,85,173,147,50,48,245,140,177,227,29,246,226,46,130,102,202,96,192,41,35,171,13,83,78,111,213,219,55,69,222,253,142,47,3,255,106,114,109,108,91,81,141,27,175,146,187,221,188,127,17,217,92,65,31,16,90,216,10,193,49,136,165,205,123,189,45,116,208,18,184,229,180,176,137,105,151,74,12,150,119,126,101,185,241,9,197,110,198,132,24,240,125,236,58,220,77,32,121,238,95,62,215,203,57,72],a=[462357,472066609,943670861,1415275113,1886879365,2358483617,2830087869,3301692121,3773296373,4228057617,404694573,876298825,1347903077,1819507329,2291111581,2762715833,3234320085,3705924337,4177462797,337322537,808926789,1280531041,1752135293,2223739545,2695343797,3166948049,3638552301,4110090761,269950501,741554753,1213159005,1684763257],u=[2746333894,1453994832,1736282519,2993693404],h={base64:"byteArrayToBase64",hex:"byteArrayToHex",text:"utf8ByteArrayToString",bytes:"byteArrayToByteArray"},c={base64:"base64ToByteArray",hex:"hexToByteArray",text:"stringToByteArrayInUtf8",bytes:"byteArrayToByteArray"};t.exports=class{constructor(t){let e=t.key;if("string"==typeof e&&(e=o.stringToByteArrayInUtf8(e)),16!==e.length)throw new Error("key should be a 16 bytes string");this.key=e;let r=t.adata||"";"string"==typeof r&&(r=o.stringToByteArrayInUtf8(r)),this.adata=r,this.tlen="number"==typeof t.tlen?t.tlen:128;let n=new Uint8Array(0);if(void 0!==t.iv&&null!==t.iv&&(n=t.iv,"string"==typeof n&&(n=o.stringToByteArrayInUtf8(n)),"gcm"!==t.mode&&16!==n.length))throw new Error("iv should be a 16 bytes string");this.iv=n,this.mode="cbc",["cbc","ecb","gcm"].indexOf(t.mode)>=0&&(this.mode=t.mode),this.paddingMode="PKCS7",["PKCS7"].indexOf(t.padding)>=0&&(this.paddingMode=t.padding),this.cipherType="hex",["base64","text","hex","bytes"].indexOf(t.cipherType)>=0&&(this.cipherType=t.cipherType),this.encryptRoundKeys=new Uint32Array(32),this.spawnEncryptRoundKeys(),this.decryptRoundKeys=Uint32Array.from(this.encryptRoundKeys),this.decryptRoundKeys.reverse()}doBlockCrypt(t,e){e||(e=this.encryptRoundKeys);const r=new Uint32Array(36);r.set(t,0);for(let t=0;t<32;t++)r[t+4]=r[t]^this.tTransform1(r[t+1]^r[t+2]^r[t+3]^e[t]);const n=new Uint32Array(4);return n[0]=r[35],n[1]=r[34],n[2]=r[33],n[3]=r[32],n}spawnEncryptRoundKeys(){const t=new Uint32Array(4);t[0]=this.key[0]<<24|this.key[1]<<16|this.key[2]<<8|this.key[3],t[1]=this.key[4]<<24|this.key[5]<<16|this.key[6]<<8|this.key[7],t[2]=this.key[8]<<24|this.key[9]<<16|this.key[10]<<8|this.key[11],t[3]=this.key[12]<<24|this.key[13]<<16|this.key[14]<<8|this.key[15];const e=new Uint32Array(36);e[0]=t[0]^u[0],e[1]=t[1]^u[1],e[2]=t[2]^u[2],e[3]=t[3]^u[3];for(let t=0;t<32;t++)e[t+4]=e[t]^this.tTransform2(e[t+1]^e[t+2]^e[t+3]^a[t]),this.encryptRoundKeys[t]=e[t+4]}rotateLeft(t,e){return t<<e|t>>>32-e}linearTransform1(t){return t^this.rotateLeft(t,2)^this.rotateLeft(t,10)^this.rotateLeft(t,18)^this.rotateLeft(t,24)}linearTransform2(t){return t^this.rotateLeft(t,13)^this.rotateLeft(t,23)}tauTransform(t){return s[t>>>24&255]<<24|s[t>>>16&255]<<16|s[t>>>8&255]<<8|s[255&t]}tTransform1(t){const e=this.tauTransform(t);return this.linearTransform1(e)}tTransform2(t){const e=this.tauTransform(t);return this.linearTransform2(e)}padding(t){if(null===t)return null;const e=16-t.length%16,r=new Uint8Array(t.length+e);return r.set(t,0),r.fill(e,t.length),r}dePadding(t){if(null===t)return null;const e=t[t.length-1];return t.slice(0,t.length-e)}uint8ToUint32Block(t,e=0){const r=new Uint32Array(4);return r[0]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],r[1]=t[e+4]<<24|t[e+5]<<16|t[e+6]<<8|t[e+7],r[2]=t[e+8]<<24|t[e+9]<<16|t[e+10]<<8|t[e+11],r[3]=t[e+12]<<24|t[e+13]<<16|t[e+14]<<8|t[e+15],r}encrypt(t){"string"==typeof t&&(t=o.stringToByteArrayInUtf8(t));const e=this.padding(t),r=e.length/16,s=new Uint8Array(e.length);let a,u;if("cbc"===this.mode){if(null===this.iv||16!==this.iv.length)throw new Error("iv error");let t=this.uint8ToUint32Block(this.iv);for(let n=0;n<r;n++){const r=16*n,i=this.uint8ToUint32Block(e,r);t[0]=t[0]^i[0],t[1]=t[1]^i[1],t[2]=t[2]^i[2],t[3]=t[3]^i[3];const o=this.doBlockCrypt(t,this.encryptRoundKeys);t=o;for(let t=0;t<16;t++)s[r+t]=o[parseInt(t/4,10)]>>(3-t)%4*8&255}}else if("gcm"===this.mode){const e=n.encrypt(this,i.bytesToBits(t),i.bytesToBits(this.iv),i.bytesToBits(this.adata),this.tlen);a=new Uint8Array(i.bytesFromBits(e.data)),u=new Uint8Array(i.bytesFromBits(e.tag))}else for(let t=0;t<r;t++){const r=16*t,n=this.uint8ToUint32Block(e,r),i=this.doBlockCrypt(n,this.encryptRoundKeys);for(let t=0;t<16;t++)s[r+t]=i[parseInt(t/4,10)]>>(3-t)%4*8&255}return"gcm"===this.mode?{cipherText:o[h[this.cipherType||"base64"]](a),tag:o[h[this.cipherType||"base64"]](u)}:o[h[this.cipherType||"base64"]](s)}decrypt(t,e=""){const r=o[c[this.cipherType||"base64"]](t),s=o[c[this.cipherType||"base64"]](e),a=r.length/16;let u=new Uint8Array(r.length);if("cbc"===this.mode){if(null===this.iv||16!==this.iv.length)throw new Error("iv error");let t=this.uint8ToUint32Block(this.iv);for(let e=0;e<a;e++){const n=16*e,i=this.uint8ToUint32Block(r,n),o=this.doBlockCrypt(i,this.decryptRoundKeys),s=new Uint32Array(4);s[0]=t[0]^o[0],s[1]=t[1]^o[1],s[2]=t[2]^o[2],s[3]=t[3]^o[3],t=i;for(let t=0;t<16;t++)u[n+t]=s[parseInt(t/4,10)]>>(3-t)%4*8&255}}else if("gcm"===this.mode){const t=n.decrypt(this,i.bytesToBits([...r,...s]),i.bytesToBits(this.iv),i.bytesToBits(this.adata),this.tlen);u=new Uint8Array(i.bytesFromBits(t))}else for(let t=0;t<a;t++){const e=16*t,n=this.uint8ToUint32Block(r,e),i=this.doBlockCrypt(n,this.decryptRoundKeys);for(let t=0;t<16;t++)u[e+t]=i[parseInt(t/4,10)]>>(3-t)%4*8&255}const h=this.dePadding(u),f="gcm"===this.mode?u:h;return"bytes"===this.cipherType?f:o.utf8ByteArrayToString(f)}}},function(t,e,r){const n=r(32);t.exports={name:"gcm",encrypt(t,e,r,n,i){let o;const s=e.slice(0);return i=i||128,n=n||[],o=this._ctrMode(!0,t,s,n,r,i),o},decrypt(t,e,r,i,o){let s,a,u=e.slice(0);const h=n,c=h.bitLength(u);if(i=i||[],(o=o||128)<=c?(a=h.bitSlice(u,c-o),u=h.bitSlice(u,0,c-o)):(a=u,u=[]),s=this._ctrMode(!1,t,u,i,r,o),!h.equal(s.tag,a))throw new Error("gcm: tag doesn't match");return s.data},_galoisMultiply(t,e){let r,i,o,s,a,u;const h=n._xor4;for(s=[0,0,0,0],a=e.slice(0),r=0;r<128;r++){for(o=0!=(t[Math.floor(r/32)]&1<<31-r%32),o&&(s=h(s,a)),u=0!=(1&a[3]),i=3;i>0;i--)a[i]=a[i]>>>1|(1&a[i-1])<<31;a[0]=a[0]>>>1,u&&(a[0]=a[0]^225<<24)}return s},_ghash(t,e,r){let n,i;const o=r.length;for(n=e.slice(0),i=0;i<o;i+=4)n[0]^=4294967295&r[i],n[1]^=4294967295&r[i+1],n[2]^=4294967295&r[i+2],n[3]^=4294967295&r[i+3],n=this._galoisMultiply(n,t);return n},_ctrMode(t,e,r,i,o,s){let a,u,h,c,f,l,p,d,g,m,y,v;const w=n;for(g=r.length,m=w.bitLength(r),y=w.bitLength(i),v=w.bitLength(o),a=e.doBlockCrypt(new Uint32Array([0,0,0,0])),96===v?(u=o.slice(0),u=w.concat(u,[1])):(u=this._ghash(a,[0,0,0,0],o),u=this._ghash(a,u,[0,0,Math.floor(v/4294967296),4294967295&v])),h=this._ghash(a,[0,0,0,0],i),l=u.slice(0),p=h.slice(0),t||(p=this._ghash(a,h,r)),f=0;f<g;f+=4)l[3]++,c=e.doBlockCrypt(new Uint32Array(l)),r[f]^=c[0],r[f+1]^=c[1],r[f+2]^=c[2],r[f+3]^=c[3];return r=w.clamp(r,m),t&&(p=this._ghash(a,h,r)),d=[Math.floor(y/4294967296),4294967295&y,Math.floor(m/4294967296),4294967295&m],p=this._ghash(a,p,d),c=e.doBlockCrypt(new Uint32Array(u)),p[0]^=c[0],p[1]^=c[1],p[2]^=c[2],p[3]^=c[3],{tag:w.bitSlice(p,0,s),data:r}}}},function(t,e,r){(function(e){const n=r(6),i=r(21),o=r(57),s=r(58),a=function(t,e,r){const o=new i,s=n.stringToByteArrayInUtf8("1234567812345678");return o.sign(t,e,r,s)};t.exports={genCsr:function({countryName:t,province:r,localityName:i,organizationName:u,organizationUnitName:h,commonName:c,email:f,challengePassword:l,publicKey:p,privateKey:d}){const g={certificationRequestInfo:{version:0,subject:{type:"rdnSequence",value:[]},subjectPKInfo:{algorithm:{algorithm:o.ECCPubKey.split("."),subAlgorithm:o.SM2ECC.split(".")},subjectPublicKey:{data:e.from(p,"hex")}},attributes:{type:o.ChallengePassword.split("."),values:[]}},signatureAlgorithm:{algorithm:o.SM2SigningWithSM3.split(".")},signature:{data:""}};t&&(g.certificationRequestInfo.subject.value=[[{type:o.CountryName.split("."),value:{type:"printableString",value:t}}]]),r&&g.certificationRequestInfo.subject.value.push([{type:o.StateOrProvinceName.split("."),value:{type:"utf8String",value:r}}]),i&&g.certificationRequestInfo.subject.value.push([{type:o.LocalityName.split("."),value:{type:"utf8String",value:i}}]),u&&g.certificationRequestInfo.subject.value.push([{type:o.OrganizationName.split("."),value:{type:"utf8String",value:u}}]),h&&g.certificationRequestInfo.subject.value.push([{type:o.OrganizationalUnitName.split("."),value:{type:"utf8String",value:h}}]),c&&g.certificationRequestInfo.subject.value.push([{type:o.CommonName.split("."),value:{type:"utf8String",value:c}}]),f&&g.certificationRequestInfo.subject.value.push([{type:o.Email.split("."),value:{type:"ia5String",value:f}}]),l&&(g.certificationRequestInfo.attributes.values=[{type:"utf8String",value:l}]);const m=s.CertificationRequestInfo.encode(g.certificationRequestInfo,"der"),y=a(p,d,m);g.signature={data:e.from(y,"hex")};const v=s.CertificationRequest.encode(g,"der");return`-----BEGIN CERTIFICATE REQUEST-----\n${n.byteArrayToBase64(v)}\n-----END CERTIFICATE REQUEST-----`}}}).call(this,r(11).Buffer)},function(t,e){t.exports={CommonName:"2.5.4.3",CountryName:"2.5.4.6",LocalityName:"2.5.4.7",StateOrProvinceName:"2.5.4.8",StreetAddress:"2.5.4.9",OrganizationName:"2.5.4.10",OrganizationalUnitName:"2.5.4.11",SM2SigningWithSM3:"1.2.156.10197.1.501",ECCPubKey:"1.2.840.10045.2.1",SM2ECC:"1.2.156.10197.1.301",ChallengePassword:"1.2.840.113549.1.9.7",Email:"1.2.840.113549.1.9.1",SM2KeyExchangeTempPubkey:"1.2.840.113549.1.9.63",AuthorityInformationAccess:"1.3.6.1.5.5.7.1.1",AuthorityKeyIdentifier:"2.5.29.35",SubjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",CRLDistributionPoints:"2.5.29.31",BasicConstraints:"2.5.29.19",ExtKeyUsage:"2.5.29.37"}},function(t,e,r){const n=r(26),i=e,o=n.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("subAlgorithm").optional().objid(),this.key("parameters").optional().any())}));i.AlgorithmIdentifier=o;const s=n.define("CertificationRequestInfo",(function(){this.seq().obj(this.key("version").use(u),this.key("subject").use(c),this.key("subjectPKInfo").use(h),this.key("attributes").explicit(0).use(d))}));i.CertificationRequestInfo=s;const a=n.define("CertificationRequest",(function(){this.seq().obj(this.key("certificationRequestInfo").use(s),this.key("signatureAlgorithm").use(o),this.key("signature").bitstr())}));i.CertificationRequest=a;const u=n.define("Version",(function(){this.int({0:"v1",1:"v2",2:"v3"})}));i.Version=u;const h=n.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(o),this.key("subjectPublicKey").bitstr())}));i.SubjectPublicKeyInfo=h;const c=n.define("Name",(function(){this.choice({rdnSequence:this.use(f)})}));i.Name=c;const f=n.define("RDNSequence",(function(){this.seqof(l)}));i.RDNSequence=f;const l=n.define("RelativeDistinguishedName",(function(){this.setof(p)}));i.RelativeDistinguishedName=l;const p=n.define("AttributeTypeAndValue",(function(){this.seq().obj(this.key("type").use(g),this.key("value").use(m))}));i.AttributeTypeAndValue=p;const d=n.define("Attribute",(function(){this.seq().obj(this.key("type").use(g),this.key("values").setof(m))})),g=n.define("AttributeType",(function(){this.objid()}));i.AttributeType=g;const m=n.define("AttributeValue",(function(){this.choice({teletexString:this.t61str(),printableString:this.printstr(),universalString:this.unistr(),utf8String:this.utf8str(),bmpString:this.bmpstr(),ia5String:this.ia5str()})}));i.AttributeValue=m},function(t,e){!function(){"use strict";var e=[];function r(t){var e,r,n,i,o=-1;for(e=0,n=t.length;e<n;e+=1){for(i=255&(o^t[e]),r=0;r<8;r+=1)1==(1&i)?i=i>>>1^3988292384:i>>>=1;o=o>>>8^i}return-1^o}function n(t,r){var i,o,s;if(void 0!==n.crc&&r&&t||(n.crc=-1,t)){for(i=n.crc,o=0,s=t.length;o<s;o+=1)i=i>>>8^e[255&(i^t[o])];return n.crc=i,-1^i}}!function(){var t,r,n;for(r=0;r<256;r+=1){for(t=r,n=0;n<8;n+=1)1&t?t=3988292384^t>>>1:t>>>=1;e[r]=t>>>0}}(),t.exports=function(t,e){var i;t="string"==typeof t?(i=t,Array.prototype.map.call(i,(function(t){return t.charCodeAt(0)}))):t;return((e?r(t):n(t))>>>0).toString(16)},t.exports.direct=r,t.exports.table=n}()},function(t,e,r){!function(){"use strict";t.exports={inflate:r(61),deflate:r(62)}}()},function(t,e){!function(){var e,r,n,i,o,s,a,u,h,c,f,l,p,d,g,m,y,v=null,w=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],b=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],_=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],S=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],E=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function A(){this.next=null,this.list=null}function T(){this.e=0,this.b=0,this.n=0,this.t=null}function x(t,e,r,n,i,o){var s;this.BMAX=16,this.N_MAX=288,this.status=0,this.root=null,this.m=0;var a,u,h,c,f,l,p,d,g,m,y,v,w,b,_,S,M=[],E=[],x=new T,k=[],P=[],B=[];for(S=this.root=null,f=0;f<this.BMAX+1;f++)M[f]=0;for(f=0;f<this.BMAX+1;f++)E[f]=0;for(f=0;f<this.BMAX;f++)k[f]=null;for(f=0;f<this.N_MAX;f++)P[f]=0;for(f=0;f<this.BMAX+1;f++)B[f]=0;a=e>256?t[256]:this.BMAX,d=t,g=0,f=e;do{M[d[g]]++,g++}while(--f>0);if(M[0]===e)return this.root=null,this.m=0,void(this.status=0);for(l=1;l<=this.BMAX&&0===M[l];l++);for(p=l,o<l&&(o=l),f=this.BMAX;0!==f&&0===M[f];f--);for(h=f,o>f&&(o=f),w=1<<l;l<f;l++,w<<=1)if((w-=M[l])<0)return this.status=2,void(this.m=o);if((w-=M[f])<0)return this.status=2,void(this.m=o);for(M[f]+=w,B[1]=l=0,d=M,g=1,v=2;--f>0;)B[v++]=l+=d[g++];d=t,g=0,f=0;do{0!==(l=d[g++])&&(P[B[l]++]=f)}while(++f<e);for(e=B[h],B[0]=f=0,d=P,g=0,c=-1,y=E[0]=0,m=null,b=0;p<=h;p++)for(s=M[p];s-- >0;){for(;p>y+E[1+c];){if(y+=E[1+c],c++,b=(b=h-y)>o?o:b,(u=1<<(l=p-y))>s+1)for(u-=s+1,v=p;++l<b&&!((u<<=1)<=M[++v]);)u-=M[v];for(y+l>a&&y<a&&(l=a-y),b=1<<l,E[1+c]=l,m=[],_=0;_<b;_++)m[_]=new T;(S=S?S.next=new A:this.root=new A).next=null,S.list=m,k[c]=m,c>0&&(B[c]=f,x.b=E[c],x.e=16+l,x.t=m,l=(f&(1<<y)-1)>>y-E[c],k[c-1][l].e=x.e,k[c-1][l].b=x.b,k[c-1][l].n=x.n,k[c-1][l].t=x.t)}for(x.b=p-y,g>=e?x.e=99:d[g]<r?(x.e=d[g]<256?16:15,x.n=d[g++]):(x.e=i[d[g]-r],x.n=n[d[g++]-r]),u=1<<p-y,l=f>>y;l<b;l+=u)m[l].e=x.e,m[l].b=x.b,m[l].n=x.n,m[l].t=x.t;for(l=1<<p-1;0!=(f&l);l>>=1)f^=l;for(f^=l;(f&(1<<y)-1)!==B[c];)y-=E[c],c--}this.m=E[1],this.status=0!==w&&1!==h?1:0}function k(t){for(;a<t;)s|=(m.length===y?-1:255&m[y++])<<a,a+=8}function P(t){return s&w[t]}function B(t){s>>=t,a-=t}function I(t,n,i){var o,s,a;if(0===i)return 0;for(a=0;;){for(k(d),o=(s=l.list[P(d)]).e;o>16;){if(99===o)return-1;B(s.b),k(o-=16),o=(s=s.t[P(o)]).e}if(B(s.b),16!==o){if(15===o)break;for(k(o),c=s.n+P(o),B(o),k(g),o=(s=p.list[P(g)]).e;o>16;){if(99===o)return-1;B(s.b),k(o-=16),o=(s=s.t[P(o)]).e}for(B(s.b),k(o),f=r-s.n-P(o),B(o);c>0&&a<i;)c--,f&=32767,r&=32767,t[n+a++]=e[r++]=e[f++];if(a===i)return i}else if(r&=32767,t[n+a++]=e[r++]=s.n,a===i)return i}return u=-1,a}function C(t,n,i){var o;if(B(o=7&a),k(16),o=P(16),B(16),k(16),o!==(65535&~s))return-1;for(B(16),c=o,o=0;c>0&&o<i;)c--,r&=32767,k(8),t[n+o++]=e[r++]=P(8),B(8);return 0===c&&(u=-1),o}function R(t,e,r){if(!v){var s,a,u=[];for(s=0;s<144;s++)u[s]=8;for(;s<256;s++)u[s]=9;for(;s<280;s++)u[s]=7;for(;s<288;s++)u[s]=8;if(0!==(a=new x(u,288,257,b,_,i=7)).status)return console.error("HufBuild error: "+a.status),-1;for(v=a.root,i=a.m,s=0;s<30;s++)u[s]=5;if((a=new x(u,30,0,S,M,o=5)).status>1)return v=null,console.error("HufBuild error: "+a.status),-1;n=a.root,o=a.m}return l=v,p=n,d=i,g=o,I(t,e,r)}function O(t,e,r){var n,i,o,s,a,u,h,c,f,m=[];for(n=0;n<316;n++)m[n]=0;if(k(5),h=257+P(5),B(5),k(5),c=1+P(5),B(5),k(4),u=4+P(4),B(4),h>286||c>30)return-1;for(i=0;i<u;i++)k(3),m[E[i]]=P(3),B(3);for(;i<19;i++)m[E[i]]=0;if(0!==(f=new x(m,19,19,null,null,d=7)).status)return-1;for(l=f.root,d=f.m,s=h+c,n=o=0;n<s;)if(k(d),B(i=(a=l.list[P(d)]).b),(i=a.n)<16)m[n++]=o=i;else if(16===i){if(k(2),i=3+P(2),B(2),n+i>s)return-1;for(;i-- >0;)m[n++]=o}else if(17===i){if(k(3),i=3+P(3),B(3),n+i>s)return-1;for(;i-- >0;)m[n++]=0;o=0}else{if(k(7),i=11+P(7),B(7),n+i>s)return-1;for(;i-- >0;)m[n++]=0;o=0}if(f=new x(m,h,257,b,_,d=9),0===d&&(f.status=1),0!==f.status&&1!==f.status)return-1;for(l=f.root,d=f.m,n=0;n<c;n++)m[n]=m[n+h];return f=new x(m,c,0,S,M,g=6),p=f.root,0===(g=f.m)&&h>257||0!==f.status?-1:I(t,e,r)}function N(t,n,i){var o,s;for(o=0;o<i;){if(h&&-1===u)return o;if(c>0){if(0!==u)for(;c>0&&o<i;)c--,f&=32767,r&=32767,t[n+o++]=e[r++]=e[f++];else{for(;c>0&&o<i;)c--,r&=32767,k(8),t[n+o++]=e[r++]=P(8),B(8);0===c&&(u=-1)}if(o===i)return o}if(-1===u){if(h)break;k(1),0!==P(1)&&(h=!0),B(1),k(2),u=P(2),B(2),l=null,c=0}switch(u){case 0:s=C(t,n+o,i-o);break;case 1:s=l?I(t,n+o,i-o):R(t,n+o,i-o);break;case 2:s=l?I(t,n+o,i-o):O(t,n+o,i-o);break;default:s=-1}if(-1===s)return h?0:-1;o+=s}return o}t.exports=function(t){var n,i=[];e||(e=[]),r=0,s=0,a=0,u=-1,h=!1,c=f=0,l=null,m=t,y=0;do{n=N(i,i.length,1024)}while(n>0);return m=null,i}}()},function(t,e){!function(){var e,r,n,i,o,s,a,u,h,c,f,l,p,d,g,m,y,v,w,b,_,S,M,E,A,T,x,k,P,B,I,C,R,O,N,q,L,D,F,U,j,H,K,z,J,Q,W,Y,G,V,Z,X,$,tt,et,rt,nt=parseInt(17/3,10),it=null;function ot(){this.fc=0,this.dl=0}function st(){this.dyn_tree=null,this.static_tree=null,this.extra_bits=null,this.extra_base=0,this.elems=0,this.max_length=0,this.max_code=0}function at(t,e,r,n){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n}function ut(){this.next=null,this.len=0,this.ptr=[],this.off=0}var ht=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ct=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ft=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],lt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],pt=[new at(0,0,0,0),new at(4,4,8,4),new at(4,5,16,8),new at(4,6,32,32),new at(4,4,16,16),new at(8,16,32,32),new at(8,16,128,128),new at(8,32,128,256),new at(32,128,258,1024),new at(32,258,258,4096)];function dt(t){t.next=e,e=t}function gt(t){return f[32768+t]}function mt(t,e){return f[32768+t]=e}function yt(t){it[s+o++]=t,s+o===8192&&function(){var t,i;if(0!==o){for(null!==e?(a=e,e=e.next):a=new ut,a.next=null,a.len=a.off=0,t=a,null===r?r=n=t:n=n.next=t,t.len=o-s,i=0;i<t.len;i++)t.ptr[i]=it[s+i];o=s=0}var a}()}function vt(t){t&=65535,s+o<8190?(it[s+o++]=255&t,it[s+o++]=t>>>8):(yt(255&t),yt(t>>>8))}function wt(){g=32767&(g<<nt^255&u[_+3-1]),m=gt(g),f[32767&_]=m,mt(g,_)}function bt(t,e){Dt(e[t].fc,e[t].dl)}function _t(t){return 255&(t<256?z[t]:z[256+(t>>7)])}function St(t,e,r){return t[e].fc<t[r].fc||t[e].fc===t[r].fc&&H[e]<=H[r]}function Mt(t,e,r){var n;for(n=0;n<r&&rt<et.length;n++)t[e+n]=255&et[rt++];return n}function Et(t){var e,r,n,i,o=A,s=_,a=b,h=_>32506?_-32506:0,c=_+258,l=u[s+a-1],p=u[s+a];b>=k&&(o>>=2);do{if(u[(e=t)+a]===p&&u[e+a-1]===l&&u[e]===u[s]&&u[++e]===u[s+1]){for(s+=2,e++;s<c;){for(i=!1,n=0;n<8;n+=1)if(e+=1,u[s+=1]!==u[e]){i=!0;break}if(i)break}if(r=258-(c-s),s=c-258,r>a){if(S=t,a=r,r>=P)break;l=u[s+a-1],p=u[s+a]}}}while((t=f[32767&t])>h&&0!=--o);return a}function At(){var t,e,r=65536-E-_;if(-1===r)r--;else if(_>=65274){for(t=0;t<32768;t++)u[t]=u[t+32768];for(S-=32768,_-=32768,d-=32768,t=0;t<32768;t++)mt(t,(e=gt(t))>=32768?e-32768:0);for(t=0;t<32768;t++)e=f[t],f[t]=e>=32768?e-32768:0;r+=32768}M||((t=Mt(u,_+E,r))<=0?M=!0:E+=t)}function Tt(){M||(l=0,p=0,function(){var t,e,r,n,i;if(0!==R[0].dl)return;for(N.dyn_tree=B,N.static_tree=C,N.extra_bits=ht,N.extra_base=257,N.elems=286,N.max_length=15,N.max_code=0,q.dyn_tree=I,q.static_tree=R,q.extra_bits=ct,q.extra_base=0,q.elems=30,q.max_length=15,q.max_code=0,L.dyn_tree=O,L.static_tree=null,L.extra_bits=ft,L.extra_base=0,L.elems=19,L.max_length=7,L.max_code=0,r=0,n=0;n<28;n++)for(J[n]=r,t=0;t<1<<ht[n];t++)K[r++]=n;for(K[r-1]=n,i=0,n=0;n<16;n++)for(Q[n]=i,t=0;t<1<<ct[n];t++)z[i++]=n;for(i>>=7;n<30;n++)for(Q[n]=i<<7,t=0;t<1<<ct[n]-7;t++)z[256+i++]=n;for(e=0;e<=15;e++)D[e]=0;t=0;for(;t<=143;)C[t++].dl=8,D[8]++;for(;t<=255;)C[t++].dl=9,D[9]++;for(;t<=279;)C[t++].dl=7,D[7]++;for(;t<=287;)C[t++].dl=8,D[8]++;for(It(C,287),t=0;t<30;t++)R[t].dl=5,R[t].fc=Ft(t,5);Pt()}(),function(){var t;for(t=0;t<32768;t++)f[32768+t]=0;if(T=pt[x].max_lazy,k=pt[x].good_length,P=pt[x].nice_length,A=pt[x].max_chain,_=0,d=0,(E=Mt(u,0,65536))<=0)return M=!0,void(E=0);for(M=!1;E<262&&!M;)At();for(g=0,t=0;t<2;t++)g=32767&(g<<nt^255&u[t])}(),r=null,o=0,s=0,x<=3?(b=2,w=0):(w=2,v=!1),a=!1)}function xt(t,e,n){var o;return i||(Tt(),i=!0,0!==E)?(o=kt(t,e,n))===n?n:a?o:(x<=3?function(){for(;0!==E&&null===r;){var t;if(wt(),0!==m&&_-m<=32506&&(w=Et(m))>E&&(w=E),w>=3)if(t=qt(_-S,w-3),E-=w,w<=T){w--;do{_++,wt()}while(0!=--w);_++}else _+=w,w=0,g=32767&((g=255&u[_])<<nt^255&u[_+1]);else t=qt(0,255&u[_]),E--,_++;for(t&&(Nt(0),d=_);E<262&&!M;)At()}}():function(){for(;0!==E&&null===r;){if(wt(),b=w,y=S,w=2,0!==m&&b<T&&_-m<=32506&&((w=Et(m))>E&&(w=E),3===w&&_-S>4096&&w--),b>=3&&w<=b){var t;t=qt(_-1-y,b-3),E-=b-1,b-=2;do{_++,wt()}while(0!=--b);v=!1,w=2,_++,t&&(Nt(0),d=_)}else v?(qt(0,255&u[_-1])&&(Nt(0),d=_),_++,E--):(v=!0,_++,E--);for(;E<262&&!M;)At()}}(),0===E&&(v&&qt(0,255&u[_-1]),Nt(1),a=!0),o+kt(t,o+e,n-o)):(a=!0,0)}function kt(t,e,n){var i,a,u;for(i=0;null!==r&&i<n;){for((a=n-i)>r.len&&(a=r.len),u=0;u<a;u++)t[e+i+u]=r.ptr[r.off+u];var h;if(r.off+=a,r.len-=a,i+=a,0===r.len)h=r,r=r.next,dt(h)}if(i===n)return i;if(s<o){for((a=n-i)>o-s&&(a=o-s),u=0;u<a;u++)t[e+i+u]=it[s+u];i+=a,o===(s+=a)&&(o=s=0)}return i}function Pt(){var t;for(t=0;t<286;t++)B[t].fc=0;for(t=0;t<30;t++)I[t].fc=0;for(t=0;t<19;t++)O[t].fc=0;B[256].fc=1,$=tt=0,Y=G=V=0,Z=0,X=1}function Bt(t,e){for(var r=F[e],n=e<<1;n<=U&&(n<U&&St(t,F[n+1],F[n])&&n++,!St(t,r,F[n]));)F[e]=F[n],e=n,n<<=1;F[e]=r}function It(t,e){var r,n,i=[],o=0;for(r=1;r<=15;r++)o=o+D[r-1]<<1,i[r]=o;for(n=0;n<=e;n++){var s=t[n].dl;0!==s&&(t[n].fc=Ft(i[s]++,s))}}function Ct(t){var e,r,n=t.dyn_tree,i=t.static_tree,o=t.elems,s=-1,a=o;for(U=0,j=573,e=0;e<o;e++)0!==n[e].fc?(F[++U]=s=e,H[e]=0):n[e].dl=0;for(;U<2;){var u=F[++U]=s<2?++s:0;n[u].fc=1,H[u]=0,$--,null!==i&&(tt-=i[u].dl)}for(t.max_code=s,e=U>>1;e>=1;e--)Bt(n,e);do{e=F[1],F[1]=F[U--],Bt(n,1),r=F[1],F[--j]=e,F[--j]=r,n[a].fc=n[e].fc+n[r].fc,H[e]>H[r]+1?H[a]=H[e]:H[a]=H[r]+1,n[e].dl=n[r].dl=a,F[1]=a++,Bt(n,1)}while(U>=2);F[--j]=F[1],function(t){var e,r,n,i,o,s,a=t.dyn_tree,u=t.extra_bits,h=t.extra_base,c=t.max_code,f=t.max_length,l=t.static_tree,p=0;for(i=0;i<=15;i++)D[i]=0;for(a[F[j]].dl=0,e=j+1;e<573;e++)(i=a[a[r=F[e]].dl].dl+1)>f&&(i=f,p++),a[r].dl=i,r>c||(D[i]++,o=0,r>=h&&(o=u[r-h]),s=a[r].fc,$+=s*(i+o),null!==l&&(tt+=s*(l[r].dl+o)));if(0!==p){do{for(i=f-1;0===D[i];)i--;D[i]--,D[i+1]+=2,D[f]--,p-=2}while(p>0);for(i=f;0!==i;i--)for(r=D[i];0!==r;)(n=F[--e])>c||(a[n].dl!==i&&($+=(i-a[n].dl)*a[n].fc,a[n].fc=i),r--)}}(t),It(n,s)}function Rt(t,e){var r,n,i=-1,o=t[0].dl,s=0,a=7,u=4;for(0===o&&(a=138,u=3),t[e+1].dl=65535,r=0;r<=e;r++)n=o,o=t[r+1].dl,++s<a&&n===o||(s<u?O[n].fc+=s:0!==n?(n!==i&&O[n].fc++,O[16].fc++):s<=10?O[17].fc++:O[18].fc++,s=0,i=n,0===o?(a=138,u=3):n===o?(a=6,u=3):(a=7,u=4))}function Ot(t,e){var r,n,i=-1,o=t[0].dl,s=0,a=7,u=4;for(0===o&&(a=138,u=3),r=0;r<=e;r++)if(n=o,o=t[r+1].dl,!(++s<a&&n===o)){if(s<u)do{bt(n,O)}while(0!=--s);else 0!==n?(n!==i&&(bt(n,O),s--),bt(16,O),Dt(s-3,2)):s<=10?(bt(17,O),Dt(s-3,3)):(bt(18,O),Dt(s-11,7));s=0,i=n,0===o?(a=138,u=3):n===o?(a=6,u=3):(a=7,u=4)}}function Nt(t){var e,r,n,i,o;if(i=_-d,W[V]=Z,Ct(N),Ct(q),n=function(){var t;for(Rt(B,N.max_code),Rt(I,q.max_code),Ct(L),t=18;t>=3&&0===O[lt[t]].dl;t--);return $+=3*(t+1)+5+5+4,t}(),(r=tt+3+7>>3)<=(e=$+3+7>>3)&&(e=r),i+4<=e&&d>=0)for(Dt(0+t,3),Ut(),vt(i),vt(~i),o=0;o<i;o++)yt(u[d+o]);else r===e?(Dt(2+t,3),Lt(C,R)):(Dt(4+t,3),function(t,e,r){var n;for(Dt(t-257,5),Dt(e-1,5),Dt(r-4,4),n=0;n<r;n++)Dt(O[lt[n]].dl,3);Ot(B,t-1),Ot(I,e-1)}(N.max_code+1,q.max_code+1,n+1),Lt(B,I));Pt(),0!==t&&Ut()}function qt(t,e){if(c[Y++]=e,0===t?B[e].fc++:(t--,B[K[e]+256+1].fc++,I[_t(t)].fc++,h[G++]=t,Z|=X),X<<=1,0==(7&Y)&&(W[V++]=Z,Z=0,X=1),x>2&&0==(4095&Y)){var r,n=8*Y,i=_-d;for(r=0;r<30;r++)n+=I[r].fc*(5+ct[r]);if(n>>=3,G<parseInt(Y/2,10)&&n<parseInt(i/2,10))return!0}return 8191===Y||8192===G}function Lt(t,e){var r,n,i,o,s=0,a=0,u=0,f=0;if(0!==Y)do{0==(7&s)&&(f=W[u++]),n=255&c[s++],0==(1&f)?bt(n,t):(bt((i=K[n])+256+1,t),0!==(o=ht[i])&&Dt(n-=J[i],o),bt(i=_t(r=h[a++]),e),0!==(o=ct[i])&&Dt(r-=Q[i],o)),f>>=1}while(s<Y);bt(256,t)}function Dt(t,e){p>16-e?(vt(l|=t<<p),l=t>>16-p,p+=e-16):(l|=t<<p,p+=e)}function Ft(t,e){var r=0;do{r|=1&t,t>>=1,r<<=1}while(--e>0);return r>>1}function Ut(){p>8?vt(l):p>0&&yt(l),l=0,p=0}t.exports=function(t,o){var s,a;et=t,rt=0,void 0===o&&(o=6),function(t){var o;if(t?t<1?t=1:t>9&&(t=9):t=6,x=t,i=!1,M=!1,null===it){for(e=r=n=null,it=[],u=[],h=[],c=[],f=[],B=[],o=0;o<573;o++)B[o]=new ot;for(I=[],o=0;o<61;o++)I[o]=new ot;for(C=[],o=0;o<288;o++)C[o]=new ot;for(R=[],o=0;o<30;o++)R[o]=new ot;for(O=[],o=0;o<39;o++)O[o]=new ot;N=new st,q=new st,L=new st,D=[],F=[],H=[],K=[],z=[],J=[],Q=[],W=[]}}(o),a=[];do{s=xt(a,a.length,1024)}while(s>0);return et=null,a},t.exports.DEFAULT_LEVEL=6}()},function(t,e,r){r.r(e),r.d(e,"resetConfig",(function(){return $r})),r.d(e,"qapmWebSdkStart",(function(){return en})),r.d(e,"qapmMiniSdkStart",(function(){return nn})),r.d(e,"qapmCustomTrack",(function(){return un})),r.d(e,"qapmSetField",(function(){return hn})),r.d(e,"qapmCaptureException",(function(){return cn})),r.d(e,"setPageState",(function(){return fn})),r.d(e,"getAppKey",(function(){return ln}));var n=r(1),i=r.n(n),o=r(0),s=r.n(o),a={logLevel:"log",levelMap:{log:5,debug:4,info:3,warn:2,error:1,none:0},enableLogLevel:function(t){var e=this.levelMap[t];if(null==e)return!1;var r=this.levelMap[this.logLevel];return null!=t&&e<=r}};["debug","info","log","warn","error"].map((function(t){a[t]=function(){if(this.enableLogLevel(t)){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];(e=console)[t].apply(e,["QAPM,"].concat(n))}}}));var u=r(17),h=r(33),c=r.n(h),f=r(34),l=r.n(f),p=r(3),d=r.n(p),g="5.3.6";Object.assign;function m(t){return!!(t&&t.constructor&&t.call&&t.apply)}var y=function(t){var e=[];return function t(r){var n=0;if("boolean"==typeof r)n=4;else if("string"==typeof r)n=encodeURI(r).split(/%..|./).length-1;else if("number"==typeof r)n=8;else if("object"===d()(r)&&-1===e.indexOf(r))for(var i in e[e.length]=r,r)n+=8,n+=t(r[i]);return n}(t)},v=function(t,e){t&&Object.keys(e).forEach((function(e){void 0===t[e]&&(t[e]=function(){})}))},w=function(){return"undefined"!=typeof wx},b=function(t,e){return"string"==typeof t?t.split(e):[]},_=function(){function t(){c()(this,t)}return l()(t,null,[{key:"indexName",value:function(t){return"fs-".concat(t,"-index")}},{key:"contentKey",value:function(t,e){return"fs-".concat(t,"-").concat(e)}},{key:"getIndex",value:function(e){var r=t.indexName(e),n=w()?wx.getStorageSync(r):localStorage.getItem(r);return null!==n&&""!==n||(n=-1),parseInt(n)}},{key:"appendString",value:function(e,r){var n=t.getIndex(e);n+=1,w()?wx.setStorageSync(t.contentKey(e,n),r):localStorage.setItem(t.contentKey(e,n),r),w()?wx.setStorageSync(t.indexName(e),n):localStorage.setItem(t.indexName(e),n)}},{key:"readAll",value:function(e){var r="",n=t.getIndex(e);if(n>=0)for(var i=0;i<=n;i++)r+=w()?wx.getStorageSync(t.contentKey(e,i)):localStorage.getItem(t.contentKey(e,i));return r}},{key:"readItem",value:function(t){return w()?wx.getStorageSync(t):localStorage.getItem(t)}},{key:"getKeysContains",value:function(t){var e=[];if(w())for(var r=wx.getStorageSync().keys,n=void 0===r?[]:r,i=0;i<n.length;i++)n[i].includes(t)&&e.push(n[i]);else for(var o=0;o<localStorage.length;o++)localStorage.key(o).includes(t)&&e.push(localStorage.key(o));return e}},{key:"readItemsContains",value:function(t){for(var e=this.getKeysContains(t),r=0;r<e.length;r++){var n=this.readItem(e[r]);e.push(n)}return[]}},{key:"removeItem",value:function(t){w()?wx.removeStorageSync(t):localStorage.removeItem(t)}},{key:"setItem",value:function(t,e){w()?wx.setStorageSync(t,e):localStorage.setItem(t,e)}},{key:"remove",value:function(e){var r=t.getIndex(e);if(r>=0)for(var n=0;n<=r;n++)w()?wx.removeStorageSync(t.contentKey(e,n)):localStorage.removeItem(t.contentKey(e,n));w()?wx.removeStorageSync(t.indexName(e)):localStorage.removeItem(t.indexName(e))}},{key:"removeItemsContains",value:function(t){for(var e=this.getKeysContains(t),r=0;r<e.length;r++)this.removeItem(e[r])}}]),t}(),S=r(8),M=r(2),E=r.n(M),A=r(35),T=function(){var t=Tt.app_key.split("-")[0],e=Tt.app_key.split("-")[1],r=Tt.user_id,n=V(),i=z(),o=Y(),s=J(),a=Tt.version;return"".concat(Pt.qapm,"/entrance/").concat(e,"/authorize/?p_id=").concat(e,"&app_key=").concat(t,"&deviceid=").concat(n,"&uin=").concat(r,"&sdk_ver=").concat("5.3.6","&device=").concat(i,"&os=").concat(o,"&platform=").concat(s,"&is_main=").concat("no","&version=").concat(a)},x=function(){return new Promise((function(t,e){(F?R:C)({config:{headers:{"Content-Type":"application/json"},method:"GET",isGetToken:!0}},{onSuccess:function(e){if("string"==typeof e.data)try{e.data=JSON.parse(e.data)}catch(t){return void a.info("get token fail",e)}var r=e.data.token;t(r)},onError:function(t){e(t)}})}))},k=function(t,e){var r="string"==typeof t.data?t.data:JSON.stringify(t.data),n=t.config,i=n.isEncrypt,o=n.plugin,s=n.dataLength,a=n.isUBS,u=n.isQAPM,h=n.isAppconfig,c=n.isPubkey,f="",l="",p="";if(n.isGetToken)p=T();else if(c)t.config.headers.Authorize=Tt.TOKEN,p=N();else if(h)t.config.headers.Authorize=Tt.TOKEN,p=Rt();else if(u&&Tt.debug)p=Bt(o,s);else if(u&&i){var d="27182818284590452353602874713526",g="multipart/form-data;boundary=".concat(d),m=L("--".concat(d,'\r\nContent-Disposition: form-data; name="json_str"\r\n\r\n').concat(r,"\r\n--27182818284590452353602874713526--\r\n")),y=m.encryptData,v=m.checkCode,w=m.encryptSm4Key,b=m.sm4Iv,_=m.encryptCallback;f=b,l=w,t.data=y,t.config.headers["Check-Code"]=v,t.config.headers["Content-Type"]=g,t.config.headers["Content-Encoding"]="gzip";var S=e.onSuccess;e.onSuccess=function(t){"function"==typeof S&&S(t),_&&_(t)},p=Ct(o,s,f,l),t.config.headers.Authorize=Tt.TOKEN,t.config.headers.INTCode=E()(r)}else if(u&&!i){var M="27182818284590452353602874713526",A="multipart/form-data;boundary=".concat(M),x="--".concat(M,'\r\nContent-Disposition: form-data; name="json_str"\r\n\r\n').concat(r,"\r\n--27182818284590452353602874713526--\r\n");t.data=x,t.config.headers["Content-Type"]=A,p=It(o,s),t.config.headers.Authorize=Tt.TOKEN,t.config.headers.INTCode=E()(r)}else if(a&&!i)p=Ot();else if(a&&i){var k=L(t.data,!1),P=k.encryptData,B=k.checkCode,I=k.encryptSm4Key,C=k.sm4Iv,R=k.encryptCallback;f=C,l=I,t.config.headers["Check-Code"]=B,t.data=P;var O=e.onSuccess;e.onSuccess=function(t){"function"==typeof O&&O(t),R&&R(t)},p=Nt(f,l),t.config.headers["Content-Type"]="application/octet-stream"}return t.config.url=p,t},P=function(t){var e=D(),r="string"==typeof t.data?t.data:JSON.stringify(t.data),n=t.config,i=n.isEncrypt,o=n.plugin,s=n.isUBS,a=n.isQAPM,u=n.dataLength,h="";s&&(h="athena"),a&&(h="plugin:".concat(o)),"android"===e?window.QAPMAndroidJsBridge.uploadDataByMobile(h,r,i):"ios"===e&&window.webkit.messageHandlers.QAPM.postMessage({functionName:"uploadDataByMobile",dataType:h,jsonStr:r,needEncrpty:i,dataLength:u})};function B(){return window.QAPMAndroidJsBridge&&window.QAPMAndroidJsBridge.uploadDataByMobile}function I(){return window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.QAPM&&window.webkit.messageHandlers.QAPM.postMessage}var C=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t){var r=t.config,n=r.isUBS,i=r.isQAPM,o="string"==typeof t.data?t.data:JSON.stringify(t.data);if(D()&&(i||n)&&(B()||I()))P(t);else{var s=(t=k(t,e)).config,u=s.method,h=s.url;if(h){a.info("webrequest requestConfig",h,t);var c=new XMLHttpRequest,f=-1;if(c.onreadystatechange=function(){try{c.readyState===XMLHttpRequest.DONE&&(f=c.status,e.hasOwnProperty("onSuccess")&&e.onSuccess({statusCode:f,header:c.getAllResponseHeaders(),data:c.response}))}catch(t){e.hasOwnProperty("onError")&&e.onError({statusCode:f,header:c.getAllResponseHeaders(),data:t})}e.hasOwnProperty("onFinally")&&e.onFinally({statusCode:f,header:c.getAllResponseHeaders(),data:c.response})},c.open(u,h,!0),t.config&&t.config.headers)for(var l in t.config.headers)"application/x-www-form-urlencoded"!==t.config.headers[l]&&c.setRequestHeader(l,t.config.headers[l]);if(t.config&&t.config.headers&&"application/x-www-form-urlencoded"===t.config.headers["Content-Type"]){var p=new FormData;return p.set("json_str",o),void c.send(p)}"string"==typeof t.data?c.send(t.data):c.send(o)}else a.info("url is empty",h,t)}}},R=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=k(t,e),a.info("wx request send data",t),F.request({url:t.config.url,method:t.config.method,header:t.config.headers,data:t.data,success:e.onSuccess,fail:e.onError,complete:e.onFinally})},O="";function N(){return"".concat(Pt.qapm,"/entrance/").concat(Tt.app_id,"/requestForPubKey/")}function q(t){return new Promise((function(e,r){if(""!==t){O=t;(F?R:C)({config:{headers:{},isPubkey:!0,method:"GET"}},{onSuccess:function(t){if(200===t.statusCode)try{var n=t.data;"string"==typeof t.data&&(n=JSON.parse(t.data)),_.setItem("QAPM_SM2_PUB_KEY",n.pub_key),e(n.pub_key)}catch(t){a.info("updateSm2PubKey",t),r(t)}}})}else a.info("qapmBaseUrl or pId is empty, updateSm2PubKey fail")}))}function L(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=_.readItem("QAPM_SM2_PUB_KEY");if(!r)return!1;"string"!=typeof t&&(t=JSON.stringify(t));var n=E()(ut()).substr(0,16),i=S.utils.stringToByteArrayInUtf8(n),o=E()(ut()).substr(0,16),s=S.utils.stringToByteArrayInUtf8(o),u={key:i,mode:"cbc",iv:s},h=new S.SM4(u),c="",f="";if(e){var l=Object(A.zip)(t);f=E()(l),c=h.encrypt(l)}else c=h.encrypt(t),f=E()(t);var p=new S.SM2,d=p.encrypt(r,i),g=function(t){1415===t.data.status&&q(),1507===t.data.status&&q(O),1508===t.data.status&&a.info(t),1509===t.data.status&&a.info(t)};return{encryptData:c,checkCode:f,encryptSm4Key:d,sm4Iv:o,encryptCallback:g}}var D=function(){return"undefined"!=typeof window&&(!!window&&(window.qapmBaseInfo?"ios":!!window.QAPMAndroidJsBridge&&"android"))},F=!D()&&("undefined"!=typeof wx?wx:"undefined"!=typeof qq&&qq);function U(){return(new Date).getTime()}function j(){return(new Date).toISOString()}var H=function(){try{if(F)return"android"===dt().platform;var t=window.navigator.userAgent;return t.indexOf("Android")>-1||t.indexOf("Adr")>-1}catch(t){return!1}},K=function(){if(F)return dt().brand;if("android"===D()||"ios"===D())return Tt.brand||Lt;var t=navigator.userAgent.split("(")[1].split(")")[0],e="",r=[/IPHONE/gi,/huawei/gi,/mi/gi,/vivo/gi,/OPPO/gi,/samsung/gi,/SONY/gi,/Nokia/gi,/HTC/gi,/ZTE/gi,/Lenovo/gi,/ZUK/gi];return r[0].test(t)?e="iPhone":r[1].test(t)?e="HUAWEI":r[2].test(t)?e="MI":r[3].test(t)?e="vivo":r[4].test(t)?e="OPPO":r[5].test(t)?e="SAMSUNG":r[6].test(t)?e="SONY":r[7].test(t)?e="Nokia":r[8].test(t)?e="HTC":r[9].test(t)?e="ZTE":r[10].test(t)||r[11].test(t)?e="Lenovo":H()&&(e="Android"),e||Lt},z=function(){if(F)return dt().model;if("android"===D()||"ios"===D())return Tt.model||Lt;var t=navigator.userAgent.toLowerCase();return/windows/.test(t)?"Windows pc":/iphone|ipod/.test(t)&&/mobile/.test(t)?"iPhone":/ipad/.test(t)&&/mobile/.test(t)?"iPad":/android/.test(t)&&/mobile/.test(t)?"Android":/linux/.test(t)?"Linux pc":/mac/.test(t)?"Mac":qt},J=function(){return F?"wx-mp":"web"},Q=function(){try{var t=window.navigator.userAgent,e=window.navigator.appVersion,r=Lt,n=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"android",r:/Android/},{s:"chromeos",r:/CrOS/},{s:"linux",r:/(Linux|X11(?!.*CrOS))/},{s:"ios",r:/(iPhone|iPad|iPod)/},{s:"osx",r:/Mac OS X/},{s:"macos",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"unix",r:/UNIX/}];for(var i in n){var o=n[i];if(o.r.test(t)){r=o.s;break}}var s=Lt;switch(/Windows/.test(r)&&(s=/Windows (.*)/.exec(r)[1],r="windows"),r){case"osx":s=/Mac OS X (10[\.\_\d]+)/.exec(t)[1];break;case"android":s=/Android ([\.\_\d]+)/.exec(t)[1];break;case"ios":s=/OS (\d+)_(\d+)_?(\d+)?/.exec(e),s="".concat(s[1],".").concat(s[2],".").concat(0|s[3])}return{os:r,osVersion:s}}catch(t){return{os:Lt,osVersion:Lt}}},W=function(){return F?dt().system.split(" ")[0].toLowerCase():"android"===D()||"ios"===D()?Tt.os||Lt:Q().os},Y=function(){return F?dt().system.split(" ")[1].toLowerCase():"android"===D()||"ios"===D()?Tt.osVer||Lt:Q().osVersion},G=function(){return F?qt:"android"===D()||"ios"===D()?Tt.isRoot||Lt:qt},V=function(){var t=_.readItem("QAPM_DEVICE_ID");return t||(t="".concat(ut(),"--").concat(U()),_.setItem("QAPM_DEVICE_ID",t)),t},Z=function(){if(F){var t=dt();return"".concat(parseInt(t.pixelRatio*t.windowWidth),",").concat(parseInt(t.pixelRatio*t.windowHeight))}return"".concat(parseInt(window.screen.width),",").concat(parseInt(window.screen.height))},X=function(){return window.performance||window.webkitPerformance||window.msPerformance||window.mozPerformance},$=0,tt=function(t){try{if(0===$){var e=X();$=e.timing.navigationStart}return 0===t?$:t+$<=0?0:Math.round(t+$)}catch(e){return a.error(e),t}},et=function(t,e,r){var n=t.toString(2),i=e.toString(2);n=new Array(54-n.length).join("0")+n,i=new Array(54-i.length).join("0")+i;for(var o="",s=0;s<53;s++)"AND"===r&&"1"===n[s]&&"1"===i[s]?o+="1":"OR"!==r||"1"!==n[s]&&"1"!==i[s]?o+="0":o+="1";return parseInt(o,2)},rt=function(t,e){return et(t,e,"AND")},nt=function(){var t=i()(s.a.mark((function t(e){var r,n,i,o,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!F){t.next=20;break}return t.next=3,wx.getNetworkType();case 3:if(r=t.sent,"unknown"!==(n=r&&r.networkType)){t.next=7;break}return t.abrupt("return","UnknownNetwork");case 7:if("none"!==n){t.next=9;break}return t.abrupt("return","NoNetwork");case 9:if("2g"!==n){t.next=11;break}return t.abrupt("return","2G");case 11:if("3g"!==n){t.next=13;break}return t.abrupt("return","3G");case 13:if("4g"!==n){t.next=15;break}return t.abrupt("return","4G");case 15:if("5g"!==n){t.next=17;break}return t.abrupt("return","5G");case 17:if("wifi"!==n){t.next=19;break}return t.abrupt("return","WIFI");case 19:return t.abrupt("return","NoNetwork");case 20:if("android"!==D()&&"ios"!==D()){t.next=22;break}return t.abrupt("return",Tt.netType||Lt);case 22:if(!ot().includes("Safari")){t.next=24;break}return t.abrupt("return","UnknownNetwork");case 24:if(navigator){t.next=26;break}return t.abrupt("return","NoNetwork");case 26:if(i=navigator.connection||navigator.mozConnection||navigator.webkitConnection||{effectiveType:void 0},o=i.type&&i.type.toLowerCase(),a=i.effectiveType&&i.effectiveType.toLowerCase(),"wifi"!==o&&"wifi"!==a){t.next=31;break}return t.abrupt("return","WIFI");case 31:if("slow-2g"!==a){t.next=33;break}return t.abrupt("return","2G");case 33:if("2g"!==a){t.next=35;break}return t.abrupt("return","2G");case 35:if("3g"!==a){t.next=37;break}return t.abrupt("return","3G");case 37:if("4g"!==a){t.next=39;break}return t.abrupt("return","4G");case 39:if("5g"!==a){t.next=41;break}return t.abrupt("return","5G");case 41:return t.abrupt("return","NoNetwork");case 42:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),it=function(){return F?qt:"android"===D()||"ios"===D()?Tt.netOp||Lt:qt},ot=function(){try{if(F)return qt;var t=navigator.userAgent.match(/(MSIE|(?!Gecko.+)Firefox|(?!AppleWebKit.+Chrome.+)Safari|(?!AppleWebKit.+)Chrome|AppleWebKit(?!.+Chrome|.+Safari)| Gecko(?!.+Firefox))(?: |\/)([\d\.apre]+)/);return t&&Array.isArray(t)&&t.length>=3&&"".concat(t[1])||Lt}catch(t){return Lt}},st=function(){try{if(F)return qt;var t=window.navigator.userAgent.match(/(MSIE|(?!Gecko.+)Firefox|(?!AppleWebKit.+Chrome.+)Safari|(?!AppleWebKit.+)Chrome|AppleWebKit(?!.+Chrome|.+Safari)|Gecko(?!.+Firefox))(?: |\/)([\d\.apre]+)/);return t&&Array.isArray(t)&&t.length>=3&&"".concat(t[2])||Lt}catch(t){return Lt}},at=function(){try{return navigator.userAgent}catch(t){return Lt}},ut=function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t)},ht=function(){return window.location.href},ct=function(){var t=ht();return Tt.getPageId(t)};function ft(){return+new Date}var lt,pt=function(t){return t instanceof Array?new Map(t.map((function(t){return[t,!0]}))):new Map},dt=function(){return F?(lt||(lt=F.getSystemInfoSync()),lt):{}},gt="",mt=function(){if(""===gt){var t=dt();gt=t.version}return gt},yt="",vt=function(){if(!F)return"";if(""===yt){var t=F.getLaunchOptionsSync();yt="".concat(t.scene)}return yt},wt=function(t,e){var r=t+t.slice(0,e-t.length%e),n=0;r.split("").map((function(t){n+=t.charCodeAt(0)}));for(var i="",o=0;o<e;o++){for(var s=0,a=0;a<r.length/e;a++)s=(33*(s+r.charCodeAt(a*e+o)^a)+n)%127;s=s%2==1?s%10+48:s%6+97,i+=String.fromCharCode(s)}return i},bt=function(t){return wt(t,8)+"-"+wt(t,4)+"-4"+wt(t,3)+"-a"+wt(t,6).slice(0,3)+"-"+wt(t,12)},_t=F&&dt().SDKVersion||"0.0.0";function St(t){var e={},r=["href","origin","protocol","host","hostname","port","pathname","search","hash"],n=/(([^:]+:)\/\/(([^:\/\?#]+)(:\d+)?))(\/[^?#]*)?(\?[^#]*)?(#.*)?/.exec(t);if(n)for(var i=r.length-1;i>=0;--i)e[r[i]]=n[i]?n[i]:"";return e}var Mt=function(){var t=_.readItem("QAPM_CUR_REPORT_INFO");if(a.info("getCurReportCount",t),!t)return 0;if("string"==typeof t)try{t=JSON.parse(t)}catch(t){return a.info(t),0}var e=new Date(t.time),r=new Date;return r.getFullYear()>e.getFullYear()||r.getMonth()>e.getMonth()||r.getDay()>e.getDay()?0:t.count||0}()||0;function Et(t){Mt=Mt+t||0,_.setItem("QAPM_CUR_REPORT_INFO",JSON.stringify({count:Mt,time:(new Date).getTime()}));var e=Mt>=500;return e&&a.info("greater than max report count pre day, can not upload"),e}var At=["1","2","3","4","5","6","7","8","9","0","q","w","e","r","t","y","u","i","o","p","a","s","d","f","g","h","j","k","l","z","x","c","v","b","n","m","[","]","{","}","#","%","^","*","+","=","_","\\","|","~","<",">","","","","","-","/",":",";","(",")","$","&","@",'"',".",",","?","!","'","`","Q","W","E","R","T","Y","U","I","O","P","A","S","D","F","G","H","J","K","L","Z","X","C","V","B","N","M"],Tt={app_key:"",app_id:"",device_id:"",user_id:"",build_id:"",version:"",ignoreClasses:[],ignoreIds:[],buckets:[],bucket:"",pubkey:"",exposeThreshold:500,exposeAreaThreshold:.5,allEventCallback:function(t){var e=t.view_text,r=t.tags&&t.tags.sd4;if(3===t.topic&&e){t.view_text=e.replace(/[\d]/gi,"*"),1===e.length&&-1!==At.indexOf(e)&&(t.view_text="*")}if(3===t.topic&&r){t.tags.sd4=r.replace(/[\d]/gi,"*"),1===r.length&&-1!==At.indexOf(r)&&(t.tags.sd4="*")}return t},domLengthThreshold:10,TOKEN:"",netType:"",netOp:"",model:"",isRoot:qt,channel_open:"",channel_install:"",os:"",osVer:"",brand:"",excludeUrlReg:[/entrance/,/appconfig\/v7/],getPageId:function(t){if(!t)return t;var e=t.split("?");return e&&Array.isArray(e)&&e.length>=1?e[0]:t},collectReqBody:!1,collectRespBody:!1,allowHeaders:[],billingId:"",launchTimeThreshold:0,localDNS:[],isOpenTrace:!1},xt={SWITCH:0,ALL:{},UBS:{},USR:{},NETWORK:{},LAUNCH:{},JSERROR:{}},kt={SWITCH:0,ALL:{},UBS:{},USR:{},NETWORK:{},PAGE:{},LAUNCH:{},JSERROR:{}},Pt={qapm:"https://ten.sngapm.qq.com",appconfig:"https://ten.sngapm.qq.com"},Bt=function(t,e){return"".concat(Pt.qapm,"/entrance/v1/uploadData/?app_id=").concat(Tt.app_id,"&plugin=").concat(t,"&data_num=").concat(e)},It=function(t,e){return"".concat(Pt.qapm,"/entrance/v3/uploadData/?app_id=").concat(Tt.app_id,"&plugin=").concat(t,"&data_num=").concat(e,"&needDecode=1")},Ct=function(t,e,r,n){return"".concat(Pt.qapm,"/entrance/v4/uploadData/json/?app_id=").concat(Tt.app_id,"&plugin=").concat(t,"&data_num=").concat(e,"&iv=").concat(r,"&key=").concat(n,"&needDecode=1&format=2")},Rt=function(){return"".concat(Pt.appconfig,"/appconfig/v7/config/").concat(Tt.app_id,"/")},Ot=function(){var t=Pt.athena||Pt.qapm;return"".concat(t,"/entrance/athena/uploadJson/").concat(Tt.app_id,"/").concat(Tt.version,"/?format=2&user_id=").concat(Tt.user_id)},Nt=function(t,e){var r=Pt.athena||Pt.qapm;return"".concat(r,"/entrance/athena/uploadEncryptedJson/").concat(Tt.app_id,"/").concat(Tt.version,"/?format=2&user_id=").concat(Tt.user_id,"&iv=").concat(t,"&key=").concat(e,"&needDecode=1")},qt="unsupported",Lt="unknown",Dt=function(t){var e=t.category,r=t.plugin,n=t.needTranslate;return{app_id:Tt.app_id,ab_factor:qt,device_id:Tt.device_id,user_id:Tt.user_id,build_id:Tt.build_id,version:Tt.version,arch:"android"===D()||"ios"===D()?Tt.arch||Lt:qt,sdk_ver:u.a,platform:J(),distribute_channel:"android"===D()||"ios"===D()?Tt.distribute_channel||Lt:qt,id:ut(),model:z(),brand:K(),os_ver:Y(),is_root:G(),os:W(),category:e,plugin:r,need_translate:n,ext2:Tt.billingId}},Ft=function(){var t=i()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Tt.app_id,t.t1=Tt.version,t.t2=Tt.device_id,t.t3=Z(),t.t4=G(),t.t5=qt,t.t6=Tt.user_id,t.t7=Tt.build_id,t.t8=Tt.bucket,t.t9=Tt.buckets,t.t10=z(),t.t11=Y(),t.t12=J(),t.t13=u.a,t.t14=K(),t.t15=W(),t.t16=it(),t.next=19,nt();case 19:return t.t17=t.sent,t.t18="android"===D()||"ios"===D()?Tt.channel_open||Lt:qt,t.t19="android"===D()||"ios"===D()?Tt.channel_install||Lt:qt,t.t20={platform:t.t12,sdk_ver:t.t13,brand:t.t14,os:t.t15,net_op:t.t16,net_type:t.t17,channel_open:t.t18,channel_install:t.t19},t.abrupt("return",{app_id:t.t0,version:t.t1,device_id:t.t2,display:t.t3,is_root:t.t4,ab_factor:t.t5,user_id:t.t6,build_id:t.t7,bucket:t.t8,buckets:t.t9,flag:0,model:t.t10,os:t.t11,app:t.t20});case 24:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Ut=function(){var t=getCurrentPages();return Array.isArray(t)&&t.length>0?t[t.length-1]:{}},jt=function(){var t=Ut(),e=t&&t.route||"",r=t.options,n="".concat(e,"?");if(r){for(var i in r){var o=r[i];n+="".concat(i,"=").concat(o,"&")}return n=n.substring(0,n.length-1)}return e},Ht=function(){var t=Ut();return t&&t.route||""},Kt=function(){return Ht()},zt=[];function Jt(t){var e=t.category,r=t.tags,n=void 0===r?{}:r,i=t.values,o=void 0===i?{}:i,s=t.label,u=void 0===s?"":s,h=t.value,c=void 0===h?0:h,f=t.action,l=void 0===f?"":f;a.info("customEvent",t);try{var p={};if("APP_LAUNCH"!==e&&"PERF_"!==e.substr(0,5)&&(e="CUSTOM_".concat(e)),p.id=ut(),p.time=j(),p.topic=7,p.extra="",p.category=e,p.action=l||"",p.label=u||"",p.value=c||0,p.tags=Object.assign({},p.tags,n),p.tags.sd3=Tt.billingId,p.values=Object.assign({},p.values,o),!1===Vt(p=Zt(p)))return;return zt.push(p),p}catch(p){a.error(p)}}function Qt(t){return Wt.apply(this,arguments)}function Wt(){return(Wt=i()(s.a.mark((function t(e){var r,n,i,o=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>1&&void 0!==o[1]&&o[1],t.prev=1,(n={tags:e.tags||{},values:e.values||{}}).id=ut(),n.time=j(),n.topic=4,n.pre_page_id=e.prePageId,n.pre_page=e.prePageUrl,n.page_id=e.curPageId,n.page=e.curPageUrl,n.pre_page_start=e.prePageStart,n.pre_page_end=e.prePageEnd,n.page_start=e.curPageStart,n.tags.d5=F?vt():document.referrer,n.tags.d6=F?mt():qt,t.next=17,nt();case 17:if(n.tags.d9=t.sent,n.tags.d10=it(),n.tags.sd3=Tt.billingId,i=Zt(n),!1!==Vt(n=i)){t.next=24;break}return t.abrupt("return");case 24:a.info("pageChangeEvent",n),zt.push(n),r&&Xt(),t.next=32;break;case 29:t.prev=29,t.t0=t.catch(1),a.error(t.t0);case 32:case"end":return t.stop()}}),t,null,[[1,29]])})))).apply(this,arguments)}function Yt(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Jt(t),e&&Xt()}function Gt(t){a.info(t),t.tags=t.tags||{},t.id=ut(),t.id=ut(),t.topic=3,t.time=j(),t.tags.d11=F?vt():document.referrer,t.tags.d12=F?mt():qt,t.tags.sd3=Tt.billingId,t=Zt(t),D()?(!0===Tt.isReleasePackage||(t.tags.sd4=t.view_text),t.view_text=E()(t.view_text)):t.view_text="",!1!==Vt(t)&&zt.push(t)}function Vt(t){var e=t.category,r=t.tags,n=t.values;if(7===t.topic&&!e)return a.info("category MUST set"),!1;for(var i in r)if("string"!=typeof r[i])return a.info("qapmCustomTrack error, tags value is not string",r),!1;for(var o in n)if("number"!=typeof n[o])return a.error("qapmCustomTrack error, values value is not number",n),!1;return!0}function Zt(t){var e=Tt.allEventCallback;return window&&window.qapmEventCallback&&"function"==typeof window.qapmEventCallback&&(e=window.qapmEventCallback),e(t)}function Xt(){return $t.apply(this,arguments)}function $t(){return($t=i()(s.a.mark((function t(){var e,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==zt.length){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Ft();case 4:if(t.t0=t.sent,t.t1=zt,e={meta:t.t0,events:t.t1},!Et(zt.length)){t.next=9;break}return t.abrupt("return");case 9:r={config:{headers:{"Content-Type":"application/json"},isEncrypt:"true"===(xt&&xt.UBS&&xt.UBS.is_encryption)||!1,method:"POST",isUBS:!0},data:e},a.info("uploadEvent",r),F?R(r,{}):C(r,{}),zt=[];case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function te(){0!==zt.length&&_.setItem("QAPM_EVENT_LIST",JSON.stringify(zt))}function ee(){if(setInterval((function(){Xt()}),6e4),!F){var t="onpagehide"in self?"pagehide":"unload";D()?window.addEventListener(t,Xt):(window.addEventListener(t,te),setTimeout((function(){zt=JSON.parse(_.readItem("QAPM_EVENT_LIST"))||[],a.info("eventInit upload eventList from storage",zt),Xt(),_.removeItem("QAPM_EVENT_LIST")}),2e3))}}var re=Array(32);function ne(t){return function(){for(var e=0;e<2*t;e++)re[e]=Math.floor(16*Math.random())+48,re[e]>=58&&(re[e]+=39);return String.fromCharCode.apply(null,re.slice(0,2*t))}}var ie={generateTraceID:ne(16),generateSpanID:ne(8)};var oe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",se=function(t){for(var e,r,n,i,o="",s=0,a=(t=String(t)).length%3;s<t.length;){if((r=t.charCodeAt(s++))>255||(n=t.charCodeAt(s++))>255||(i=t.charCodeAt(s++))>255)throw new TypeError("Failed to execute 'btoa': The string to be encoded contains characters outside of the Latin1 range.");o+=oe.charAt((e=r<<16|n<<8|i)>>18&63)+oe.charAt(e>>12&63)+oe.charAt(e>>6&63)+oe.charAt(63&e)}return a?o.slice(0,a-3)+"===".substring(a):o};var ae=function(t,e,r,n){return t||(t={}),t.sw8=t.sw8?t.sw8:function(t){var e="function"==typeof btoa?btoa:se,r=t||{},n=r.host,i=void 0===n?"":n,o=r.pathname,s=void 0===o?"":o,a=r.traceID,u=ie.generateTraceID(),h=a,c=String(e(u)),f=String(e("QAPM")),l=String(e(Tt.version)),p=String(e(encodeURI(s))),d=String(e(i));return"".concat(1,"-",h,"-").concat(c,"-",1,"-").concat(f,"-").concat(l,"-").concat(p,"-").concat(d)}({host:r,pathname:n,traceID:e}),t.traceparent=t.traceparent?t.traceparent:function(t){var e=ie.generateSpanID();return"00-".concat(t,"-").concat(e,"-01")}(e),t},ue=function(t){return Tt.isOpenTrace&&!function(t){var e=St(t).host,r=e&&Pt.qapm.includes(e);return a.info("isQAPMURL",r,e,Pt.qapm,t),r}(t)},he=window&&window.fetch,ce=!1,fe=!1,le=[],pe={},de={},ge=["age","allow","accept-ch","accept-ch-lifetime","cache-control","connection","","content-encoding","content-language","content-length","content-location","content-range","content-security-policy-report-only","content-security-policy","content-type","date","device-memory","digest","dnt","dpr","ect","etag","expect-ct","expect","expires","feature-policy","forwarded","host","if-match","if-modified-since","if-none-match","if-range","if-unmodified-since","keep-alive","large-allocation","last-modified","link","location","nel","origin","proxy-authenticate","permissions-policy","range","referer","referrer-policy","retry-after","save-data","server-timing","server","service-worker-navigation-preload","strict-transport-security","te","timing-allow-origin","tk","trailer","transfer-encoding","upgrade-insecure-requests","upgrade","user-agent","vary","via","want-digest","x-content-type-options","x-dns-prefetch-control","x-forwarded-for","x-forwarded-host","x-forwarded-proto","x-frame-options","x-xss-protection","EO_LOG_UUID","sw8","traceparent","Access-Control-Allow-Origin"],me=function(){return"ios"===D()?54:"android"===D()?154:F?242:342};function ye(t){return Tt.excludeUrlReg.some((function(e){return e.test(t)}))}function ve(t){return!t||(t>=400||-1===t)}function we(t,e){return e>51200&&e/(t/1e3)<10240||e<=51200&&t>2e3}function be(t){if("string"==typeof t){var e=t.trim().split(/[\r\n]+/),r={};return e.forEach((function(t){var e=t.split(": "),n=e.shift(),i=e.join(": ");r[n]=i})),r}return"object"===d()(t)?t:{}}function _e(t){var e={},r=function(){var r=n.toLowerCase(),i=ge.find((function(t){return t===r})),o=Tt.allowHeaders.find((function(t){return t===r}));(i||o)&&(e[r]=t[n])};for(var n in t)r();return e}function Se(t,e,r){var n=y(e)+y(t);return F&&r.profile&&r.profile.sendBytesCount||n}function Me(t,e,r,n){var i=y(r)+y(t)+y(n);return F&&r.profile&&r.profile.receivedBytedCount||i}function Ee(t,e){return F?function(t){if(t&&t.profile){var e=t.profile;return{redirect_start:e.redirectStart,redirect_end:e.redirectEnd,fetch_start:e.fetchStart,start_time:e.fetchStart,dns_start:e.domainLookupStart,dns_end:e.domainLookupEnd,conn_start:e.connectStart,conn_end:e.connectEnd,ssl_conn_end:e.SSLconnectionEnd,ssl_conn_start:e.SSLconnectionStart,req_start:e.requestStart,req_end:e.requestEnd,resp_start:e.responseStart,resp_end:e.responseEnd,end_time:e.responseEnd,rtt:e.rtt,peer_ip:e.peerIP,port:e.port,socket_reused:e.socketReused,estimate_nettype:e.estimate_nettype,http_rtt_estimate:e.httpRttEstimate,transport_rtt_estimate:e.transportRttEstimate,downstream_throughput_kbps_estimate:e.downstreamThroughputKbpsEstimate,throughput_kbps:e.throughputKbps}}}(e):function(t){try{var e=performance.getEntriesByName(t),r=e[e.length-1];if(!r)return;return{redirect_start:tt(r.redirectStart),redirect_end:tt(r.redirectEnd),start_time:tt(r.fetchStart),dns_start:tt(r.domainLookupStart),dns_end:tt(r.domainLookupEnd),conn_start:tt(r.connectStart),conn_end:tt(r.connectEnd),ssl_conn_end:tt(r.connectEnd),ssl_conn_start:tt(r.secureConnectionStart),req_start:tt(r.requestStart),req_end:tt(r.responseStart),resp_start:tt(r.responseStart),resp_end:tt(r.responseEnd),end_time:tt(r.responseEnd)}}catch(t){return void a.info(t)}}(t)}function Ae(t){return Te.apply(this,arguments)}function Te(){return(Te=i()(s.a.mark((function t(e){var r,n,i,o,u,h,c,f,l,p,d,g,m,y,v,w,b,_,S,M,E,A,T,x,k,P,B,I,C;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.id,n=e.method,i=e.req,o=e.res,u=e.startTime,h=e.errorType,c=e.traceID,f=e.url,l=e.httpStatus,!ye(f)){t.next=4;break}return t.abrupt("return");case 4:if(f){t.next=6;break}return t.abrupt("return");case 6:f=decodeURI(f),p=e.respHeaders,d=e.reqHeaders,a.info("debug onRequestComplete",r,n,f,l,i,o,p,d,h,c),"abort"===h?l=905:"timeout"===h?l=903:"error"===h&&(l=902),g=U(),(m=Ee(f,o))||(m={}),d=be(d),p=be(p),d=_e(d),p=_e(p),y=Se(f,i,o),v=Me(f,0,o,p),w=m.end_time-m.start_time||g-u,b="",_="";try{S=St(f),M=S.host,""===(E=S.pathname)&&(E="/"),b=M,_=M+E}catch(t){b=f,_=f}if(""!==b&&""!==_){t.next=25;break}return t.abrupt("return");case 25:return A=we(w,v)?"true":"false",T=ve(l)?"true":"false",t.next=29,nt(o);case 29:x=t.sent,k=qt,F&&m.peer_ip&&m.port&&(k="".concat(m.peer_ip,":").concat(m.port));try{if("true"===A||"true"===T){if(P={protocol:"http",url:f,browser:ot(),browser_ver:st(),referrer:F?vt():document.referrer,cost:w,method:n,status_code:l||-1,bytes_sent:y,bytes_received:v,host_ip:k,conn_start:m.conn_start||0,conn_end:m.conn_end||0,dns_start:m.dns_start||0,dns_end:m.dns_end||0,req_start:m.req_start||0,req_end:m.req_end||0,resp_start:m.resp_start||0,resp_end:m.resp_end||0,start_time:m.start_time||u,end_time:m.end_time||g,redirect_start:m.redirect_start||0,redirect_end:m.redirect_end||0,ssl_conn_end:m.ssl_conn_end||0,ssl_conn_start:m.ssl_conn_start||0,req_headers:d,resp_headers:p,req:Tt.collectReqBody?i:{},res:Tt.collectRespBody?o:{},errorType:h||"",eo_log_uuid:p.EO_LOG_UUID||"unavailable",local_dns_service:qt},Array.isArray(Tt.localDNS)&&Tt.localDNS.length>0)try{B=JSON.parse(Tt.localDNS),P.local_dns_service=B}catch(t){a.info("localDNS parse error",t)}ue(f)&&c&&(P.tapm_trace_id=c),F&&(P=Object.assign({},P,{wx_version:mt(),estimate_nettype:m.estimate_nettype||0,http_rtt_estimate:m.http_rtt_estimate||0,transport_rtt_estimate:m.transport_rtt_estimate||0,downstream_throughput_kbps_estimate:m.downstream_throughput_kbps_estimate||0,throughput_kbps:m.throughput_kbps||0})),I={id:r,time:u,page_id:F?Ht():ct(),battery_level:-1,net_type:x,net_op:it(),service_data:JSON.stringify(P)},le.push(I)}C={category:"PERF_NET_REQUEST",tags:{d1:_||"",d2:b||"",d3:"http",d4:T,d5:"false",d6:A,d7:it(),d8:qt,d9:x,d10:qt,d11:qt,d12:k,d13:(l||-1).toString(),d14:J(),d15:F?vt():document.referrer,d16:ot(),d17:st(),d18:F?Ht():ct(),d20:F&&m.protocol||qt,d21:F?mt():qt,d22:f,d26:p.EO_LOG_UUID||"unavailable"},values:{v1:w,v2:y,v3:v,v4:m.dns_end-m.dns_start||0,v5:m.conn_end-m.conn_start||0,v6:m.ssl_conn_end-m.ssl_conn_start||0,v7:m.redirect_end-m.redirect_start||0,v8:m.req_end-m.req_start||0,v9:m.resp_end-m.resp_start>6e5?0:m.resp_end-m.resp_start||0,v10:m.rtt||0,v11:m.http_rtt_estimate||0,v12:m.transport_rtt_estimate||0,v13:m.downstream_throughput_kbps_estimate||0,v14:m.throughput_kbps||0}},ue(f)&&c&&(C.tags.d24=c),Yt(C)}catch(t){a.error("upload network data error:",t)}case 33:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function xe(){!function(){var t=wx.request;try{Object.defineProperty(F,"request",{configurable:!0,enumerable:!0,writable:!0,value:function(){try{a.info("hook wx request",arguments[0].url);var e=arguments[0]||{},r=ut(),n=U(),i=e.header||{},o=e.complete;e.complete=function(t){var s=t.header,u={id:r,startTime:n,method:e.method||"GET",url:e.url,httpStatus:t.statusCode,req:e,res:t,respHeaders:s,reqHeaders:i};if(a.info("hookwxrequest",u),Ae(u),o)return o.apply(this,arguments)}}catch(t){a.error("hook wx request error",t)}finally{return t.apply(this,arguments)}}})}catch(e){a.error("hook wx request error",e),wx.request=t}}()}function ke(){!function(){if(!0!==fe&&window.XMLHttpRequest){fe=!0;try{var t=pe;t.xhrOpen||(t.xhrSend=XMLHttpRequest.prototype.send,t.xhrSetRequestHeader=XMLHttpRequest.prototype.setRequestHeader,XMLHttpRequest.prototype.send=function(){if(t.sendArguments=arguments[0],ue(this.url)){var e=ie.generateTraceID();this.traceID=e;var r=new URL(location.href).host,n=location.pathname;this.reqeustHeaders=ae(this.reqeustHeaders,e,r,n),this.setRequestHeader("sw8",this.reqeustHeaders.sw8),this.setRequestHeader("traceparent",this.reqeustHeaders.traceparent)}t.xhrSend.apply(this,arguments)},t.xhrOpen=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.setRequestHeader=function(e,r){t.xhrSetRequestHeader.apply(this,arguments),this.reqeustHeaders||(this.reqeustHeaders={}),this.reqeustHeaders[e]?"sw8"===e||"traceparent"===e?this.reqeustHeaders[e]=r:this.reqeustHeaders[e]+=";".concat(r):this.reqeustHeaders[e]=r},XMLHttpRequest.prototype.open=function(e,r){this.url=r;var n=ut(),i=U();this.addEventListener("loadend",(function(){var o=this.getAllResponseHeaders()||{},s=this.reqeustHeaders;r.match(/^(https?:)?\/\/([^\/]+)/)||(r="/"===r[0]?window.location.origin+r:"".concat(window.location.origin,"/").concat(r));var a={id:n,startTime:i,method:e||"GET",url:r,httpStatus:this.status,req:t.sendArguments,res:this.responseText,respHeaders:o,reqHeaders:s,errorType:this.errorType||""};ue(this.url)&&(a.traceID=this.traceID),Ae(a)})),this.addEventListener("error",(function(){this.errorType="error"})),this.addEventListener("timeout",(function(){this.errorType="timeout"})),this.addEventListener("abort",(function(){this.errorType="abort"})),t.xhrOpen.apply(this,arguments)})}catch(t){a.info(t)}}}(),function(){if(!0!==ce&&window.fetch){ce=!0;try{var t=de;Object.defineProperty(window,"fetch",{configurable:!0,enumerable:!0,writable:!0,value:(e=i()(s.a.mark((function e(r,n){var i,o,u,h,c,f;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n||(n={}),n.headers||(n.headers={}),a.info("debug hookFetch url",r,n),i=ut(),o=U(),t.sendArguments=n,u="",ue(r)&&(u=ie.generateTraceID(),h=St(r),c=h.host,f=h.pathname,n.headers=ae(n.headers,u,c,f)),he(r,n).then((function(e){var s=n.headers||{},a="chunked"===e.headers.get("Transfer-Encoding"),h={id:i,startTime:o,method:n&&n.method||"GET",url:e.url,httpStatus:e.status,req:t.sendArgumentss,res:"",respHeaders:e.headers||{},reqHeaders:s,errorType:""};if(ue(r)&&(h.traceID=u),a){var c=e.body.getReader(),f=new TextDecoder,l=[];return function t(){return c.read().then((function(r){var n=r.done,i=r.value;return n?(h.res=l.join(""),Ae(h),e):(l.push(f.decode(i)),t())}))}()}return e.text().then((function(t){return h.res=t,Ae(h),e}))})).catch((function(t){throw t}));case 9:case"end":return e.stop()}}),e)}))),function(t,r){return e.apply(this,arguments)})})}catch(t){a.info(t)}var e}}()}function Pe(){if(0!==le.length&&!Et(le.length)){var t={meta:Dt({category:"PERF_NET_REQUEST",plugin:me(),needTranslate:"false"}),data:le},e={config:{headers:{"Content-Type":"application/x-www-form-urlencoded"},isEncrypt:xt&&xt.NETWORK&&"true"===xt.NETWORK.is_encryption||!1,dataLength:le.length,plugin:me(),method:"POST",isQAPM:!0},data:t};F?R(e,{}):C(e,{}),le=[]}}function Be(){0!==le.length&&_.setItem("QAPM_REQUEST_LIST",JSON.stringify(le))}function Ie(){if(F?xe():ke(),setInterval((function(){Pe()}),6e4),!F){var t="onpagehide"in self?"pagehide":"unload";D()?window.addEventListener(t,Pe):(window.addEventListener(t,Be),setTimeout((function(){le=JSON.parse(_.readItem("QAPM_REQUEST_LIST"))||[],Pe(),_.removeItem("QAPM_REQUEST_LIST")}),2e3))}}var Ce={logLevel:"debug",levelMap:{debug:1,info:2,log:3,warn:4,error:5,none:6},enableLogLevel:function(t){var e=this.levelMap[t];if(null==e)return!1;var r=this.levelMap[this.logLevel];return null!=t&&e>=r}};function Re(t,e,r){e&&Object.keys(r).forEach((function(n){var i=e[n];if(m(i)||"onerror"===t){var o=null;e[n]=function(){if(m(r[n])){try{r[n].apply(this,arguments)}catch(t){}if(m(i))return i.apply(this,arguments)}else if(m(r[n].before)&&m(r[n].after)){try{var t=this;r[n].before.apply(this,[t].concat(Array.prototype.slice.call(arguments)))}catch(t){}m(i)&&(o=i.apply(this,arguments));try{r[n].after.apply(this,arguments)}catch(t){}return o}}}}))}function Oe(t,e,r){e&&Object.keys(e).filter((function(t){return m(e[t])})).forEach((function(n){var i=e[n];e[n]=function(){try{r.apply(this,[n].concat(Array.prototype.slice.call(arguments)))}catch(e){Ce.error("hookAllMethods, exec hook method ".concat(n," of obj ").concat(t," raise exception"),e)}if(i)return i.apply(this,arguments)}}))}["debug","info","log","warn","error"].map((function(t){Ce[t]=function(){if(this.enableLogLevel(t)){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];(e=console)[t].apply(e,["QAPM, track-js,"].concat(n))}}}));var Ne=[],qe=function(){return F?243:"android"===D()?143:"ios"===D()?43:343};function Le(){!function(){var t={onError:function(t){De("MpError",t)}},e=this&&this.global&&this.global.App||App;try{var r=function(r){try{v(r,t),Re("App",r,t)}catch(t){a.error("hook App error",t)}finally{return e.apply(this,arguments)}};this&&this.global&&this.global.App?global.App=r:App=r}catch(t){return a.info("hook App error",t),this&&this.global&&this.global.App&&(global.App=newApp),void(App=e)}}(),F.onUnhandledRejection&&F.onUnhandledRejection((function(t){De("PromiseError",t)}))}function De(t,e){return Fe.apply(this,arguments)}function Fe(){return(Fe=i()(s.a.mark((function t(e,r){var n,i,o,u,h;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n="",i="",o="",u=[];try{"WebError"===e?(o=r[4].stack,u=r[4].stack.split("\n"),n=r[0].split(":")[0],i=r[0].split(":").slice(1).join(""),(u[0].includes(n)||u[0].includes(i))&&u.shift()):"MpError"===e?(o=r,u=r.split("\n"),n=u[2].split(":")[0],i=u[2].split(":").slice(1).join("")):"PromiseError"===e?(o=r.reason.stack?r.reason.stack:r.reason,u=r.reason.stack?r.reason.stack.split("\n"):[r.reason],n="PromiseError",i=qt):"VueError"===e?(o=r.stack,u=r.stack.split("\n"),n=u[0].split(":")[0],i=r.message):(o=r.toString(),u[0]=r.toString(),n="Error",i=r.toString())}catch(t){n="Error",i="",u[0]=JSON.stringify(r)}return u.forEach((function(t,e){return u[e]=t&&t.trim&&t.trim()||t})),h={browser:ot(),browser_ver:st(),error_type:n,error_value:i,referrer:F?vt():document.referrer,stack:{time_slices:[{threads:[{frame:{calls:u}}]}]}},F&&(h=Object.assign({},h,{wx_version:mt()})),t.t0=Yt,t.t1=F?Ht():ct(),t.t2=n,t.t3=i,t.t4=o&&o.toString().substring(0,64)||"",t.t5=F?mt():qt,t.t6=it(),t.t7=qt,t.next=18,nt({});case 18:return t.t8=t.sent,t.t9=ot(),t.t10=st(),t.t11=o&&o.toString()||"",t.t12={d1:t.t1,d2:t.t2,d3:t.t3,d4:t.t4,d5:t.t5,d7:t.t6,d8:t.t7,d9:t.t8,d10:t.t9,d11:t.t10,info1:t.t11},t.t13={category:"PERF_JS_ERROR",tags:t.t12},(0,t.t0)(t.t13),a.info("formated stack",h),t.t14=Ne,t.t15=ut(),t.t16=U(),t.t17=F?Ht():ct(),t.t18=-1,t.next=33,nt({});case 33:t.t19=t.sent,t.t20=it(),t.t21=JSON.stringify(h),t.t22={id:t.t15,time:t.t16,page_id:t.t17,battery_level:t.t18,net_type:t.t19,net_op:t.t20,service_data:t.t21},t.t14.push.call(t.t14,t.t22);case 38:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ue(){if(!Et(He.length)&&0!==Ne.length){var t={meta:Dt({plugin:qe(),needTranslate:"true",category:"PERF_JS_ERROR"}),data:Ne},e={config:{headers:{"Content-Type":"application/x-www-form-urlencoded"},isEncrypt:xt&&xt.JSERROR&&"true"===xt.JSERROR.is_encryption||!1,dataLength:Ne.length,plugin:qe(),method:"POST",isQAPM:!0},data:t};F?R(e,{}):C(e,{}),Ne=[]}}function je(){0!==Ne.length&&_.setItem("QAPM_JSERROR_LIST",JSON.stringify(Ne))}function He(){if(F?Le():function(){var t=this;if(window.Vue){a.info("hookVueError");var e=window.Vue.config.errorHandler;window.Vue.config.errorHandler=function(r,n,i){a.info("hookVueError errorHandler",r,n,i),"function"==typeof e&&e.call(t,r,n,i),De("VueError",r)}}var r=window.onerror;window.onerror=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];De("WebError",e),r&&r.call.apply(r,[window].concat(e))},window.addEventListener("unhandledrejection",(function(t){De("PromiseError",t)}))}(),setInterval((function(){Ue()}),6e4),!F){var t="onpagehide"in self?"pagehide":"unload";D()?window.addEventListener(t,Ue):(window.addEventListener(t,je),setTimeout((function(){Ne=JSON.parse(_.readItem("QAPM_JSERROR_LIST"))||[],Ue(),_.removeItem("QAPM_JSERROR_LIST")}),2e3))}}var Ke=r(36),ze=r.n(Ke),Je={isAppOnHide:!1,on_launch:{start_time:0,end_time:0},on_show:{start_time:0,end_time:0},on_hide:{start_time:0,end_time:0}};function Qe(t,e,r){return e>Tt.launchTimeThreshold?"true":"WARM"===t?e>500?"true":"false":e>(H()?r?3700:2600:r?1800:1200)?"true":"false"}var We=Ye();function Ye(){return{category:"PERF_MP_LAUNCH",tags:{d1:"COLD",d2:vt(),d3:"false",d4:"SUCCESS",d5:_t,d6:qt,d7:mt(),d8:"false",d9:"",d10:"",d11:"",d12:"",info1:""},values:{v1:0,v2:0,v3:0,v4:0,v5:0,v6:0,v7:0,v8:0,v9:0,v10:0,v11:0,v12:0,v13:0,v14:0,v15:0,v16:0,v17:0,v18:0,v19:0,v20:0,v21:0,v22:0,v23:0,v24:0,v25:0,v26:0,v27:0,v28:0,v29:0,v30:0,v31:0,v32:0}}}function Ge(){a.info("miniLaunchInit"),F&&(!function(){var t={onLaunch:{before:function(){Je.on_launch.start_time=U(),We.values.v16=Je.on_launch.start_time},after:function(){Je.on_launch.end_time=U(),We.values.v17=Je.on_launch.end_time}},onShow:{before:function(){Je.on_show.start_time=U(),We.values.v18=Je.on_show.start_time},after:function(){Je.on_show.end_time=U(),We.values.v19=Je.on_show.end_time,0===We.values.v12&&(We.values.v12=Je.on_show.end_time)}},onHide:{before:function(){Je.on_hide.start_time=U()},after:function(){Je.on_hide.end_time=U(),Je.isAppOnHide=!0,We=Ye()}}},e=this&&this.global&&this.global.App||App;try{var r=this&&this.global&&this.global.App||App,n=function(e){try{v(e,t),Re("App",e,t)}catch(t){a.error("hook App error",t)}finally{return r.apply(this,arguments)}};this&&this.global&&this.global.App?global.App=n:App=n}catch(t){return a.info("hook App error",t),this&&this.global&&this.global.App&&(global.App=newApp),void(App=e)}}(),F.getPerformance().createObserver((function(t){a.info("getLaunchPerformance entrytype",t.getEntries());var e=t.getEntriesByName("firstRender","render")||[],r=t.getEntriesByName("firstPaint","render")||[],n=t.getEntriesByName("firstContentfulPaint","render")||[],i=t.getEntriesByName("largestContentfulPaint","render")||[],o=t.getEntriesByName("evaluateScript","script")||[],s=t.getEntriesByName("appLaunch","navigation")||[],u=t.getEntriesByName("route","navigation")||[],h=t.getEntriesByName("downloadPackage","loadPackage")||[];if(s.length>0){a.info("getLaunchPerformance appLaunch.length > 0");var c=s[0],f=c.startTime,l=c.duration;if(We.values.v1=l,We.values.v2=f,We.values.v3=f+l,We.values.v11=f,e.length>0){var p=e[0],d=p.startTime,g=p.duration;We.values.v4=d,We.values.v5=d+g}if(r.length>0){var m=r[0].startTime;We.values.v6=m}if(n.length>0){var y=n[0].startTime;We.values.v7=y}if(i.length>0){var v=i[0].startTime;We.values.v8=v}if(o.length>0){var w=o[0],b=w.startTime,_=w.duration,S=w.fileList;We.values.v9=b,We.values.v10=b+_,We.tags.info1=JSON.stringify(S)}if(h.length>0){var M=h[0],E=M.startTime,A=M.duration,T=M.packageName,x=M.packageSize;"APP"===T||"__APP__"===T?(We.tags.d8="true",We.tags.d10=T,We.values.v13=E,We.values.v14=E+A,We.values.v15=x,We.tags.d3=Qe("COLD",l,!0)):We.tags.d3=Qe("COLD",l,!1)}else We.tags.d3=Qe("COLD",l,!1);if(u.length>0){var k=u[0],P=k.navigationStart,B=k.duration;We.values.v20=P,We.values.v21=P+B,We.values.v12=P}}})).observe({entryTypes:["render","script","navigation","loadPackage","resource"]}))}function Ve(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ze(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ve(Object(r),!0).forEach((function(e){ze()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ve(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Xe={customState:"stop",prePageUrl:"",prePageId:"",prePageStart:j(),prePageEnd:j(),curPageUrl:"_background_",curPageId:"_background_",curPageStart:j()},$e={isFirstPageInit:!1,isFirstPageReady:!1,firstInitTime:0,firstReadyTime:0,page:""},tr={},er=[],rr={on_load:{start_time:0,end_time:0},on_ready:{start_time:0,end_time:0},on_show:{start_time:0,end_time:0},on_hide:{start_time:0,end_time:0},on_unload:{start_time:0,end_time:0}},nr=function(){if(F)return 288};function ir(){var t,e;!function(){var t={onLoad:{before:function(t){if(function(t){if(!t||!t.setData)return void a.error("hook set data fail",t);var e=t.setData;try{if(t.setUpdatePerformanceListener)t.setUpdatePerformanceListener({withDataPaths:!0},(function(t){or(t.dataPaths||{},t.pendingStartTimestamp,t.updateEndTimestamp)}));else{var r=t.setData;t.setData=function(){var e=arguments[1],n=U(),i=arguments[0];function o(){var r=U();return or(i,n,r),e&&e.apply(t,arguments)}return r.call(t,i,o)}}}catch(r){a.error("hook setdata error",r),t.setData=e}}(t),$e.isFirstPageInit){rr.on_load.start_time=U();var e=Ut().__wxWebviewId__;tr[e]={initTime:U()}}else $e.firstInitTime=U(),We.values.v22=$e.firstInitTime},after:function(){rr.on_load.end_time=U(),$e.isFirstPageInit||(We.values.v23=rr.on_load.end_time)}},onReady:{before:function(){$e.isFirstPageInit||($e.firstReadyTime=U(),We.values.v26=$e.firstReadyTime),rr.on_ready.start_time=U()},after:function(){rr.on_ready.end_time=U(),$e.page=Ht(),$e.isFirstPageInit||(We.values.v27=rr.on_ready.end_time,$e.isFirstPageInit=!0,setTimeout((function(){Yt(We,!0)}),5e3))}},onShow:{before:function(){rr.on_show.start_time=U(),$e.isFirstPageInit||(We.values.v24=rr.on_show.start_time),Je.isAppOnHide&&(We.values.v24=rr.on_show.start_time)},after:function(){if(rr.on_show.end_time=U(),Xe.prePageUrl=Xe.curPageUrl,Xe.prePageId=Xe.curPageId,Xe.prePageStart=Xe.curPageStart,Xe.curPageId=Ht(),Xe.curPageUrl=jt(),Xe.curPageStart=j(),F.getPerformance||Qt(Ze({},Xe)),$e.isFirstPageInit||(We.values.v25=rr.on_show.end_time,We.tags.d9=Ht()),Je.isAppOnHide){We.values.v25=rr.on_show.end_time;var t=We.values.v25-We.values.v18;We.tags.d3=Qe("WARM",t,!1),We.values.v1=t,We.values.v2=We.values.v18,We.values.v3=We.values.v25,We.tags.d9=Ht(),We.tags.d1="WARM",Je.isAppOnHide=!1,We.tags.d9&&Yt(We,!0)}}},onHide:{before:function(){rr.on_hide.start_time=U()},after:function(){rr.on_hide.end_time=U(),Xe.prePageEnd=j(),F.getPerformance||ur()}},onUnload:{before:function(){rr.on_unload.start_time=U()},after:function(){rr.on_unload.end_time=U(),Xe.prePageEnd=j(),F.getPerformance||ur()}}},e=this&&this.global&&this.global.Page||Page,r=Component;try{var n=this&&this.global&&this.global.Page||Page;Page=function(e){return v(e,t),Re("Page",e,t),n.apply(this,arguments)};Component=function(e){return v(e.methods,t),Re("Component",e.methods,t),r.apply(this,arguments)}}catch(t){return a.info("hook page error",t),this&&this.global&&this.global.Page?global.Page=e:Page=e,void(Component=r)}}(),F.getPerformance&&(t=F.getPerformance().createObserver((function(t){a.info("performance entrytype",t.getEntries());var e=t.getEntries(),r="false",n="false",i=t.getEntriesByName("firstRender","render")||[],o=t.getEntriesByName("firstPaint","render")||[],s=t.getEntriesByName("firstContentfulPaint","render")||[],u=t.getEntriesByName("largestContentfulPaint","render")||[],h=t.getEntriesByName("evaluateScript","script")||[],c=t.getEntriesByName("route","navigation")||[],f=t.getEntriesByName("appLaunch","navigation")||[],l=Ze(Ze({},Xe),{},{tags:{d7:"false",d8:"false"},values:{v4:0,v5:0,v6:0,v7:0,v8:0,v9:0,v10:0,v11:0,v12:0,v13:0,v14:0}});if(i.length>0){var p=i[0],d=p.startTime,g=p.duration;l.values.v4=d,l.values.v5=d+g}if(o.length>0){var m=o[0].startTime;l.values.v6=m}if(s.length>0){var y=s[0].startTime;l.values.v7=y}if(u.length>0){var v=u[0].startTime;l.values.v8=v}if(h.length>0){var w=h[0],b=w.startTime,_=w.duration;l.values.v9=b,l.values.v10=b+_}if(c.length>0){var S=c[0],M=S.startTime,E=S.duration;l.tags.d8="true",n="true",l.values.v11=M,l.values.v12=M+E,Qt(l),ur({perfInfo:JSON.stringify(e),isAppLaunch:r,isRoute:n})}if(f.length>0){var A=f[0],T=A.startTime,x=A.duration;r="true",l.tags.d7="true",l.values.v13=T||0,l.values.v14=T+x||0,Qt(l),ur({perfInfo:JSON.stringify(e),isAppLaunch:r,isRoute:n})}})),(e=["render","script","navigation"]).push("loadPackage"),e.push("resource"),t.observe({entryTypes:e}))}function or(t,e,r){var n=Object.assign({},{data:-1,size:-1,start_time:0,end_time:0}),i=JSON.stringify(t||{});n.size=i&&2*i.length/1024;n.data={},n.start_time=e,n.end_time=r,er.push(n)}function sr(){!function(){function t(t,e){var r=t[e];return!("function"!=typeof r||!/native code/.test(r.toString()))&&function(){var t=r.apply(this,arguments),n=null;return"function"==typeof Event?n=new Event(e):(n=document.createEvent("HTMLEvents")).initEvent(e,!1,!0),window.dispatchEvent(n),t}}history.pushState=t(history,"pushState")||history.pushState,history.replaceState=t(history,"replaceState")||history.replaceState}(),["load","replaceState","pushState","popstate","pagehide"].forEach((function(t){window.addEventListener(t,(function(){return ar(t)}))}))}function ar(t,e,r){setTimeout((function(){if("start"!==Xe.customState){var n="customPageChange"===t?r:location.href;if(Xe.curPageUrl!==n){Xe.prePageUrl=Xe.curPageUrl,Xe.prePageId=Xe.curPageId,Xe.prePageStart=Xe.curPageStart,Xe.prePageEnd=j(),"customPageChange"===t?(Xe.curPageId=e,Xe.curPageUrl=r):(Xe.curPageId=ct(),Xe.curPageUrl=ht()),Xe.curPageStart=j();var i=D();"ios"===i&&window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.QAPM&&window.webkit.messageHandlers.QAPM.postMessage?window.webkit.messageHandlers.QAPM.postMessage({functionName:"webviewPageChange",pageId:Xe.curPageId,page:Xe.curPageUrl,time:ft()}):"android"===i&&window.QAPMAndroidJsBridge&&window.QAPMAndroidJsBridge.webviewPageChange?window.QAPMAndroidJsBridge.webviewPageChange(Xe.curPageId,Xe.curPageUrl,ft()):Qt(Ze({eventType:t},Xe))}else a.warn("page change event, url is same",Xe.curPageUrl,n)}}),0)}function ur(t){return hr.apply(this,arguments)}function hr(){return(hr=i()(s.a.mark((function t(e){var r,n,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;break;case 2:if(!Et(1)){t.next=4;break}return t.abrupt("return");case 4:return r={referrer:vt(),page:Ht(),methods:rr,setdata_list:er,perfInfo:"{}",isAppLaunch:"false",isRoute:"false"},e&&(r.perfInfo=e.perfInfo||"",r.isAppLaunch=e.isAppLaunch,r.isRoute=e.isRoute),F&&(r=Object.assign({},r,{wx_version:mt()})),t.t0=Dt({plugin:nr(),needTranslate:"false",category:"PERF_PAGE_LOAD"}),t.t1=ut(),t.t2=U(),t.t3=Ht(),t.next=13,nt();case 13:t.t4=t.sent,t.t5=it(),t.t6=-1,t.t7=JSON.stringify(r),t.t8={id:t.t1,time:t.t2,page_id:t.t3,net_type:t.t4,net_op:t.t5,battery_level:t.t6,service_data:t.t7},t.t9=[t.t8],n={meta:t.t0,data:t.t9},i={config:{headers:{"Content-Type":"application/x-www-form-urlencoded"},isEncrypt:!1,dataLength:1,plugin:nr(),method:"POST",isQAPM:!0},data:n},R(i),rr={on_load:{start_time:0,end_time:0},on_ready:{start_time:0,end_time:0},on_show:{start_time:0,end_time:0},on_hide:{start_time:0,end_time:0},on_unload:{start_time:0,end_time:0}},er=[];case 24:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function cr(){F?ir():(sr(),"complete"===document.readyState?ar("load"):window.addEventListener("load",(function(){ar("load")})))}var fr=function(){return"ios"===D()?41:"android"===D()?141:F?241:341};function lr(){try{var t=X();if(void 0===t)return{timing:{},performanceEntries:[]};var e=t.timing,r=t.getEntriesByType("paint"),n={fp:{},fcp:{}};Array.isArray(r)&&r.forEach((function(t){"first-paint"===t.name&&(n.fp={start:tt(t.startTime),end:tt(t.startTime)+t.duration,duration:t.duration}),"first-contentful-paint"===t.name&&(n.fcp={start:tt(t.startTime),end:tt(t.startTime)+t.duration,duration:t.duration})}));var i={connect_start:e.connectStart,connect_end:e.connectEnd,dom_complete:e.domComplete,dom_content_loaded_event_start:e.domContentLoadedEventStart,dom_content_loaded_event_end:e.domContentLoadedEventEnd,dom_interactive:e.domInteractive,dom_loading:e.domLoading,domain_lookup_start:e.domainLookupStart,domain_lookup_end:e.domainLookupEnd,fetch_start:e.fetchStart,load_event_start:e.loadEventStart,load_event_end:e.loadEventEnd,navigation_start:e.navigationStart,redirect_start:e.redirectStart,redirect_end:e.redirectEnd,request_start:e.requestStart,response_start:e.responseStart,response_end:e.responseEnd,secure_connection_start:e.secureConnectionStart,unload_event_start:e.unloadEventStart,unload_event_end:e.unloadEventEnd},o=t.getEntries(),s=[];return o.forEach((function(t){s.push({url:t.name,resource_type:t.initiatorType,next_hop_protocol:t.nextHopProtocol,host_ip:qt,domain_look_up_end:tt(t.domainLookupEnd),domain_look_up_start:tt(t.domainLookupEnd),connect_end:tt(t.connectEnd),connect_start:tt(t.connectStart),ssl_connection_end:tt(t.secureConnectionStart),ssl_connection_start:tt(t.secureConnectionStart),fetch_start:tt(t.fetchStart),request_start:tt(t.requestStart),request_end:tt(t.responseStart),response_end:tt(t.responseEnd),response_start:tt(t.responseStart),duration:t.duration,encoded_body_size:t.encodedBodySize||0,transfer_size:t.transferSize||0,worker_start:tt(t.workerStart),entry_type:t.entryType,resource_request_trigger_time:tt(t.requestStart),resource_request_handle_time:tt(t.domainLookupEnd),redirect_start:tt(t.redirectStart),redirect_end:tt(t.redirectEnd),is_first_screen_resource:1})})),{timing:i,performanceEntries:s,paint:n}}catch(t){return a.info(t),{timing:{},performanceEntries:[]}}}function pr(){return dr.apply(this,arguments)}function dr(){return(dr=i()(s.a.mark((function t(){var e,r,n,i,o,u,h,c,f,l,p,d;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!F){t.next=2;break}return t.abrupt("return");case 2:if(!Et(1)){t.next=4;break}return t.abrupt("return");case 4:if(e=lr(),r=e.timing,n=void 0===r?{}:r,i=e.performanceEntries,o=void 0===i?[]:i,u=e.paint,h=void 0===u?{}:u,a.info("timing",n),!(n.load_event_end<=0||n.load_event_end-n.fetch_start>2147483647)){t.next=9;break}return a.info("timing.load_event_end <= 0 || timing.load_event_end-timing.fetch_start > 2147483647"),t.abrupt("return");case 9:if(!(n.load_event_start<=0)){t.next=12;break}return a.info("timing.load_event_start<=0"),t.abrupt("return");case 12:if(!(n.dom_complete<=0)){t.next=15;break}return a.info("timing.dom_complete <=0"),t.abrupt("return");case 15:if(!(n.dom_loading<=0)){t.next=18;break}return a.info("timing.dom_loading <=0"),t.abrupt("return");case 18:if(!(n.dom_content_loaded_event_end<=0)){t.next=21;break}return a.info("timing.dom_content_loaded_event_end <=0"),t.abrupt("return");case 21:if(!(n.load_event_end-n.navigation_start<=0||n.load_event_end-n.navigation_start>1e6)){t.next=23;break}return t.abrupt("return");case 23:return c=ht(),f=ct(),t.next=27,nt({});case 27:l=t.sent,Yt({category:"PERF_WEB_PAGE_LOAD",tags:{d1:f,d2:c,d3:document.referrer,d4:"true",d7:it(),d8:qt,d9:l,d10:ot(),d11:st()},values:{v1:n.connect_start,v2:n.connect_end,v3:n.dom_complete,v4:n.dom_content_loaded_event_start,v5:n.dom_content_loaded_event_end,v6:n.dom_interactive,v7:n.dom_loading,v8:n.domain_lookup_start,v9:n.domain_lookup_end,v10:n.fetch_start,v11:n.load_event_start,v12:n.load_event_end,v13:n.navigation_start,v14:n.redirect_start,v15:n.redirect_end,v16:n.request_start,v17:n.response_start,v18:n.response_end,v19:n.secure_connection_start,v20:n.unload_event_start,v21:n.unload_event_end,v22:h.fp.start||0,v23:h.fp.end||0,v24:h.fcp.start||0,v25:h.fcp.end||0}},!0),Qt({prePageId:"_background_",prePageUrl:"_background_",prePageStart:0,prePageEnd:0,curPageId:f,curPageUrl:c,curPageStart:n.navigation_start,curPageEnd:n.load_event_end},!0),p={meta:Dt({category:"PERF_WEB_PAGE_LOAD",plugin:fr(),needTranslate:"false"}),data:[{id:ut(),time:U(),page_id:f,battery_level:-1,net_type:l,net_op:it(),service_data:JSON.stringify({referrer:document.referrer,url:ht(),browser:ot(),browser_ver:st(),ua:at(),performance_timing:n,performance_entries:o,paint:h})}]},d={config:{headers:{"Content-Type":"application/x-www-form-urlencoded"},isEncrypt:xt&&xt.LAUNCH&&"true"===xt.LAUNCH.is_encryption||!1,plugin:fr(),dataLength:1,method:"POST",isQAPM:!0},data:p},a.info("uploadWebLaunchData",d),!F&&C(d,{});case 34:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function gr(){"complete"===document.readyState?(a.info("document ready!!"),pr()):window.addEventListener("load",(function(){a.info("document load ready"),pr()}))}var mr=!F;function yr(){mr&&setInterval((function(){var t=document.body.querySelectorAll("*").length,e=Tt.domLengthThreshold;t<e&&(a.info("!!!maybe white screen,domLength is ",t,",domLengthThreshold is ",e),Jt({category:"PERF_WHTIE_SCREEN",values:{v1:t,v2:e},tags:{d1:ct(),d4:J(),d10:ot(),d11:st()}}))}),1e4)}var vr=193273528320,wr=137438953472,br=4294967296,_r=17179869184,Sr=34359738368,Mr=833227908096,Er=1024,Ar=32768,Tr=8192,xr=4194304,kr=16384,Pr=8589934592;function Br(t){try{var e=!1,r=!1,n=!1,i=!1,o=!1,s=!1,u=0;return"android"===D()||"ios"===D()?u=xt.SWITCH:F?(u=t&&t.switch||0,kt.SWITCH=u,kt.UBS=t.data.ubs,kt.USR=t.data.usr,kt.JSERROR=t.data.p_243,kt.NETWORK=t.data.p_242,kt.PAGE=t.data.p_288,kt.LAUNCH=t.data.p_266):(u=t&&t.switch||0,xt.SWITCH=u,xt.UBS=t.data.ubs,xt.USR=t.data.usr,xt.JSERROR=t.data.p_343,xt.NETWORK=t.data.p_342,xt.LAUNCH=t.data.p_341),F?(e=0!==rt(u,Ar),r=0!==rt(u,Tr),n=0!==rt(u,kr),i=0!==rt(u,xr),o=0!==rt(u,Pr),s=0!==rt(u,Er)):(e=0!==rt(u,wr),r=0!==rt(u,br),n=0!==rt(u,Sr),i=0!==rt(u,_r),o="false"!==(t.data&&t.data.ubs&&t.data.ubs.upload_pv)),{openUBS:e,openNetwork:r,openJsError:n,openLaunch:i,openPage:o,openCrash:s}}catch(t){return a.error(t),{}}}function Ir(t){return new Promise((function(e,r){try{var n=t.app_key.split("-")[1],i=t.version,o=Tt.user_id,s=z(),u=Y(),h=J(),c=g,f={data:{device:s,user_id:o,os_ver:u,device_id:_.readItem("QAPM_DEVICE_ID"),md5_code:"",user_switch:F?Mr:vr,version:i,sdk_ver:c,last_switch:F?Mr:vr,app_id:n,hit:0,is_vip:"true",model:z(),platform:h},config:{headers:{"Content-Type":"application/json"},method:"POST",isAppconfig:!0}},l=Cr();if(l){f.data.md5_code=l.md5;var p=(new Date).getTime()-new Date(l.hitTime).getTime();p>2592e6&&l.hitTime&&(delete l.hit,delete l.hitTime),f.data.hit=l.hit||0,f.data.last_switch=l.switch}else l={},a.info("appconfig is not in local stroage");(F?R:C)(f,{onSuccess:function(t){var r=l;if(404!==t.statusCode&&404!==t.data){if("string"==typeof t.data)try{t.data=JSON.parse(t.data)}catch(e){return void a.info("get appconfig fail",t)}t.data.switch>0&&!l.hitTime&&(t.data.hit=1,t.data.hitTime=new Date,r.hit=1,r.hitTime=new Date),l.hitTime&&(t.data.hit=1,t.data.hitTime=l.hitTime,r.hit=1,r.hitTime=l.hitTime),1e3===t.data.status&&(t.data.time=new Date,_.setItem("QAPM_WEB_APPCONFIG_V7",JSON.stringify(t.data)),e(t.data)),1200===t.data.status&&(r.switch=t.data.switch,r.time=new Date,_.setItem("QAPM_WEB_APPCONFIG_V7",JSON.stringify(r)),e(l))}else a.info("get appconfig fail",t)}})}catch(t){a.info(t),r(t)}}))}function Cr(){try{var t=_.readItem("QAPM_WEB_APPCONFIG_V7");return t?"string"==typeof t?JSON.parse(t):t:{}}catch(t){return a.info(t),{}}}function Rr(){var t=Cr();if("{}"===JSON.stringify(t))return!0;var e=t.switch||0;return 0!==rt(e,Pr)}function Or(){var t=Cr();if("{}"===JSON.stringify(t))return!0;var e=t.switch||0;return 0!==rt(e,xr)}function Nr(){var t=Cr();if("{}"===JSON.stringify(t))return!0;var e=t.switch||0;return 0!==rt(e,kr)}var qr=function t(e){if(""!==e.id&&e.id)return'id("'.concat(e.id,'")');if(e===document.body)return e.tagName;if(e===document)return"document";var r=0;if(e.parentNode)for(var n=e.parentNode.childNodes,i=0;i<n.length;i++){var o=n[i];if(o===e)return"".concat(t(e.parentNode),"/").concat(e.tagName,"[").concat(r+1,"]");1===o.nodeType&&o.tagName===e.tagName&&r++}},Lr=function(t){return function(t){var e="",r=t.nodeType;if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)e+=getText(t)}else if(3===r||4===r)return t.nodeValue;return e}(t).replace(/^\s+|\s+$/g,"")},Dr={tap:1,longpress:2};var Fr=function(t,e,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=function(t){var e=document.documentElement;e&&r.call(e,t,t.target)};return t.addEventListener(e,i,n),{destroy:function(){t.removeEventListener(e,i,n)}}};function Ur(t){var e,r=(e=window.qapmIgnoreClasses?arrayToMap(window.qapmIgnoreClasses):Tt.ignoreClasses,{ignoreIds:window.qapmIgnoreIds?arrayToMap(window.qapmIgnoreIds):Tt.ignoreIds,ignoreClasses:e,ignoreTag:"QAPM_IGNORE"}),n=r.ignoreClasses,i=r.ignoreIds,o=r.ignoreTag,s=!(0===i.size&&0===n.size),u=t,h=b(t.getAttribute("id")," "),c=b(t.getAttribute("class"," ")),f="This component hits the ignore rule and does not collect click events";if(h.includes(o)||c.includes(o))return a.info(f,o,t),!0;for(var l=0,p=!1;u&&s&&u.getAttribute;){if(p)return!0;if(l>=10)break;h=b(u.getAttribute("id")," "),c=b(u.getAttribute("class"," ")),h.map((function(e){if(i.includes(e))return a.info(f,i,t,u),void(p=!0)})),c.map((function(e){if(n.includes(e))return a.info(f,n,t,u),void(p=!0)})),l++,u=u.parentNode||u.parentElement}return!1}function jr(){F?function(){var t=this&&this.global&&this.global.Page||Page;try{var e=this&&this.global&&this.global.Page||Page;Page=function(t){return Oe("Page",t,(function(t){if(1==(arguments.length<=1?0:arguments.length-1)){var e=arguments.length<=1?void 0:arguments[1];if("object"===d()(e)&&null!==e&&e.type&&e.target&&e.timeStamp&&Dr[e.type]){a.log("Page, ui action in,",t,e.type);var r=e.touches[0],n={op:Dr[e.type],view_pos:"",view_type:"",view_tag:t,view_text:"",view_desc:"",view_super:"",page:Ht(),page_id:jt(),data:{p0:"".concat(parseInt(r.clientX)||-1,",").concat(parseInt(r.clientY)||-1),p1:"".concat(parseInt(r.pageX)||-1,",").concat(parseInt(r.pageY)||-1)}};a.info("click event",n),Gt(n)}}else a.info("args.length!==1")})),e.apply(this,arguments)}}catch(e){return a.info("hook page error",e),void(this&&this.global&&this.global.Page?global.Page=t:Page=t)}}():function(){var t={click:1,longpress:2};for(var e in t){Fr(document,e,(function(e,r){if(a.info("click or longpress event",e),r){var n=t[e.type];if(n&&!Ur(r)){var i=qr(r),o=Lr(r),s=r.getBoundingClientRect&&r.getBoundingClientRect()||{};Gt({op:n,view_pos:"",view_type:"",view_tag:i,view_text:o.slice(0,127),view_desc:"",view_super:"",page:ht(),page_id:ct(),tags:{},data:{p0:"".concat(parseInt(s.left)||-1,",").concat(parseInt(s.top)||-1),p1:"".concat(parseInt(s.left+window.scrollX)||-1,",").concat(parseInt(s.top+window.scrollY)||-1)}})}}}),!0)}}()}function Hr(){F?F.onMemoryWarning((function(t){Yt({category:"PERF_MEMORY_WARN",tags:{d1:Ht(),d2:t&&t.level&&t.level.toString()||""}})})):performance&&performance.memory&&setInterval((function(){Yt({category:"PERF_MEMORY_USED",tags:{d1:ct(),d2:ot(),d3:st(),d4:J()},values:{v1:performance.memory.jsHeapSizeLimit,v2:performance.memory.totalJSHeapSize,v3:performance.memory.usedJSHeapSize}})}),1e4)}var Kr,zr=r(5),Jr=r.n(zr),Qr={};function Wr(){if(null!==navigator.serviceWorker.controller){var t=bt(),e=function(){navigator.serviceWorker.controller.postMessage({type:"heartbeat",id:t,data:{}})};window.addEventListener("beforeunload",(function(){navigator.serviceWorker.controller.postMessage({type:"unload",id:t})})),setInterval(e,5e3),e()}worker.addEventListener("message",(function(t){var e=t.data;"heartbeat"===e.type?(Qr[e.id]={t:Date.now()},Kr||(Kr=setInterval((function(){!function(){var t=Date.now();for(var e in Qr){t-Qr[e].t>15e3&&delete Qr[e]}0===Object.keys(Qr).length&&(clearInterval(Kr),Kr=null)}()}),1e4))):"unload"===e.type&&delete Qr[e.id]}))}function Yr(){a.info("mp crash init",F.getStorageSync("QAPM_CRASH_INFO")),function(){var t=F.getStorageSync("QAPM_CRASH_INFO");if(!t)return!1;if(t.onAppHideTimeStamp||t.onAppEnterBackgroundTimeStamp)return!1;var e=t.time,r=(new Date).getTime(),n=H()?7400:3600;if(r-e<=n)return!1;return!0}()?function(){var t,e;a.error("mp crash");var r=F.getStorageSync("QAPM_CRASH_INFO")||{};Yt({category:"PERF_MP_CRASH",tags:{d2:vt(),d4:null!==(t=r.memoryWarningInfo)&&void 0!==t&&t.length?"true":"false",d5:_t,d6:qt,d7:mt(),d9:Kt(),d11:(null==r?void 0:r.crashPageId)||""},values:{v1:(null===(e=r.memoryWarningInfo)||void 0===e?void 0:e.length)||0,v2:r.time}})}():a.info("mp not crash"),F.removeStorageSync("QAPM_CRASH_INFO"),F.onMemoryWarning((function(t){var e=F.getStorageSync("QAPM_CRASH_INFO");e.memoryWarningInfo||(e.memoryWarningInfo=[]),e.memoryWarningInfo.push(t),F.setStorageSync("QAPM_CRASH_INFO",e)})),F.onAppHide((function(t){var e=F.getStorageSync("QAPM_CRASH_INFO");e.onAppHideTimeStamp=(new Date).getTime(),F.setStorageSync("QAPM_CRASH_INFO",e),a.info("wx.onAppHide",t,F.getStorageSync("QAPM_CRASH_INFO"))})),F.onAppEnterBackground((function(t){var e=F.getStorageSync("QAPM_CRASH_INFO");e.onAppEnterBackgroundTimeStamp=(new Date).getTime(),F.setStorageSync("QAPM_CRASH_INFO",e),a.info("wx.onAppEnterBackground",t,F.getStorageSync("QAPM_CRASH_INFO"))})),setInterval((function(){var t=F.getStorageSync("QAPM_CRASH_INFO")||{};t.time=(new Date).getTime(),t.crashPageId=Kt(),F.setStorageSync("QAPM_CRASH_INFO",t)}),1e3)}function Gr(){F?Yr():Wr()}var Vr,Zr,Xr={},$r=function(){if(a.info("isWebview",D()),"ios"===D())try{window.qapmBaseInfo=window.qapmBaseInfo||{},Xr.user_id=window.qapmBaseInfo.userId,Xr.device_id=window.qapmBaseInfo.deviceId,Xr.app_key=window.qapmBaseInfo.appKey,Xr.version=window.qapmBaseInfo.version,Xr.qapm_base_url=window.qapmBaseInfo.qapmUrl,Xr.athena_base_url=window.qapmBaseInfo.athenaUrl,Xr.bread_crumb_buckets=window.qapmBaseInfo.breadCrumbBuckets,Xr.model=window.qapmBaseInfo.model||"",Xr.os=window.qapmBaseInfo.os||"",Xr.osVer=window.qapmBaseInfo.osVer||"",Xr.isRoot=window.qapmBaseInfo.isRoot||"",Xr.arch=window.qapmBaseInfo.arch||qt,Xr.distribute_channel=window.qapmBaseInfo.channelInstall||qt,Xr.logLevel=window.qapmBaseInfo.logLevel,Xr.switch=window.qapmBaseInfo.switch,Xr.ubsConfig=window.qapmBaseInfo.ubsConfig,Xr.usrConfig=window.qapmBaseInfo.usrConfig,Xr.webLaunchConfig=window.qapmBaseInfo.webLaunchConfig,Xr.jserrorConfig=window.qapmBaseInfo.jsErrorConfig,Xr.networkConfig=window.qapmBaseInfo.networkConfig,Xr.net_op=window.qapmBaseInfo.netOp||"",Xr.net_type=window.qapmBaseInfo.netType||"",Xr.brand=window.qapmBaseInfo.brand||"",Xr.channel_install=window.qapmBaseInfo.channelInstall||"",Xr.channel_open=window.qapmBaseInfo.channelOpen||"",Xr.billingId=window.qapmBaseInfo.billingId||"",Xr.isReleasePackage="true"===window.qapmBaseInfo.isReleasePackage,Xr.localDNS=window.qapmBaseInfo.localDNS||"",Xr.isOpenTrace="true"===window.qapmBaseInfo.isOpenTrace}catch(t){a.error(t.toString())}if("android"===D())try{var t=function(t){try{var e=window.QAPMAndroidJsBridge;if(e[t])return e[t]()}catch(t){a.info(t)}};Xr.user_id=t("getUin"),Xr.device_id=t("getDeviceId"),Xr.app_key=t("getAppkey"),Xr.version=t("getVersion"),Xr.qapm_base_url=t("getQAPMUrl"),Xr.athena_base_url=t("getAthenaUrl"),Xr.bread_crumb_buckets=t("getBreadCrumbBuckets"),Xr.model=t("getModel")||"",Xr.os=t("getOS")||"",Xr.osVer=t("getOSVer")||"",Xr.isRoot=t("isRoot")||"",Xr.arch=t("getArch")||"",Xr.distribute_channel=t("getDistributeChannel")||qt,Xr.logLevel=t("getLogLevel"),Xr.switch=t("getSwitch"),Xr.ubsConfig=t("getUbsConfig"),Xr.usrConfig=t("getUsrConfig"),Xr.webLaunchConfig=t("getWebLaunchConfig"),Xr.jserrorConfig=t("getJsErrorConfig"),Xr.networkConfig=t("getNetworkConfig"),Xr.net_op=t("getNetOp")||"",Xr.brand=t("getBrand")||"",Xr.channel_open=t("getOpenChannel")||"",Xr.channel_install=t("getInstallChannel")||"",Xr.net_type=t("getNetType")||"",Xr.billingId=t("getBillingId")||"",Xr.isReleasePackage=t("isReleasePackage")||!1,Xr.localDNS=t("getLocalDNS")||"",Xr.isOpenTrace="true"===t("getOpenTrace")}catch(t){a.error(t.toString())}return Xr},tn=function(t){if(t){D()&&(t=Object.assign({},t,$r()),a.info(t));var e=t.app_key.split("-")[1],r=t.version,n=t.user_id,i=t.appconfig_base_url,o=t.athena_base_url,s=t.qapm_base_url,u=t.device_id||V(),h=bt(t.app_key+r);return hn("logLevel",t.logLevel),hn("app_key",t.app_key),hn("app_id",e),hn("version",r),hn("user_id",n),hn("device_id",u),hn("build_id",h),hn("appconfig_base_url",i),hn("athena_base_url",o),hn("qapm_base_url",s),hn("netType",t.net_type),hn("netOp",t.net_op),hn("model",t.model),hn("getPageId",t.getPageId),hn("allEventCallback",t.allEventCallback),hn("channelInstall",t.channel_install),hn("channelOpen",t.challel_open),hn("brand",t.brand),hn("os",t.os),hn("osVer",t.osVer),hn("isRoot",t.isRoot),hn("arch",t.arch),hn("distribute_channel",t.distribute_channel),hn("excludeUrlReg",t.excludeUrlReg||window&&window.qapmExcludeUrlReg),hn("excludeUrlRegList",t.excludeUrlRegList||window&&window.qapmExcludeUrlRegList),hn("domLengthThreshold",t.domLengthThreshold),hn("collectReqBody",t.collectReqBody||!1),hn("collectRespBody",t.collectRespBody||!1),hn("allowHeaders",t.allowHeaders||[]),hn("billingId",t.billingId||function(){try{var t=_.readItem("QAPM_BILLING_ID");return t||(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})),_.setItem("QAPM_BILLING_ID",t)),t}catch(t){return a.info(t),""}}()),hn("isReleasePackage",t.isReleasePackage||!1),hn("launchTimeThreshold",t.launchTimeThreshold||0),hn("localDNS",t.localDNS||""),hn("isOpenTrace",t.isOpenTrace||!1),D()&&(hn("switch",t.switch),hn("ubsConfig",t.ubsConfig),hn("usrConfig",t.usrConfig),hn("webLaunchConfig",t.webLaunchConfig),hn("jserrorConfig",t.jserrorConfig),hn("networkConfig",t.networkConfig)),t}};function en(){return rn.apply(this,arguments)}function rn(){return(rn=i()(s.a.mark((function t(){var e,r,n,i,o,u,h,c,f,l,p,d=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=d.length>0&&void 0!==d[0]?d[0]:Xr,t.prev=1,e=tn(e),r={},D()){t.next=21;break}return n=e.app_key.split("-")[1],t.next=8,q(n);case 8:return i=t.sent,Tt.pubkey=i,a.info("pubkey is ",i),t.next=13,x();case 13:return o=t.sent,Tt.TOKEN=o,t.next=17,Ir(e);case 17:r=t.sent,a.info("appconfig is",r),t.next=22;break;case 21:r={data:{ubs:xt.UBS,usr:xt.USR}};case 22:if(!1!==(u=Br(r))){t.next=25;break}return t.abrupt("return");case 25:if(!e.debug){t.next=37;break}return Ie(),He(),gr(),ee(),cr(),Hr(),yr(),jr(),sn(),a.info("[1.8]debug open, web sdk start successSDK_VER: v".concat("5.3.6",", app_key is ").concat(e.app_key)),t.abrupt("return");case 37:a.info("function switch is",u),h=u.openUBS,c=u.openNetwork,f=u.openJsError,l=u.openLaunch,p=u.openPage,ee(),c&&Ie(),f&&He(),l&&(gr(),sn()),h&&jr(),p&&cr(),a.info("[1.8]web sdk start successSDK_VER: v".concat("5.3.6",", app_key is ").concat(e.app_key)),t.next=51;break;case 48:t.prev=48,t.t0=t.catch(1),a.error(t.t0);case 51:case"end":return t.stop()}}),t,null,[[1,48]])})))).apply(this,arguments)}function nn(t){return on.apply(this,arguments)}function on(){return(on=i()(s.a.mark((function t(e){var r,n,i,o,u,h,c,f;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=tn(e),a.info("qapmMiniSdkStart",e),(Or()||e.debug)&&Ge(),(Rr()||e.debug)&&cr(),(Nr()||e.debug)&&He(),e.debug&&jr(),t.next=8,x();case 8:if(r=t.sent,Tt.TOKEN=r,sn(),!e.debug){t.next=17;break}return Ie(),ee(),Gr(),console.log("QAPM, [1.8]debug open, mini sdk start successSDK_VER: v".concat("5.3.6",", app_key is ").concat(e.app_key)),t.abrupt("return");case 17:return t.next=19,Ir(e);case 19:if(n=t.sent,!1!==(i=Br(n))){t.next=23;break}return t.abrupt("return");case 23:return a.info("function switch is",i),o=i.openUBS,u=i.openNetwork,h=i.openCrash,ee(),o&&jr(),u&&Ie(),h&&Gr(),c=e.app_key.split("-")[1],t.next=32,q(c);case 32:f=t.sent,Tt.pubkey=f,console.log("QAPM, [1.8]mini sdk start successv".concat("5.3.6",", app_key is ").concat(e.app_key));case 35:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function sn(){return an.apply(this,arguments)}function an(){return(an=i()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=F?vt():"",t.t1=qt,t.t2=it(),t.t3=qt,t.next=6,nt({});case 6:t.t4=t.sent,t.t5={d1:t.t0,d2:t.t1,d3:"true",d7:t.t2,d8:t.t3,d9:t.t4},Yt({category:"APP_LAUNCH",tags:t.t5});case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function un(t,e,r,n,i,o){Jt({category:t,action:e,label:r,value:n,tags:i,values:o})}function hn(t,e){if(e){if("appconfig_base_url"===t&&(Pt.appconfig=e),"qapm_base_url"===t&&(Pt.qapm=e),"athena_base_url"===t&&(Pt.athena=e),"app_key"===t&&(Tt.app_key=e),"app_id"===t&&(Tt.app_id=e),"user_id"===t&&(Tt.user_id=e),"version"===t&&(Tt.version=e),"device_id"===t&&(Tt.device_id=e),"build_id"===t&&(Tt.build_id=e),"exposeThreshold"===t){var r=parseFloat(e);r&&r>=0&&(Tt.expose_threshold=r)}if("excludeUrlReg"===t&&Tt.excludeUrlReg.push(e),"excludeUrlRegList"===t&&Array.isArray(e)&&(Tt.excludeUrlReg=Tt.excludeUrlReg.concat(e)),"exposeAreaThreshold"===t){var n=parseFloat(e);n&&n>=0&&n<=1&&(Tt.expose_area_threshold=n)}if("domLengthThreshold"===t){var i=parseInt(e);i&&i>=0&&(Tt.domLengthThreshold=i)}if("distribute_channel"===t&&(Tt.distribute_channel=e),"model"===t&&(Tt.model=e),"arch"===t&&(Tt.arch=e),"debug"===t&&(Tt.debug=e),"buckets"===t&&(Tt.buckets=e),"bucket"===t&&(Tt.bucket=e),"netOp"===t&&(Tt.netOp=e),"netType"===t&&(Tt.netType=e),"brand"===t&&(Tt.brand=e),"os"===t&&(Tt.os=e),"osVer"===t&&(Tt.osVer=e),"isRoot"===t&&(Tt.isRoot=e),"logLevel"===t)for(var o in a.levelMap)if(a.levelMap[o]===e)return void(a.logLevel=o);if("channelInstall"===t&&(Tt.channel_install=e),"channelOpen"===t&&(Tt.channel_open=e),"allEventCallback"===t&&("function"==typeof e?Tt[t]=e:a.info("error ","".concat(e," is not a function"))),"ignoreIds"===t&&e instanceof Array){var s=pt(e);Tt.ignoreIds=s}if("ignoreClassess"===t&&e instanceof Array){var u=pt(e);Tt.ignoreClasses=u}"getPageId"===t&&("function"==typeof e?Tt.getPageId=e:a.info("getPageId ",e," is not function, please transfer a function")),"switch"===t&&(xt.SWITCH=e),"ubsConfig"===t&&(xt.UBS="string"==typeof e?JSON.parse(e):e),"usrConfig"===t&&(xt.USR="string"==typeof e?JSON.parse(e):e),"webLaunchConfig"===t&&(xt.LAUNCH="string"==typeof e?JSON.parse(e):e),"jserrorConfig"===t&&(xt.JSERROR="string"==typeof e?JSON.parse(e):e),"networkConfig"===t&&(xt.NETWORK="string"==typeof e?JSON.parse(e):e),"collectReqBody"===t&&(Tt.collectReqBody=e),"collectRespBody"===t&&(Tt.collectRespBody=e),"allowHeaders"===t&&Array.isArray(e)&&(e.forEach((function(t,r){e[r]=t.toLowerCase()})),Tt.allowHeaders=e),"billingId"===t&&(Tt.billingId=e),"isReleasePackage"===t&&(Tt.isReleasePackage=e),"option"===t&&(Tt.option=e||{}),"launchTimeThreshold"===t&&(Tt.launchTimeThreshold=e),"localDNS"===t&&(Tt.localDNS=e),"isOpenTrace"===t&&(Tt.isOpenTrace=e)}}function cn(t,e){"MpError"!==t&&"WebError"!==t&&"PromiseError"!==t||De(t,e)}function fn(t,e,r){"start"===t&&ar("customPageChange",e,r),Xe.customState=t,a.info("custom set page id",void 0,e,r)}function ln(t,e,r){return pn.apply(this,arguments)}function pn(){return(pn=i()(s.a.mark((function t(e,r,n){var i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i="",!(i=Xr.app_key||"")){t.next=5;break}return a.info("get app_key from user qapmOption",i),t.abrupt("return",Xr.app_key);case 5:if(!(i=wx.getStorageSync("qapm_app_key")||"")){t.next=9;break}return a.info("get app_key from cache",i),t.abrupt("return",i);case 9:if(!n){t.next=19;break}return t.prev=10,t.next=13,gn(n,e,r);case 13:i=t.sent,t.next=19;break;case 16:t.prev=16,t.t0=t.catch(10),i="";case 19:if(a.info("getAppkeyFromBackend",i),!i){t.next=24;break}return wx.setStorageSync("qapm_app_key",i),a.info("get app_key from backend",i),t.abrupt("return",i);case 24:if(!(i=dn(e+r))){t.next=29;break}return wx.setStorageSync("qapm_app_key",i),a.info("get app_key from algorithm",i),t.abrupt("return",i);case 29:return t.abrupt("return",i);case 30:case"end":return t.stop()}}),t,null,[[10,16]])})))).apply(this,arguments)}function dn(t){var e=E()(t),r=function(t){for(var e=Jr.a.zero,r=Jr()("128"),n=0;n<t.length;n++){var i=Jr()(t.charCodeAt(n));e=e.multiply(r).add(i)}return e}(e),n=Jr()("1000"),i=Jr()("2000000000"),o=Jr()("1"),s=i.subtract(n).add(o),a=r.mod(s).add(o),u=e.substring(0,8);return"".concat(u,"-").concat(a.toString())}function gn(t,e,r){return new Promise((function(n,i){var o={url:"".concat(t,"/entrance/getAppKey?application_id=").concat(e,"&applet_id=").concat(r),methods:"GET",header:{"content-type":"application/json"},success:function(t){if("string"==typeof t.data)try{t.data=JSON.parse(t.data)}catch(e){a.info("get appkey fail",t),i(e)}var e=t.data.app_key||"";n(e)},fail:function(t){i(t)}};wx.request(o)}))}if(F||(window.QAPM={},window.QAPM.qapmWebSdkStart=en,window.QAPM.qapmCustomTrack=un,window.QAPM.customEvent=Jt,window.QAPM.qapmSetField=hn,window.QAPM.qapmCaptureException=cn,window.QAPM.setFMPEnd=function(){},window.QAPM.setPageState=fn),"undefined"!=typeof __wxConfig&&__wxConfig.qapmBaseUrl){var mn=__wxConfig.qapmBaseUrl,yn=(Zr=St(Vr=mn).hostname,/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/.test(Zr)?"http://".concat(Zr,":30093"):Vr),vn=__wxConfig.miniapp_version,wn=wx.getAppBaseInfo().host.guid,bn=wx.getAppBaseInfo().host.appId,_n=__wxConfig.accountInfo.appId,Sn=ln(bn,_n,mn),Mn={applicationId:bn,appletId:_n,qapmBaseUrl:mn,appconfigBaseUrl:yn,version:vn,deviceId:wn,userId:"tcmpp_user",appKey:Sn};if(bn&&_n&&mn&&vn&&wn&&Sn)nn({app_key:Sn,version:vn,qapm_base_url:mn,appconfig_base_url:yn,user_id:"tcmpp_user",device_id:wn,logLevel:1}),__wxConfig.qapmSetField=hn,console.log("QAPM, tcmpp start qapm sdk success,","SDK_VER: v".concat("5.3.6"),Mn);else a.info("tcmpp empty","SDK_VER: v".concat("5.3.6"),Mn)}else a.info("SDK_VER: v".concat("5.3.6"),"undefined"!=typeof __wxConfig&&__wxConfig)}])}));
//# sourceMappingURL=new.qapm.js.map