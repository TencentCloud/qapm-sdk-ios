!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.QAPMMonitorJS=e():t.QAPMMonitorJS=e()}(window,(function(){return e=[function(t,e,n){"use strict";n.d(e,"g",(function(){return s})),n.d(e,"a",(function(){return a})),n.d(e,"u",(function(){return u})),n.d(e,"r",(function(){return h})),n.d(e,"q",(function(){return l})),n.d(e,"h",(function(){return f})),n.d(e,"v",(function(){return d})),n.d(e,"t",(function(){return p})),n.d(e,"n",(function(){return g})),n.d(e,"o",(function(){return m})),n.d(e,"p",(function(){return y})),n.d(e,"x",(function(){return v})),n.d(e,"k",(function(){return b})),n.d(e,"f",(function(){return _})),n.d(e,"w",(function(){return w})),n.d(e,"e",(function(){return E})),n.d(e,"y",(function(){return T})),n.d(e,"m",(function(){return M})),n.d(e,"s",(function(){return S})),n.d(e,"b",(function(){return O})),n.d(e,"c",(function(){return A})),n.d(e,"j",(function(){return k})),n.d(e,"l",(function(){return R})),n.d(e,"d",(function(){return I})),n.d(e,"i",(function(){return P}));e=n(20);var r=n.n(e),i=n(2),o=n(1);function s(t,e){var n;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];clearTimeout(n),n=setTimeout((function(){return t.apply(void 0,i)}),e)}}var a=Object.assign||function(t){for(var e=0,n=arguments.length<=1?0:arguments.length-1;e<n;e++){var r,i=Object(e+1<1||arguments.length<=e+1?void 0:arguments[e+1]);for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t};function u(){return+new Date}function h(t){return!!(t&&t.constructor&&t.call&&t.apply)}function c(t,e){var n=t+t.slice(0,e-t.length%e),r=0;n.split("").map((function(t){r+=t.charCodeAt(0)}));for(var i="",o=0;o<e;o++){for(var s=0,a=0;a<n.length/e;a++)s=(33*(s+n.charCodeAt(a*e+o)^a)+r)%127;s=s%2==1?s%10+48:s%6+97,i+=String.fromCharCode(s)}return i}var l=function(t){return null==(t="string"==typeof t?t.trim():t)||""===t||t===i.f.UNKNOW},f=function(t){return new Date(t).toISOString()},d=function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t)},p=function(){try{return!!window.qapmBaseInfo&&!!window.navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)}catch(t){return!1}},g=function(){var t=window.top.location;return"".concat(t.protocol,"//").concat(t.hostname).concat(t.pathname).concat(t.search)},m=function(){return g()},y=function(){try{if(!window.QAPMAndroidJsBridge)return!1;var t=window.navigator.userAgent;return-1<t.indexOf("Android")||-1<t.indexOf("Adr")}catch(t){return!1}},v=function(){try{var t,e=window.navigator.userAgent,n=window.navigator.appVersion,r="Unknown",i=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Android",r:/Android/},{s:"Chrome OS",r:/CrOS/},{s:"Linux",r:/(Linux|X11(?!.*CrOS))/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"UNIX",r:/UNIX/}];for(t in i){var o=i[t];if(o.r.test(e)){r=o.s;break}}var s="unknow";switch(/Windows/.test(r)&&(s=/Windows (.*)/.exec(r)[1],r="Windows"),r){case"Mac OS X":s=/Mac OS X (10[\.\_\d]+)/.exec(e)[1];break;case"Android":s=/Android ([\.\_\d]+)/.exec(e)[1];break;case"iOS":s=/OS (\d+)_(\d+)_?(\d+)?/.exec(n),s="".concat(s[1],".").concat(s[2],".").concat(0|s[3])}return"".concat(r," ").concat(s)}catch(t){return"unknow"}},b=function(){var t=navigator.userAgent.toLowerCase();return/windows/.test(t)?"Windows pc":/iphone|ipod/.test(t)&&/mobile/.test(t)?"iPhone":/ipad/.test(t)&&/mobile/.test(t)?"iPad":/android/.test(t)&&/mobile/.test(t)?"Android":/linux/.test(t)?"Linux pc":/mac/.test(t)?"Mac":"other"},_=function(){try{var t=window.navigator.userAgent.match(/(MSIE|(?!Gecko.+)Firefox|(?!AppleWebKit.+Chrome.+)Safari|(?!AppleWebKit.+)Chrome|AppleWebKit(?!.+Chrome|.+Safari)|Gecko(?!.+Firefox))(?: |\/)([\d\.apre]+)/);return t&&Array.isArray(t)&&3<=t.length&&"".concat(t[1]," ").concat(t[2])||"Unknown"}catch(t){return"Unknown"}},w=function(t){var e=[];return function t(n){var i=0;if("boolean"==typeof n)i=4;else if("string"==typeof n)i=2*n.length;else if("number"==typeof n)i=8;else if("object"===r()(n)&&-1===e.indexOf(n))for(var o in e[e.length]=n)i+=8,i+=t(n[o]);return i}(t)},E=function(t){return c(t,8)+"-"+c(t,4)+"-4"+c(t,3)+"-a"+c(t,6).slice(0,3)+"-"+c(t,12)},T=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};o.a.info("webreqeust",t);var n=new XMLHttpRequest,r=-1;if(n.onreadystatechange=function(){try{n.readyState===XMLHttpRequest.DONE&&(r=n.status,e.hasOwnProperty("onSuccess")&&e.onSuccess({statusCode:r,header:n.getAllResponseHeaders(),data:n.response}))}catch(t){e.hasOwnProperty("onError")&&e.onError({statusCode:r,header:n.getAllResponseHeaders(),data:t})}e.hasOwnProperty("onFinally")&&e.onFinally({statusCode:r,header:n.getAllResponseHeaders(),data:n.response})},n.open(t.method,t.url,!0),t.config&&t.config.headers)for(var i in t.config.headers)n.setRequestHeader(i,t.config.headers[i]);"string"==typeof t.data?n.send(t.data):n.send(JSON.stringify(t.data))},M=function(){var t=document.documentElement,e=document.body;return Math.max(t.offsetHeight,t.scrollHeight,e.offsetHeight,e.scrollHeight)},S=function(){return"undefined"!=typeof wx},O=function(t){if(!t)return"";for(var e=Object.keys(t).map((function(e){return t[e]})),n=e[0],r=1,i=e.length;r<i;r++)n+="||".concat(e[r]);return n},A=function(t){if(!t)return"";for(var e=[],n=0,r=t.length;n<r;n++)e.push(O(t[n]));return e},k=function(){var t=navigator.userAgent.split("(")[1].split(")")[0],e="",n=[/IPHONE/gi,/huawei/gi,/mi/gi,/vivo/gi,/OPPO/gi,/samsung/gi,/SONY/gi,/Nokia/gi,/HTC/gi,/ZTE/gi,/Lenovo/gi,/ZUK/gi];return n[0].test(t)?e="iPhone":n[1].test(t)?e="HUAWEI":n[2].test(t)?e="小米":n[3].test(t)?e="vivo":n[4].test(t)?e="OPPO":n[5].test(t)?e="SAMSUNG":n[6].test(t)?e="SONY":n[7].test(t)?e="Nokia":n[8].test(t)?e="HTC":n[9].test(t)?e="ZTE":n[10].test(t)||n[11].test(t)?e="Lenovo":y()&&(e="Android"),e||"unknow"},R=function(){var t=navigator.userAgent;return(t.match(/NetType\/\w+/)?t.match(/NetType\/\w+/)[0]:"NetType/XG").replace("NetType/","").toUpperCase()},I=function(){return parseInt(1073741824*Math.random()+1073741823).toString()},P=function(){if(!navigator)return 0;var t=(e=navigator.connection||navigator.mozConnection||navigator.webkitConnection||{effectiveType:void 0}).type&&e.type.toLowerCase(),e=e.effectiveType&&e.effectiveType.toLowerCase();return 0<=window.navigator.userAgent.toLocaleLowerCase().indexOf("wifi")||"wifi"===t||"wifi"===e?4:"slow-2g"===e?262144:"2g"===e?524288:"3g"===e?1048576:"4g"===e?32768:0}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={logLevel:"debug",levelMap:{debug:1,info:2,log:3,warn:4,error:5,none:6},enableLogLevel:function(t){var e=this.levelMap[t];if(null==e)return!1;var n=this.levelMap[this.logLevel];return null!=t&&n<=e}};["debug","info","log","warn","error"].map((function(t){r[t]=function(){if(this.enableLogLevel(t)){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(e=console)[t].apply(e,["track-js,"].concat(r))}}}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"e",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"h",(function(){return s})),n.d(e,"f",(function(){return a})),n.d(e,"g",(function(){return u})),n.d(e,"d",(function(){return h})),n.d(e,"c",(function(){return c}));var r={PAGE_CHANGE:1,UI_ACTION:2,CONSOLE_ERROR:3,PERF_PAGE_LOAD:4,PERF_REQUEST:5,REQUEST_NETWORK_ERROR:6,REQUEST_LOGIC_ERROR:7,PERF_APP_LAUNCH:8,LAUNCH_REFER:9,APP_SCRIPT_ERROR:10,PAGE_NOT_FOUND_ERROR:11,WEB_VIEW_LOAD_ERROR:12},i={APP_TRACKER:"appTracker",CONSOLE_TRACKER:"consoleTracker",PAGE_TRACKER:"pageTracker",Web_PAGE_TRACKER:"webPageTracker",REQUEST_TRACKER:"requestTracker",WEB_VIEW_TRACKER:"webViewTracker",UI_ACTION_TRACKER:"uiActionTracker",JS_ERROR_TRACKER:"jsErrorTracker"},o={GET_CURRENT_PAGE_URL_WITH_PARAMS:"getCurrentPageUrlWithParams",GET_CURRENT_PAGE_IDENTIFY:"getCurrentPageIdentify",GET_PAGE_ID:"getPageId",GET_CURRENT_PAGE:"getCurrentPage",GET_WX_VERSION:"getWxVersion",GET_CURRENT_PAGE_URL:"getCurrentPageUrl",GET_NETTYPE:"getNetType",STORE_PUT:"storePut",STORE_GET:"storeGet",HTTP_REQUEST:"httpRequest",GET_DISPLAY:"getDisplay",ON_START:"onStart",CONFIG_BIND:"configBind",GET_PERFORMANCE:"getPerformance",GET_JS_ERROR:"getJSError",GET_DEVICE_INFO:"getDeviceInfo",GET_OS_INFO:"getOSInfo",GET_BROWSER:"getBrowser",GET_IMAGE_INFO:"getImageInfo",DOWN_LOAD_FILE:"downloadFile",LOCAL_STORAGE_SET_SYNC:"localStorageSetSync",LOCAL_STORAGE_GET_SYNC:"localStorageGetSync",LOCAL_STORAGE_REMOVE_SYNC:"localStorageRemoveSync",LOCAL_STORAGE_GET_ASYNC:"localStorageGetAsync",LOCAL_STORAGE_SET_ASYNC:"localStorageSetAsync"},s={CLICK:1,LONG_PRESS:2,SCROLL:3,KEY:4,SCREEN_ROTATION:5,ZOOM:6,INPUT:7,REFRESH:8,EXPOSE:9,OTHERS:100},a=(Object.assign({},{REQUEST_THRESHOLD:"request_threshold",PAGE_THRESHOLD:"page_threshold",APP_KEY:"app_key",APP_ID:"app_id",USER_ID:"user_id",UUID:"uuid",DEVICE_ID:"device_id",QAPM_BASE_URL:"qapm_base_url",JS_ERROR_ENABLE:"js_error_enable",PERFORMANCE_ENABLE:"performance_enable",THRESHOLD:"Threshold",VERSION:"version",CHANNEL_OPEN:"channel_open",CHANNEL_INSTALL:"channel_install",NET_TYPE:"net_type",NET_OP:"net_op",BUCKET:"bucket",BUCKETS:"buckets"},{APP_ID:"app_id",VERSION:"version",BUILD_ID:"build_id"}),{SDK_VER:"1.3.0",UNKNOW:"unknow",PAGE_BACKGROUND:"_background_",APM_UPLOAD_DEFAULT_DOMAIN:"https://beta.sngapm.qq.com/",ATHENA_UPLOAD_DEFAULT_DOMAIN:"https://athena.qq.com/",MINI_PROGRAM:"miniprogram"}),u={DEFAULT:1e3,UPLOAD:3e4,SLOW_WEB_VIEW:2800},h={data:{page_threshold:3e3,request_threshold:1e3,page:"",page_wxml_node_nums:-1,setdata_list:[],request_list:[],js_error_list:[],pic_request_nums_second:-1,methods:{}},extra_data:{}},c="_background_"},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));e=n(4);var r=n.n(e),i=(e=n(5),n.n(e)),o=n(1),s=n(13),a=n(0),u=n(11),h=n(6),c=n(15),l=function(){function t(e){r()(this,t),this._instance=null,this.pid=e.split("-")[1],this.deviceId=u.a.readItem("qapm_device_id"),this.upload=this.upload.bind(this),o.a.info("DataAlignTracker deviceId ",this.deviceId)}return i()(t,[{key:"upload",value:function(e){var n,r,i,u,l,f;o.a.info("dataalign upload ",this._instance,t.getInstance()),t.getInstance()?(n=e.resource,r=e.stage,i=e.state,f=e.eventId,u=void 0===(l=e.annotate)?"":l,e=h.d.getInstance().debug,l=a.y,Object(a.s)()&&(e=c.b.getInstance().debug,l=s.c),!0===e?(f={url:"https://service-p88k3sw2-1253358381.gz.apigw.tencentcs.com/release/resource_flow/",method:"POST",config:{headers:{"Content-Type":"application/json"}},data:{resource:n,category:this.pid,stage:r,state:i,value:1,annotate:u,d1:Object(a.v)(),d2:f,d7:this.deviceId}},o.a.info("DataAlignTracker upload",f),l(f,{})):o.a.info("DataAlignTracker close, debug is false")):o.a.info("DataAlignTracker close, instance is null")}}],[{key:"setInstance",value:function(t){t&&(o.a.info("set instance",t),this._instance=t)}},{key:"getInstance",value:function(){if(this._instance)return this._instance}}]),t}()},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return u})),n.d(e,"d",(function(){return h}));e=n(4);var r=n.n(e),i=(e=n(5),n.n(e)),o={url:"",start_time:0,bytes_sent:0,bytes_received:0,duration:-1,is_request_cache:0,is_http_error:0,status_code:-1},s={data:{page_threshold:3e3,request_threshold:1e3,page:"",page_xml_node_nums:-1,is_https_used:!0,request_list:[],js_error_list:[],performance:{},pic_request_nums_second:-1,methods:{}},extra_data:{}},a={begin:0,end:0},u={expose_threshold:500,expose_area_threshold:.5},h=function(){function t(){r()(this,t),this.singleData=Object.assign(s),this.requestItem=Object.assign(o),this.isDataChanged=!1,this.userId="",this.app={net_op:"",brand:"",channel_open:"",channel_install:"",net_type:""},this.urlCache={},this.debug=!1,this.encrypt=!1}return i()(t,null,[{key:"getInstance",value:function(){return t.prototype.Instance=t.prototype.Instance?t.prototype.Instance:new t}}]),t}()},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,n){var r=n(67);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){var r=n(20),i=n(8);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?i(t):e}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));e=n(4);var r=n.n(e),i=(e=n(5),n.n(e)),o=n(0),s=function(){function t(){r()(this,t)}return i()(t,null,[{key:"indexName",value:function(t){return"fs-".concat(t,"-index")}},{key:"contentKey",value:function(t,e){return"fs-".concat(t,"-").concat(e)}},{key:"getIndex",value:function(e){return e=t.indexName(e),null!==(e=Object(o.s)()?wx.getStorageSync(e):localStorage.getItem(e))&&""!==e||(e=-1),parseInt(e)}},{key:"appendString",value:function(e,n){var r=t.getIndex(e);r+=1,Object(o.s)()?wx.setStorageSync(t.contentKey(e,r),n):localStorage.setItem(t.contentKey(e,r),n),Object(o.s)()?wx.setStorageSync(t.indexName(e),r):localStorage.setItem(t.indexName(e),r)}},{key:"readAll",value:function(e){var n="",r=t.getIndex(e);if(0<=r)for(var i=0;i<=r;i++)n+=Object(o.s)()?wx.getStorageSync(t.contentKey(e,i)):localStorage.getItem(t.contentKey(e,i));return n}},{key:"readItem",value:function(t){return Object(o.s)()?wx.getStorageSync(t):localStorage.getItem(t)}},{key:"removeItem",value:function(t){Object(o.s)()?wx.removeStorageSync(t):localStorage.removeItem(t)}},{key:"setItem",value:function(t,e){Object(o.s)()?wx.setStorageSync(t,e):localStorage.setItem(t,e)}},{key:"remove",value:function(e){var n=t.getIndex(e);if(0<=n)for(var r=0;r<=n;r++)Object(o.s)()?wx.removeStorageSync(t.contentKey(e,r)):localStorage.removeItem(t.contentKey(e,r));Object(o.s)()?wx.removeStorageSync(t.indexName(e)):localStorage.removeItem(t.indexName(e))}}]),t}()},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return c}));var r=n(4),i=n.n(r),o=(r=n(5),n.n(r)),s=n(2),a=n(46),u=n(1),h=function(){function e(){i()(this,e),this.instance=null,this.conf={appId:"",version:"",userId:""},this.plugins={},this.pluginInstances={},this.impl={getCurrentPageUrl:null,getPageId:null,getPageMark:null,getOSInfo:null,storePut:null,storeGet:null,httpRequest:null,getDeviceInfo:null,onStart:null,configBind:null},this.auth=!1,this.refs={},this.global=t||{}}return o()(e,[{key:"enableTracker",value:function(t,n){try{var r,i=this.plugins[t];i?(r=new i(e.getInstance(),n||{}),(this.pluginInstances[t]=r).init(),r.start()):u.a.log("tracker not exists:",t)}catch(t){u.a.error(t)}}},{key:"enableAllTracker",value:function(t){try{t=t||{};var e=this;Object.keys(s.e).forEach((function(n){e.enableTracker(s.e[n],t[s.e[n]]||{})}))}catch(t){u.a.error(t)}}}],[{key:"getInstance",value:function(){return e.prototype.Instance=e.prototype.Instance?e.prototype.Instance:new e}},{key:"customTrack",value:function(t,e){return a.a.getInstance().applySubscribeWithOpts(t,{immediately:e})}},{key:"start",value:function(){c(s.b.ON_START)}}]),e}();function c(t){try{var e=h.getInstance().impl[t];if(!e)return;for(var n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return e.apply(this,r)}catch(t){u.a.error(t)}}}).call(this,n(26))},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o}));var r=function(){var t=function(){var t=getCurrentPages();return Array.isArray(t)&&0<t.length?t[t.length-1]:{}}();return t&&t.route||""},i=function(){return r()},o=function(t,e){wx.request({url:t.url,method:t.method,header:t.config.headers,data:t.data,success:e.onSuccess,fail:e.onError,complete:e.onFinally})}},function(t,e,n){"use strict";(function(t,r){n.d(e,"a",(function(){return m}));var i=n(4),o=n.n(i),s=(i=n(5),n.n(i)),a=n(1),u=n(0),h=n(13),c=n(2),l=n(11),f=n(6),d=n(15),p=n(3),g=n(16),m=function(){function e(n){o()(this,e),a.a.info("tracker constructor",n),this.trackerOption=n,this.name="Tracker",this.refs={},this.global=t||{},this.updateData=(this.isWx?d.b:f.d).getInstance(),this.qapmBaseUrl=n.qapm_base_url,this.requestThreshold=c.f.UNKNOW,this.pageThreshold=c.f.UNKNOW,this._athenaMetaJson={user_id:n.user_id||f.d.getInstance().userId,build_id:c.f.UNKNOW,bucket:"",buckets:[],flag:0,app:this.app},this._metaJson={api_ver:"1",app_key:n.app_key.split("-")[0],p_id:n.app_key.split("-")[1],arch:"unknow",client_identify:Object(u.v)(),deviceid:this.getDeviceId(),plugin:n.plugin,plugin_ver:"1",rdmuuid:Object(u.e)(n.app_key+n.version),sdk_ver:void 0!==r?"1.3.0":c.f.SDK_VER,uin:n.user_id||f.d.getInstance().userId,version:n.version,apn_type:Object(u.i)(),extra_data:{},browser:this.isWx?wx.getSystemInfoSync().platform:Object(u.f)(),zone:c.f.MINI_PROGRAM,category:c.f.MINI_PROGRAM},this.uploadEvent=this.uploadEvent.bind(this),this.resetUpdateData=this.resetUpdateData.bind(this)}return s()(e,[{key:"resetUpdateData",value:function(){this.updateData.singleData.data.request_list=[],this.updateData.singleData.data.js_error_list=[],this.isWx?this.updateData.singleData.data.methods=[]:this.updateData.singleData.data.performance={}}},{key:"app",get:function(){return this.isWx?{brand:wx.getSystemInfoSync().brand,channel_open:String(wx.getLaunchOptionsSync().scene),channel_install:"weixin",net_type:c.f.UNKNOW,track_init_flag:"0",lang:wx.getSystemInfoSync().language}:{brand:f.d.getInstance().app.brand||Object(u.j)(),channel_open:f.d.getInstance().app.channel_open||(Object(u.p)()?"Android":Object(u.t)()?"iOS":navigator.platform),channel_install:f.d.getInstance().app.channel_install||"web",net_type:f.d.getInstance().app.net_type||Object(u.l)(),net_op:f.d.getInstance().app.net_op,track_init_flag:"0",lang:navigator.language}}},{key:"athenaMetaJson",get:function(){return Object.assign({},this._athenaMetaJson,{app:this.app,app_id:this._metaJson.p_id,version:this._metaJson.version,device_id:this._metaJson.deviceid,model:this.metaJson.device,os:this.metaJson.os||"unknow",display:this.display,user_id:this._athenaMetaJson.user_id||f.d.getInstance().userId})}},{key:"metaJson",get:function(){if(this.isWx){var t=wx.getSystemInfoSync(),e=wx.getLaunchOptionsSync();return Object.assign({},this._metaJson,{device:"".concat(t.brand," ").concat(t.model),manu:t.brand,os:t.system,wx_version:t.version,platform:t.platform,refer_open:e.scene})}return this._metaJson.uin=this._metaJson.uin||f.d.getInstance().userId,Object.assign({},this._metaJson,{device:Object(u.k)(),manu:Object(u.j)(),os:Object(u.x)(),wx_version:"unknow",platform:navigator.platform,refer_open:document.referrer})}},{key:"isWx",get:function(){return"undefined"!=typeof wx}},{key:"getDeviceId",value:function(){if(Object(u.p)()||Object(u.t)())return this.trackerOption.device_id||"unknow";var t=l.a.readItem("qapm_device_id");return t||(t="".concat(Object(u.v)(),"--").concat(Object(u.u)()),l.a.setItem("qapm_device_id",t)),t}},{key:"display",get:function(){if(this.isWx){var t=wx.getSystemInfoSync();return"".concat(parseInt(t.pixelRatio*t.windowWidth),",").concat(parseInt(t.pixelRatio*t.windowHeight))}return"".concat(window.screen.width,",").concat(window.screen.height)}},{key:"getOpts",value:function(){return this.opts}},{key:"qapmUrl",get:function(){var t=this.qapmBaseUrl;t.endsWith("/")||(t+="/");var e=this._metaJson.p_id,n=this._metaJson.version,r=this._metaJson.uin,i=this._metaJson.plugin;return Object(g.a)()?"".concat(t,"entrance/").concat(e,"/uploadEncryptedJson/?p_id=").concat(e,"&plugin=").concat(i,"&version=").concat(n,"&uin=").concat(r,"&a=1&format=2"):"".concat(t,"entrance/").concat(e,"/uploadJson/?p_id=").concat(e,"&plugin=").concat(i,"&version=").concat(n,"&uin=").concat(r,"&a=1")}},{key:"athenaUrl",get:function(){var t=this.qapmBaseUrl;return t.endsWith("/")||(t+="/"),(Object(g.a)()?"".concat(t,"entrance/athena/uploadEncryptedJson/"):"".concat(t,"entrance/athena/uploadJson/")).concat(this._metaJson.p_id,"/").concat(this._metaJson.version,"/?format=2&user_id=").concat(this._metaJson.uin)}},{key:"uploadEvent",value:function(t,e){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"application/json";try{var i,o,s,c,f,d,m,y=this,v={method:"POST",url:e,data:t,config:{headers:{"Content-Type":r}}},b={onSuccess:function(e){if("string"==typeof e.data)try{e.data=JSON.parse(e.data)}catch(t){a.a.info("json parse error,just ok",t,e)}200===e.statusCode&&1e3===e.data.status&&t.exception&&y.updateData.singleData.data.js_error_list.push(e.data.apm_identify)}};if(Object(g.a)()&&(o=(i=Object(g.b)(v.data)).encryptData,s=i.checkCode,c=i.encryptSm4Key,f=i.sm4Iv,d=i.encryptCallback,v.url+="&key=".concat(c,"&iv=").concat(f,"&needDecode=1"),v.data=o,v.config.headers["Content-Type"]="application/octet-stream",v.config.headers["Check-Code"]=s,m=b.onSuccess,b.onSuccess=function(t){"function"==typeof m&&m(t),d&&d(t)}),!1===n){try{l.a.setItem("QAPM_beforeunload_data",JSON.stringify({requestConfig:v,callback:b}))}catch(t){a.a.info("async false")}return}this.isWx?Object(h.c)(v,b):Object(u.y)(v,b,n),p.a.getInstance().upload({resource:"ALL",stage:"web/wx.sdk.upload",state:"ok",eventId:"",annotate:""})}catch(t){a.a.error(t),p.a.getInstance().upload({resource:"ALL",stage:"web/wx.sdk.upload",state:"fail",eventId:"",annotate:JSON.stringify(t)})}}},{key:"stop",value:function(){}},{key:"remove",value:function(){}}]),e}()}).call(this,n(26),n(41))},function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return a}));e=n(4);var r=n.n(e),i=(e=n(5),n.n(e)),o={url:"",start_time:0,bytes_sent:0,bytes_received:0,duration:-1,is_request_cache:0,is_http_error:0,status_code:-1},s={data:{page_threshold:3e3,request_threshold:1e3,page:"",page_wxml_node_nums:-1,setdata_list:[],request_list:[],js_error_list:[],pic_request_nums_second:-1,methods:{}},extra_data:{}},a=function(){function t(){r()(this,t),this.singleData=Object.assign(s),this.requestItem=Object.assign(o),this.isDataChanged=!1,this.debug=!1,this.encrypt=!1,this.urlCache={}}return i()(t,null,[{key:"getInstance",value:function(){return t.prototype.Instance=t.prototype.Instance?t.prototype.Instance:new t}}]),t}()},function(t,e,n){"use strict";n.d(e,"c",(function(){return p})),n.d(e,"a",(function(){return g})),n.d(e,"b",(function(){return m}));var r=n(21),i=(e=n(25),n.n(e)),o=n(0),s=n(13),a=n(11),u=n(1),h=n(6),c=n(15),l="qapmSm2PubKey",f="",d="";function p(t,e){""!==t&&""!==e?(f=t,d=e,(Object(o.s)()?s.c:o.y)({url:"".concat(t,"/entrance/").concat(e,"/requestForPubKey/"),method:"GET",config:{headers:{}}},{onSuccess:function(t){if(u.a.info("updateSm2PubKey res",t),200===t.statusCode)try{var e=t.data;"string"==typeof t.data&&(e=JSON.parse(t.data)),a.a.setItem(l,e.pub_key)}catch(t){u.a.info("updateSm2PubKey",t)}}})):u.a.info("qapmBaseUrl or pId is empty, updateSm2PubKey fail")}function g(){return!!(Object(o.s)()?c.b:h.d).getInstance().encrypt}function m(t){var e=a.a.readItem(l);if(!e)return!1;"string"!=typeof t&&(t=JSON.stringify(t));var n=i()(Object(o.v)()).substr(0,16),s=r.utils.stringToByteArrayInUtf8(n),h=i()(Object(o.v)()).substr(0,16);n=r.utils.stringToByteArrayInUtf8(h),n=new r.SM4({key:s,mode:"cbc",iv:n}).encrypt(t),s=(new r.SM2).encrypt(e,s);return{encryptData:n,checkCode:i()(t),encryptSm4Key:s,sm4Iv:h,encryptCallback:function(t){1415===t.data.status&&p(),1507===t.data.status&&p(f,d),1508===t.data.status&&u.a.info(t),1509===t.data.status&&u.a.info(t)}}}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){var n;e&&(t.super_=e,(n=function(){}).prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t)}},function(t,e,n){var r=n(68);function i(e,n,o){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=i=Reflect.get:t.exports=i=function(t,e,n){if(t=r(t,e))return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(n):e.value},i(e,n,o||e)}t.exports=i},function(t,e,n){"use strict";const r=n(17),i=n(30).Reporter,o=n(28).Buffer;function s(t,e){i.call(this,e),o.isBuffer(t)?(this.base=t,this.offset=0,this.length=t.length):this.error("Input not Buffer")}function a(t,e){if(Array.isArray(t))this.length=0,this.value=t.map((function(t){return a.isEncoderBuffer(t)||(t=new a(t,e)),this.length+=t.length,t}),this);else if("number"==typeof t){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if("string"==typeof t)this.value=t,this.length=o.byteLength(t);else{if(!o.isBuffer(t))return e.error("Unsupported type: "+typeof t);this.value=t,this.length=t.length}}r(s,i),(e.DecoderBuffer=s).isDecoderBuffer=function(t){return t instanceof s||"object"==typeof t&&o.isBuffer(t.base)&&"DecoderBuffer"===t.constructor.name&&"number"==typeof t.offset&&"number"==typeof t.length&&"function"==typeof t.save&&"function"==typeof t.restore&&"function"==typeof t.isEmpty&&"function"==typeof t.readUInt8&&"function"==typeof t.skip&&"function"==typeof t.raw},s.prototype.save=function(){return{offset:this.offset,reporter:i.prototype.save.call(this)}},s.prototype.restore=function(t){const e=new s(this.base);return e.offset=t.offset,e.length=this.offset,this.offset=t.offset,i.prototype.restore.call(this,t.reporter),e},s.prototype.isEmpty=function(){return this.offset===this.length},s.prototype.readUInt8=function(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||"DecoderBuffer overrun")},s.prototype.skip=function(t,e){if(!(this.offset+t<=this.length))return this.error(e||"DecoderBuffer overrun");const n=new s(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+t,this.offset+=t,n},s.prototype.raw=function(t){return this.base.slice((t||this).offset,this.length)},(e.EncoderBuffer=a).isEncoderBuffer=function(t){return t instanceof a||"object"==typeof t&&"EncoderBuffer"===t.constructor.name&&"number"==typeof t.length&&"function"==typeof t.join},a.prototype.join=function(t,e){return t=t||o.alloc(this.length),e=e||0,0===this.length||(Array.isArray(this.value)?this.value.forEach((function(n){n.join(t,e),e+=n.length})):("number"==typeof this.value?t[e]=this.value:"string"==typeof this.value?t.write(this.value,e):o.isBuffer(this.value)&&this.value.copy(t,e),e+=this.length)),t}},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e,n){var r=n(49),i=n(27),o=n(63);n=n(24);t.exports={SM2:r,SM3:i,SM4:o,utils:n}},function(t,e,n){(function(){function e(t,e,n){null!=t&&("number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function n(){return new e(null)}var r=(r="undefined"!=typeof navigator)&&"Microsoft Internet Explorer"==navigator.appName?(e.prototype.am=function(t,e,n,r,i,o){for(var s=32767&e,a=e>>15;0<=--o;){var u=32767&this[t],h=this[t++]>>15,c=a*u+h*s;i=((u=s*u+((32767&c)<<15)+n[r]+(1073741823&i))>>>30)+(c>>>15)+a*h+(i>>>30),n[r++]=1073741823&u}return i},30):r&&"Netscape"!=navigator.appName?(e.prototype.am=function(t,e,n,r,i,o){for(;0<=--o;){var s=e*this[t++]+n[r]+i;i=Math.floor(s/67108864),n[r++]=67108863&s}return i},26):(e.prototype.am=function(t,e,n,r,i,o){for(var s=16383&e,a=e>>14;0<=--o;){var u=16383&this[t],h=this[t++]>>14,c=a*u+h*s;i=((u=s*u+((16383&c)<<14)+n[r]+i)>>28)+(c>>14)+a*h,n[r++]=268435455&u}return i},28);e.prototype.DB=r,e.prototype.DM=(1<<r)-1,e.prototype.DV=1<<r,e.prototype.FV=Math.pow(2,52),e.prototype.F1=52-r,e.prototype.F2=2*r-52;for(var i=new Array,o="0".charCodeAt(0),s=0;s<=9;++s)i[o++]=s;for(o="a".charCodeAt(0),s=10;s<36;++s)i[o++]=s;for(o="A".charCodeAt(0),s=10;s<36;++s)i[o++]=s;function a(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function u(t,e){return null==(e=i[t.charCodeAt(e)])?-1:e}function h(t){var e=n();return e.fromInt(t),e}function c(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function l(t){this.m=t}function f(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function d(t,e){return t&e}function p(t,e){return t|e}function g(t,e){return t^e}function m(t,e){return t&~e}function y(){}function v(t){return t}function b(t){this.r2=n(),this.q3=n(),e.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}l.prototype.convert=function(t){return t.s<0||0<=t.compareTo(this.m)?t.mod(this.m):t},l.prototype.revert=function(t){return t},l.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},l.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},l.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},f.prototype.convert=function(t){var r=n();return t.abs().dlShiftTo(this.m.t,r),r.divRemTo(this.m,null,r),t.s<0&&0<r.compareTo(e.ZERO)&&this.m.subTo(r,r),r},f.prototype.revert=function(t){var e=n();return t.copyTo(e),this.reduce(e),e},f.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[n=e+this.m.t]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),0<=t.compareTo(this.m)&&t.subTo(this.m,t)},f.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},f.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},e.prototype.copyTo=function(t){for(var e=this.t-1;0<=e;--e)t[e]=this[e];t.t=this.t,t.s=this.s},e.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,0<t?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},e.prototype.fromString=function(t,n){var r;if(16==n)r=4;else if(8==n)r=3;else if(256==n)r=8;else if(2==n)r=1;else if(32==n)r=5;else{if(4!=n)return void this.fromRadix(t,n);r=2}this.t=0,this.s=0;for(var i=t.length,o=!1,s=0;0<=--i;){var a=8==r?255&t[i]:u(t,i);a<0?"-"==t.charAt(i)&&(o=!0):(o=!1,0==s?this[this.t++]=a:s+r>this.DB?(this[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this[this.t++]=a>>this.DB-s):this[this.t-1]|=a<<s,(s+=r)>=this.DB&&(s-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,0<s&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),o&&e.ZERO.subTo(this,this)},e.prototype.clamp=function(){for(var t=this.s&this.DM;0<this.t&&this[this.t-1]==t;)--this.t},e.prototype.dlShiftTo=function(t,e){for(var n=this.t-1;0<=n;--n)e[n+t]=this[n];for(n=t-1;0<=n;--n)e[n]=0;e.t=this.t+t,e.s=this.s},e.prototype.drShiftTo=function(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s},e.prototype.lShiftTo=function(t,e){for(var n=t%this.DB,r=this.DB-n,i=(1<<r)-1,o=Math.floor(t/this.DB),s=this.s<<n&this.DM,a=this.t-1;0<=a;--a)e[a+o+1]=this[a]>>r|s,s=(this[a]&i)<<n;for(a=o-1;0<=a;--a)e[a]=0;e[o]=s,e.t=this.t+o+1,e.s=this.s,e.clamp()},e.prototype.rShiftTo=function(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var r=t%this.DB,i=this.DB-r,o=(1<<r)-1;e[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)e[s-n-1]|=(this[s]&o)<<i,e[s-n]=this[s]>>r;0<r&&(e[this.t-n-1]|=(this.s&o)<<i),e.t=this.t-n,e.clamp()}},e.prototype.subTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:0<r&&(e[n++]=r),e.t=n,e.clamp()},e.prototype.multiplyTo=function(t,n){var r=this.abs(),i=t.abs(),o=r.t;for(n.t=o+i.t;0<=--o;)n[o]=0;for(o=0;o<i.t;++o)n[o+r.t]=r.am(0,i[o],n,o,0,r.t);n.s=0,n.clamp(),this.s!=t.s&&e.ZERO.subTo(n,n)},e.prototype.squareTo=function(t){for(var e=this.abs(),n=t.t=2*e.t;0<=--n;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}0<t.t&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()},e.prototype.divRemTo=function(t,r,i){var o=t.abs();if(!(o.t<=0)){if((f=this.abs()).t<o.t)return null!=r&&r.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=n());var s=n(),a=this.s,u=t.s;0<(t=this.DB-c(o[o.t-1]))?(o.lShiftTo(t,s),f.lShiftTo(t,i)):(o.copyTo(s),f.copyTo(i));var h=s.t,l=s[h-1];if(0!=l){var f=l*(1<<this.F1)+(1<h?s[h-2]>>this.F2:0),d=this.FV/f,p=(1<<this.F1)/f,g=1<<this.F2,m=i.t,y=m-h,v=null==r?n():r;for(s.dlShiftTo(y,v),0<=i.compareTo(v)&&(i[i.t++]=1,i.subTo(v,i)),e.ONE.dlShiftTo(h,v),v.subTo(s,s);s.t<h;)s[s.t++]=0;for(;0<=--y;){var b=i[--m]==l?this.DM:Math.floor(i[m]*d+(i[m-1]+g)*p);if((i[m]+=s.am(0,b,i,y,0,h))<b)for(s.dlShiftTo(y,v),i.subTo(v,i);i[m]<--b;)i.subTo(v,i)}null!=r&&(i.drShiftTo(h,r),a!=u&&e.ZERO.subTo(r,r)),i.t=h,i.clamp(),0<t&&i.rShiftTo(t,i),a<0&&e.ZERO.subTo(i,i)}}},e.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return 0<(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)?this.DV-e:-e},e.prototype.isEven=function(){return 0==(0<this.t?1&this[0]:this.s)},e.prototype.exp=function(t,r){if(4294967295<t||t<1)return e.ONE;var i,o=n(),s=n(),a=r.convert(this),u=c(t)-1;for(a.copyTo(o);0<=--u;)r.sqrTo(o,s),0<(t&1<<u)?r.mulTo(s,a,o):(i=o,o=s,s=i);return r.revert(o)},e.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,r=(1<<e)-1,i=!1,o="",s=this.t,u=this.DB-s*this.DB%e;if(0<s--)for(u<this.DB&&0<(n=this[s]>>u)&&(i=!0,o=a(n));0<=s;)u<e?(n=(this[s]&(1<<u)-1)<<e-u,n|=this[--s]>>(u+=this.DB-e)):(n=this[s]>>(u-=e)&r,u<=0&&(u+=this.DB,--s)),(i=0<n||i)&&(o+=a(n));return i?o:"0"},e.prototype.negate=function(){var t=n();return e.ZERO.subTo(this,t),t},e.prototype.abs=function(){return this.s<0?this.negate():this},e.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;0<=--n;)if(0!=(e=this[n]-t[n]))return e;return 0},e.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+c(this[this.t-1]^this.s&this.DM)},e.prototype.mod=function(t){var r=n();return this.abs().divRemTo(t,null,r),this.s<0&&0<r.compareTo(e.ZERO)&&t.subTo(r,r),r},e.prototype.modPowInt=function(t,e){return e=new(t<256||e.isEven()?l:f)(e),this.exp(t,e)},e.ZERO=h(0),e.ONE=h(1),y.prototype.convert=v,y.prototype.revert=v,y.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n)},y.prototype.sqrTo=function(t,e){t.squareTo(e)},b.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=n();return t.copyTo(e),this.reduce(e),e},b.prototype.revert=function(t){return t},b.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);0<=t.compareTo(this.m);)t.subTo(this.m,t)},b.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},b.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var _,w=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],E=(1<<26)/w[w.length-1];function T(){var t;t=(new Date).getTime(),M[S++]^=255&t,M[S++]^=t>>8&255,M[S++]^=t>>16&255,M[S++]^=t>>24&255,x<=S&&(S-=x)}if(e.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},e.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||36<t)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),i=h(r),o=n(),s=n(),a="";for(this.divRemTo(i,o,s);0<o.signum();)a=(r+s.intValue()).toString(t).substr(1)+a,o.divRemTo(i,o,s);return s.intValue().toString(t)+a},e.prototype.fromRadix=function(t,n){this.fromInt(0);for(var r=this.chunkSize(n=null==n?10:n),i=Math.pow(n,r),o=!1,s=0,a=0,h=0;h<t.length;++h){var c=u(t,h);c<0?"-"==t.charAt(h)&&0==this.signum()&&(o=!0):(a=n*a+c,++s>=r&&(this.dMultiply(i),this.dAddOffset(a,0),a=s=0))}0<s&&(this.dMultiply(Math.pow(n,s)),this.dAddOffset(a,0)),o&&e.ZERO.subTo(this,this)},e.prototype.fromNumber=function(t,n,r){if("number"==typeof n)if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(e.ONE.shiftLeft(t-1),p,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(n);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(e.ONE.shiftLeft(t-1),this);else{var i=new Array;r=7&t;i.length=1+(t>>3),n.nextBytes(i),0<r?i[0]&=(1<<r)-1:i[0]=0,this.fromString(i,256)}},e.prototype.bitwiseTo=function(t,e,n){for(var r,i=Math.min(t.t,this.t),o=0;o<i;++o)n[o]=e(this[o],t[o]);if(t.t<this.t){for(r=t.s&this.DM,o=i;o<this.t;++o)n[o]=e(this[o],r);n.t=this.t}else{for(r=this.s&this.DM,o=i;o<t.t;++o)n[o]=e(r,t[o]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()},e.prototype.changeBit=function(t,n){return t=e.ONE.shiftLeft(t),this.bitwiseTo(t,n,t),t},e.prototype.addTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]+t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t[n],e[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,0<r?e[n++]=r:r<-1&&(e[n++]=this.DV+r),e.t=n,e.clamp()},e.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},e.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},e.prototype.multiplyLowerTo=function(t,e,n){var r,i=Math.min(this.t+t.t,e);for(n.s=0,n.t=i;0<i;)n[--i]=0;for(r=n.t-this.t;i<r;++i)n[i+this.t]=this.am(0,t[i],n,i,0,this.t);for(r=Math.min(t.t,e);i<r;++i)this.am(0,t[i],n,i,0,e-i);n.clamp()},e.prototype.multiplyUpperTo=function(t,e,n){var r=n.t=this.t+t.t- --e;for(n.s=0;0<=--r;)n[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n[this.t+r-e]=this.am(e-r,t[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)},e.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(0<this.t)if(0==e)n=this[0]%t;else for(var r=this.t-1;0<=r;--r)n=(e*n+this[r])%t;return n},e.prototype.millerRabin=function(t){var r=this.subtract(e.ONE),i=r.getLowestSetBit();if(i<=0)return!1;var o=r.shiftRight(i);w.length<(t=t+1>>1)&&(t=w.length);for(var s=n(),a=0;a<t;++a){s.fromInt(w[Math.floor(Math.random()*w.length)]);var u=s.modPow(o,this);if(0!=u.compareTo(e.ONE)&&0!=u.compareTo(r)){for(var h=1;h++<i&&0!=u.compareTo(r);)if(0==(u=u.modPowInt(2,this)).compareTo(e.ONE))return!1;if(0!=u.compareTo(r))return!1}}return!0},e.prototype.clone=function(){var t=n();return this.copyTo(t),t},e.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},e.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},e.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},e.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},e.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var n,r=this.DB-t*this.DB%8,i=0;if(0<t--)for(r<this.DB&&(n=this[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);0<=t;)r<8?(n=(this[t]&(1<<r)-1)<<8-r,n|=this[--t]>>(r+=this.DB-8)):(n=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(0<i||n!=this.s)&&(e[i++]=n);return e},e.prototype.equals=function(t){return 0==this.compareTo(t)},e.prototype.min=function(t){return this.compareTo(t)<0?this:t},e.prototype.max=function(t){return 0<this.compareTo(t)?this:t},e.prototype.and=function(t){var e=n();return this.bitwiseTo(t,d,e),e},e.prototype.or=function(t){var e=n();return this.bitwiseTo(t,p,e),e},e.prototype.xor=function(t){var e=n();return this.bitwiseTo(t,g,e),e},e.prototype.andNot=function(t){var e=n();return this.bitwiseTo(t,m,e),e},e.prototype.not=function(){for(var t=n(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},e.prototype.shiftLeft=function(t){var e=n();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},e.prototype.shiftRight=function(t){var e=n();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},e.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+function(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}(this[t]);return this.s<0?this.t*this.DB:-1},e.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=function(t){for(var e=0;0!=t;)t&=t-1,++e;return e}(this[n]^e);return t},e.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},e.prototype.setBit=function(t){return this.changeBit(t,p)},e.prototype.clearBit=function(t){return this.changeBit(t,m)},e.prototype.flipBit=function(t){return this.changeBit(t,g)},e.prototype.add=function(t){var e=n();return this.addTo(t,e),e},e.prototype.subtract=function(t){var e=n();return this.subTo(t,e),e},e.prototype.multiply=function(t){var e=n();return this.multiplyTo(t,e),e},e.prototype.divide=function(t){var e=n();return this.divRemTo(t,e,null),e},e.prototype.remainder=function(t){var e=n();return this.divRemTo(t,null,e),e},e.prototype.divideAndRemainder=function(t){var e=n(),r=n();return this.divRemTo(t,e,r),new Array(e,r)},e.prototype.modPow=function(t,e){var r=t.bitLength(),i=h(1);if(r<=0)return i;var o=r<18?1:r<48?3:r<144?4:r<768?5:6,s=new(r<8?l:e.isEven()?b:f)(e),a=new Array,u=3,d=o-1,p=(1<<o)-1;if(a[1]=s.convert(this),1<o){var g=n();for(s.sqrTo(a[1],g);u<=p;)a[u]=n(),s.mulTo(g,a[u-2],a[u]),u+=2}var m,y,v=t.t-1,_=!0,w=n();for(r=c(t[v])-1;0<=v;){for(d<=r?m=t[v]>>r-d&p:(m=(t[v]&(1<<r+1)-1)<<d-r,0<v&&(m|=t[v-1]>>this.DB+r-d)),u=o;0==(1&m);)m>>=1,--u;if((r-=u)<0&&(r+=this.DB,--v),_)a[m].copyTo(i),_=!1;else{for(;1<u;)s.sqrTo(i,w),s.sqrTo(w,i),u-=2;0<u?s.sqrTo(i,w):(y=i,i=w,w=y),s.mulTo(w,a[m],i)}for(;0<=v&&0==(t[v]&1<<r);)s.sqrTo(i,w),y=i,i=w,w=y,--r<0&&(r=this.DB-1,--v)}return s.revert(i)},e.prototype.modInverse=function(t){var n=t.isEven();if(this.isEven()&&n||0==t.signum())return e.ZERO;for(var r=t.clone(),i=this.clone(),o=h(1),s=h(0),a=h(0),u=h(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),n?(o.isEven()&&s.isEven()||(o.addTo(this,o),s.subTo(t,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;i.isEven();)i.rShiftTo(1,i),n?(a.isEven()&&u.isEven()||(a.addTo(this,a),u.subTo(t,u)),a.rShiftTo(1,a)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);0<=r.compareTo(i)?(r.subTo(i,r),n&&o.subTo(a,o),s.subTo(u,s)):(i.subTo(r,i),n&&a.subTo(o,a),u.subTo(s,u))}return 0!=i.compareTo(e.ONE)?e.ZERO:0<=u.compareTo(t)?u.subtract(t):u.signum()<0?(u.addTo(t,u),u.signum()<0?u.add(t):u):u},e.prototype.pow=function(t){return this.exp(t,new y)},e.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();e.compareTo(n)<0&&(i=e,e=n,n=i);var r=e.getLowestSetBit(),i=n.getLowestSetBit();if(i<0)return e;for(0<(i=r<i?r:i)&&(e.rShiftTo(i,e),n.rShiftTo(i,n));0<e.signum();)0<(r=e.getLowestSetBit())&&e.rShiftTo(r,e),0<(r=n.getLowestSetBit())&&n.rShiftTo(r,n),0<=e.compareTo(n)?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return 0<i&&n.lShiftTo(i,n),n},e.prototype.isProbablePrime=function(t){var e,n=this.abs();if(1==n.t&&n[0]<=w[w.length-1]){for(e=0;e<w.length;++e)if(n[0]==w[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<w.length;){for(var r=w[e],i=e+1;i<w.length&&r<E;)r*=w[i++];for(r=n.modInt(r);e<i;)if(r%w[e++]==0)return!1}return n.millerRabin(t)},e.prototype.square=function(){var t=n();return this.squareTo(t),t},e.prototype.Barrett=b,null==M){var M=new Array,S=0;if("undefined"!=typeof window&&window.crypto)if(window.crypto.getRandomValues){var O=new Uint8Array(32);for(window.crypto.getRandomValues(O),k=0;k<32;++k)M[S++]=O[k]}else if("Netscape"==navigator.appName&&navigator.appVersion<"5")for(var A=window.crypto.random(32),k=0;k<A.length;++k)M[S++]=255&A.charCodeAt(k);for(;S<x;)k=Math.floor(65536*Math.random()),M[S++]=k>>>8,M[S++]=255&k;S=0,T()}function R(){if(null==_){for(T(),(_=new P).init(M),S=0;S<M.length;++S)M[S]=0;S=0}return _.next()}function I(){}function P(){this.i=0,this.j=0,this.S=new Array}I.prototype.nextBytes=function(t){for(var e=0;e<t.length;++e)t[e]=R()},P.prototype.init=function(t){for(var e,n,r=0;r<256;++r)this.S[r]=r;for(r=e=0;r<256;++r)e=e+this.S[r]+t[r%t.length]&255,n=this.S[r],this.S[r]=this.S[e],this.S[e]=n;this.i=0,this.j=0},P.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]};var x=256;t.exports={default:e,BigInteger:e,SecureRandom:I}}).call(this)},function(t,e,n){const r=n(22).BigInteger;t.exports=class{constructor(){this.p=new r("FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00000000FFFFFFFFFFFFFFFF",16),this.a=new r("FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00000000FFFFFFFFFFFFFFFC",16),this.b=new r("28E9FA9E9D9F5E344D5A9E4BCF6509A7F39789F515AB8F92DDBCBD414D940E93",16),this.Gx=new r("32C4AE2C1F1981195F9904466A39C9948FE30BBFF2660BE1715A4589334C74C7",16),this.Gy=new r("BC3736A2F4F6779C59BDCEE36B692153D0A9877CC62A474002DF32E52139F0A0",16),this.n=new r("FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFF7203DF6B21C6052B53BBF40939D54123",16),this.h=new r("1",16)}}},function(t,e,n){const r=n(34);t.exports={stringToByteArrayInUtf8:function(t){return function(t){if("undefined"!=typeof window&&window.TextEncoder)return new window.TextEncoder("utf-8").encode(t);return(new(0,n(36).TextEncoder)).encode(t)}(t)},utf8ByteArrayToString:function(t){if(-1!==t)return function(t){if("undefined"!=typeof window&&window.TextDecoder)return new window.TextDecoder("utf-8").decode(t);return(new(0,n(36).TextDecoder)).decode(t)}(t=Array.isArray(t)?new Uint8Array(t):t)},byteArrayToBase64:function(t){return r.fromByteArray(t)},base64ToByteArray:function(t){return r.toByteArray(t)},byteArrayToHex:function(t){for(let e=0;e<t.length;e++)t[e]=(t[e]>>>0)%256;const e=[];let n=0;for(let r=0;r<2*t.length;r+=2)e[r>>>3]|=parseInt(t[n],10)<<24-r%8*4,n++;const r=[];for(let n=0;n<t.length;n++){var i=e[n>>>2]>>>24-n%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},hexToByteArray:function(t){if("string"!=typeof t)throw new TypeError("Expected input to be a string");if(t.length%2!=0)throw new RangeError("Expected string to be an even number of characters");const e=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2)e[n/2]=parseInt(t.substring(n,n+2),16);return e}}},function(t,e,n){function r(t,e){t.constructor==String?t=(e&&"binary"===e.encoding?a:o).stringToBytes(t):s(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var n=i.bytesToWords(t),u=(t=8*t.length,1732584193),h=-271733879,c=-1732584194,l=271733878,f=0;f<n.length;f++)n[f]=16711935&(n[f]<<8|n[f]>>>24)|4278255360&(n[f]<<24|n[f]>>>8);n[t>>>5]|=128<<t%32,n[14+(64+t>>>9<<4)]=t;var d=r._ff,p=r._gg,g=r._hh,m=r._ii;for(f=0;f<n.length;f+=16){var y=u,v=h,b=c,_=l;u=d(u,h,c,l,n[f+0],7,-680876936),l=d(l,u,h,c,n[f+1],12,-389564586),c=d(c,l,u,h,n[f+2],17,606105819),h=d(h,c,l,u,n[f+3],22,-1044525330);u=d(u,h,c,l,n[f+4],7,-176418897),l=d(l,u,h,c,n[f+5],12,1200080426),c=d(c,l,u,h,n[f+6],17,-1473231341),h=d(h,c,l,u,n[f+7],22,-45705983),u=d(u,h,c,l,n[f+8],7,1770035416),l=d(l,u,h,c,n[f+9],12,-1958414417),c=d(c,l,u,h,n[f+10],17,-42063),h=d(h,c,l,u,n[f+11],22,-1990404162),u=d(u,h,c,l,n[f+12],7,1804603682),l=d(l,u,h,c,n[f+13],12,-40341101),c=d(c,l,u,h,n[f+14],17,-1502002290),u=p(u,h=d(h,c,l,u,n[f+15],22,1236535329),c,l,n[f+1],5,-165796510),l=p(l,u,h,c,n[f+6],9,-1069501632),c=p(c,l,u,h,n[f+11],14,643717713),h=p(h,c,l,u,n[f+0],20,-373897302),u=p(u,h,c,l,n[f+5],5,-701558691),l=p(l,u,h,c,n[f+10],9,38016083),c=p(c,l,u,h,n[f+15],14,-660478335),h=p(h,c,l,u,n[f+4],20,-405537848),u=p(u,h,c,l,n[f+9],5,568446438),l=p(l,u,h,c,n[f+14],9,-1019803690),c=p(c,l,u,h,n[f+3],14,-187363961),h=p(h,c,l,u,n[f+8],20,1163531501),u=p(u,h,c,l,n[f+13],5,-1444681467),l=p(l,u,h,c,n[f+2],9,-51403784),c=p(c,l,u,h,n[f+7],14,1735328473),u=g(u,h=p(h,c,l,u,n[f+12],20,-1926607734),c,l,n[f+5],4,-378558),l=g(l,u,h,c,n[f+8],11,-2022574463),c=g(c,l,u,h,n[f+11],16,1839030562),h=g(h,c,l,u,n[f+14],23,-35309556),u=g(u,h,c,l,n[f+1],4,-1530992060),l=g(l,u,h,c,n[f+4],11,1272893353),c=g(c,l,u,h,n[f+7],16,-155497632),h=g(h,c,l,u,n[f+10],23,-1094730640),u=g(u,h,c,l,n[f+13],4,681279174),l=g(l,u,h,c,n[f+0],11,-358537222),c=g(c,l,u,h,n[f+3],16,-722521979),h=g(h,c,l,u,n[f+6],23,76029189),u=g(u,h,c,l,n[f+9],4,-640364487),l=g(l,u,h,c,n[f+12],11,-421815835),c=g(c,l,u,h,n[f+15],16,530742520),u=m(u,h=g(h,c,l,u,n[f+2],23,-995338651),c,l,n[f+0],6,-198630844),l=m(l,u,h,c,n[f+7],10,1126891415),c=m(c,l,u,h,n[f+14],15,-1416354905),h=m(h,c,l,u,n[f+5],21,-57434055),u=m(u,h,c,l,n[f+12],6,1700485571),l=m(l,u,h,c,n[f+3],10,-1894986606),c=m(c,l,u,h,n[f+10],15,-1051523),h=m(h,c,l,u,n[f+1],21,-2054922799),u=m(u,h,c,l,n[f+8],6,1873313359),l=m(l,u,h,c,n[f+15],10,-30611744),c=m(c,l,u,h,n[f+6],15,-1560198380),h=m(h,c,l,u,n[f+13],21,1309151649),u=m(u,h,c,l,n[f+4],6,-145523070),l=m(l,u,h,c,n[f+11],10,-1120210379),c=m(c,l,u,h,n[f+2],15,718787259),h=m(h,c,l,u,n[f+9],21,-343485551),u=u+y>>>0,h=h+v>>>0,c=c+b>>>0,l=l+_>>>0}return i.endian([u,h,c,l])}var i,o,s,a;i=n(65),o=n(45).utf8,s=n(66),a=n(45).bin,r._ff=function(t,e,n,r,i,o,s){return((s=t+(e&n|~e&r)+(i>>>0)+s)<<o|s>>>32-o)+e},r._gg=function(t,e,n,r,i,o,s){return((s=t+(e&r|n&~r)+(i>>>0)+s)<<o|s>>>32-o)+e},r._hh=function(t,e,n,r,i,o,s){return((s=t+(e^n^r)+(i>>>0)+s)<<o|s>>>32-o)+e},r._ii=function(t,e,n,r,i,o,s){return((s=t+(n^(e|~r))+(i>>>0)+s)<<o|s>>>32-o)+e},r._blocksize=16,r._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);return t=i.wordsToBytes(r(t,e)),e&&e.asBytes?t:e&&e.asString?a.bytesToString(t):i.bytesToHex(t)}},function(t,e){var n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){const r=n(24),i=[2043430169,4086860338,3878753381,3462539467,2630111639,965255983,1930511966,3861023932,3427080569,2559193843,823420391,1646840782,3293681564,2292395833,289824371,579648742,2643098247,991229199,1982458398,3964916796,3634866297,2974765299,1654563303,3309126606,2323285917,351604539,703209078,1406418156,2812836312,1330705329,2661410658,1027854021,2055708042,4111416084,3927864873,3560762451,2826557607,1358147919,2716295838,1137624381,2275248762,255530229,511060458,1022120916,2044241832,4088483664,3882000033,3469032771,2643098247,991229199,1982458398,3964916796,3634866297,2974765299,1654563303,3309126606,2323285917,351604539,703209078,1406418156,2812836312,1330705329,2661410658,1027854021],o=new Array(68);function s(t,e){return t<<e|t>>>32-e}function a(t){return t^s(t,15)^s(t,23)}function u(t,e,n,r,a,u,h,c,l){var f=s(e,12),d=s(f+u+i[t],7);return f^=d,l=t<=15?(a=a+(e^n^r)+f+(o[t]^o[t+4]),l+(u^h^c)+d+o[t]):(a=a+(e&n|e&r|n&r)+f+(o[t]^o[t+4]),l+(u&h|~u&c)+d+o[t]),[n=s(n,9),a,h=s(h,19),l=l^s(l,9)^s(l,17)]}t.exports=class{constructor(){this.digest=new Array(8),this.nblocks=0,this.block=new Array(64),this.num=0}init(){this.digest[0]=1937774191,this.digest[1]=1226093241,this.digest[2]=388252375,this.digest[3]=3666478592,this.digest[4]=2842636476,this.digest[5]=372324522,this.digest[6]=3817729613,this.digest[7]=2969243214;for(let t=0;t<64;t++)this.block[t]=0;this.nblocks=0,this.num=0}SM3Compress(t){let e=0,n=new Array(4),r=this.digest[0],i=this.digest[1],h=this.digest[2],c=this.digest[3],l=this.digest[4],f=this.digest[5],d=this.digest[6],p=this.digest[7];const g=new Array(16);for(let e=0;e+3<64;e+=4)g[e/4]=(t[e]<<24)+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];for(e=0;e<4;e++)o[e]=g[e];for(e=0;e<=8;e+=4)o[e+4]=g[e+4],n=u(e,r,i,h,c,l,f,d,p),i=n[0],c=n[1],f=n[2],p=n[3],o[e+5]=g[e+5],n=u(e+1,c,r,i,h,p,l,f,d),r=n[0],h=n[1],l=n[2],d=n[3],o[e+6]=g[e+6],n=u(e+2,h,c,r,i,d,p,l,f),c=n[0],i=n[1],p=n[2],f=n[3],o[e+7]=g[e+7],n=u(e+3,i,h,c,r,f,d,p,l),h=n[0],r=n[1],d=n[2],l=n[3];for(e=12;e<=60;e+=4)o[e+4]=a(o[e-12]^o[e-5]^s(o[e+1],15))^s(o[e-9],7)^o[e-2],n=u(e,r,i,h,c,l,f,d,p),i=n[0],c=n[1],f=n[2],p=n[3],o[e+5]=a(o[e-11]^o[e-4]^s(o[e+2],15))^s(o[e-8],7)^o[e-1],n=u(e+1,c,r,i,h,p,l,f,d),r=n[0],h=n[1],l=n[2],d=n[3],o[e+6]=a(o[e-10]^o[e-3]^s(o[e+3],15))^s(o[e-7],7)^o[e],n=u(e+2,h,c,r,i,d,p,l,f),c=n[0],i=n[1],p=n[2],f=n[3],o[e+7]=a(o[e-9]^o[e-2]^s(o[e+4],15))^s(o[e-6],7)^o[e+1],n=u(e+3,i,h,c,r,f,d,p,l),h=n[0],r=n[1],d=n[2],l=n[3];this.digest[0]^=r,this.digest[1]^=i,this.digest[2]^=h,this.digest[3]^=c,this.digest[4]^=l,this.digest[5]^=f,this.digest[6]^=d,this.digest[7]^=p;for(let t=0;t<8;t++)this.digest[t]=this.digest[t]>>>0}update(t){let e=t.length;for(let n=0;n<e;n++)t[n]=(t[n]>>>0)%256;if(this.num){var n=64-this.num;if(e<n){for(let n=0;n<e;n++)this.block[this.num+n]=t[n];return void(this.num+=e)}for(let e=0;e<n;e++)this.block[this.num+e]=t[e];this.SM3Compress(this.block),this.nblocks++,t=t.slice(n),e-=n}for(;64<=e;)this.SM3Compress(t),this.nblocks++,t=t.slice(64),e-=64;if(this.num=e,e)for(let n=0;n<e;n++)this.block[n]=t[n]}final(){if(this.block[this.num]=128,this.num+9<=64)for(let t=0;t<64-this.num-9;t++)this.block[this.num+1+t]=0;else{for(let t=0;t<64-this.num-1;t++)this.block[this.num+1+t]=0;this.SM3Compress(this.block);for(let t=0;t<56;t++)this.block[t]=0}var t=this.nblocks>>>23,e=(this.nblocks<<9)+(this.num<<3);this.block[56]=(t>>>24)%256,this.block[57]=(t>>>16)%256,this.block[58]=(t>>>8)%256,this.block[59]=(t>>>0)%256,this.block[60]=(e>>>24)%256,this.block[61]=(e>>>16)%256,this.block[62]=(e>>>8)%256,this.block[63]=(e>>>0)%256;const n=new Array(32);this.SM3Compress(this.block);for(let t=0;t<8;t++)n[4*t]=(this.digest[t]>>>24)%256,n[4*t+1]=(this.digest[t]>>>16)%256,n[4*t+2]=(this.digest[t]>>>8)%256,n[4*t+3]=(this.digest[t]>>>0)%256;return n}hashForBinaryArray(t){return this.init(),this.update(t),t=this.final(),r.byteArrayToHex(t)}hashForUTF8String(t){return t=r.stringToByteArrayInUtf8(t),this.hashForBinaryArray(t)}}},function(t,e,n){"use strict";(function(e){var r,i=n(33),o=i.Buffer,s={};for(r in i)i.hasOwnProperty(r)&&"SlowBuffer"!==r&&"Buffer"!==r&&(s[r]=i[r]);var a=s.Buffer={};for(r in o)o.hasOwnProperty(r)&&"allocUnsafe"!==r&&"allocUnsafeSlow"!==r&&(a[r]=o[r]);if(s.Buffer.prototype=o.prototype,a.from&&a.from!==Uint8Array.from||(a.from=function(t,e,n){if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&void 0===t.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return o(t,e,n)}),a.alloc||(a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||2*(1<<30)<=t)throw new RangeError('The value "'+t+'" is invalid for option "size"');return t=o(t),e&&0!==e.length?"string"==typeof n?t.fill(e,n):t.fill(e):t.fill(0),t}),!s.kStringMaxLength)try{s.kStringMaxLength=e.binding("buffer").kStringMaxLength}catch(e){}s.constants||(s.constants={MAX_LENGTH:s.kMaxLength},s.kStringMaxLength&&(s.constants.MAX_STRING_LENGTH=s.kStringMaxLength)),t.exports=s}).call(this,n(41))},function(t,e,n){"use strict";const r=n(30).Reporter,i=n(19).EncoderBuffer,o=n(19).DecoderBuffer,s=n(58),a=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],u=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(a);function h(t,e,n){const r={};this._baseState=r,r.name=n,r.enc=t,r.parent=e||null,r.children=null,r.tag=null,r.args=null,r.reverseArgs=null,r.choice=null,r.optional=!1,r.any=!1,r.obj=!1,r.use=null,r.useDecoder=null,r.key=null,r.default=null,r.explicit=null,r.implicit=null,r.contains=null,r.parent||(r.children=[],this._wrap())}t.exports=h;const c=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];h.prototype.clone=function(){const t=this._baseState,e={};c.forEach((function(n){e[n]=t[n]}));const n=new this.constructor(e.parent);return n._baseState=e,n},h.prototype._wrap=function(){const t=this._baseState;u.forEach((function(e){this[e]=function(){const n=new this.constructor(this);return t.children.push(n),n[e].apply(n,arguments)}}),this)},h.prototype._init=function(t){const e=this._baseState;s(null===e.parent),t.call(this),e.children=e.children.filter((function(t){return t._baseState.parent===this}),this),s.equal(e.children.length,1,"Root node can have only one child")},h.prototype._useArgs=function(t){const e=this._baseState,n=t.filter((function(t){return t instanceof this.constructor}),this);t=t.filter((function(t){return!(t instanceof this.constructor)}),this),0!==n.length&&(s(null===e.children),e.children=n,n.forEach((function(t){t._baseState.parent=this}),this)),0!==t.length&&(s(null===e.args),e.args=t,e.reverseArgs=t.map((function(t){if("object"!=typeof t||t.constructor!==Object)return t;const e={};return Object.keys(t).forEach((function(n){n==(0|n)&&(n|=0);var r=t[n];e[r]=n})),e})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(t){h.prototype[t]=function(){var e=this._baseState;throw new Error(t+" not implemented for encoding: "+e.enc)}})),a.forEach((function(t){h.prototype[t]=function(){const e=this._baseState;var n=Array.prototype.slice.call(arguments);return s(null===e.tag),e.tag=t,this._useArgs(n),this}})),h.prototype.use=function(t){s(t);const e=this._baseState;return s(null===e.use),e.use=t,this},h.prototype.optional=function(){return this._baseState.optional=!0,this},h.prototype.def=function(t){const e=this._baseState;return s(null===e.default),e.default=t,e.optional=!0,this},h.prototype.explicit=function(t){const e=this._baseState;return s(null===e.explicit&&null===e.implicit),e.explicit=t,this},h.prototype.implicit=function(t){const e=this._baseState;return s(null===e.explicit&&null===e.implicit),e.implicit=t,this},h.prototype.obj=function(){const t=this._baseState;var e=Array.prototype.slice.call(arguments);return t.obj=!0,0!==e.length&&this._useArgs(e),this},h.prototype.key=function(t){const e=this._baseState;return s(null===e.key),e.key=t,this},h.prototype.any=function(){return this._baseState.any=!0,this},h.prototype.choice=function(t){const e=this._baseState;return s(null===e.choice),e.choice=t,this._useArgs(Object.keys(t).map((function(e){return t[e]}))),this},h.prototype.contains=function(t){const e=this._baseState;return s(null===e.use),e.contains=t,this},h.prototype._decode=function(t,e){const n=this._baseState;if(null===n.parent)return t.wrapResult(n.children[0]._decode(t,e));let r,i=n.default,s=!0,a=null;if(null!==n.key&&(a=t.enterKey(n.key)),n.optional){let r=null;if(null!==n.explicit?r=n.explicit:null!==n.implicit?r=n.implicit:null!==n.tag&&(r=n.tag),null!==r||n.any){if(s=this._peekTag(t,r,n.any),t.isError(s))return s}else{var u=t.save();try{null===n.choice?this._decodeGeneric(n.tag,t,e):this._decodeChoice(t,e),s=!0}catch(a){s=!1}t.restore(u)}}if(n.obj&&s&&(r=t.enterObject()),s){if(null!==n.explicit){var h=this._decodeTag(t,n.explicit);if(t.isError(h))return h;t=h}if(u=t.offset,null===n.use&&null===n.choice){let e;if(n.any&&(e=t.save()),h=this._decodeTag(t,null!==n.implicit?n.implicit:n.tag,n.any),t.isError(h))return h;n.any?i=t.raw(e):t=h}if(e&&e.track&&null!==n.tag&&e.track(t.path(),u,t.length,"tagged"),e&&e.track&&null!==n.tag&&e.track(t.path(),t.offset,t.length,"content"),n.any||(i=null===n.choice?this._decodeGeneric(n.tag,t,e):this._decodeChoice(t,e)),t.isError(i))return i;n.any||null!==n.choice||null===n.children||n.children.forEach((function(n){n._decode(t,e)})),!n.contains||"octstr"!==n.tag&&"bitstr"!==n.tag||(u=new o(i),i=this._getUse(n.contains,t._reporterState.obj)._decode(u,e))}return n.obj&&s&&(i=t.leaveObject(r)),null===n.key||null===i&&!0!==s?null!==a&&t.exitKey(a):t.leaveKey(a,n.key,i),i},h.prototype._decodeGeneric=function(t,e,n){var r=this._baseState;return"seq"===t||"set"===t?null:"seqof"===t||"setof"===t?this._decodeList(e,t,r.args[0],n):/str$/.test(t)?this._decodeStr(e,t,n):"objid"===t&&r.args?this._decodeObjid(e,r.args[0],r.args[1],n):"objid"===t?this._decodeObjid(e,null,null,n):"gentime"===t||"utctime"===t?this._decodeTime(e,t,n):"null_"===t?this._decodeNull(e,n):"bool"===t?this._decodeBool(e,n):"objDesc"===t?this._decodeStr(e,t,n):"int"===t||"enum"===t?this._decodeInt(e,r.args&&r.args[0],n):null!==r.use?this._getUse(r.use,e._reporterState.obj)._decode(e,n):e.error("unknown tag: "+t)},h.prototype._getUse=function(t,e){const n=this._baseState;return n.useDecoder=this._use(t,e),s(null===n.useDecoder._baseState.parent),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder},h.prototype._decodeChoice=function(t,e){const n=this._baseState;let r=null,i=!1;return Object.keys(n.choice).some((function(o){var s=t.save();const a=n.choice[o];try{var u=a._decode(t,e);if(t.isError(u))return!1;r={type:o,value:u},i=!0}catch(o){return t.restore(s),!1}return!0}),this),i?r:t.error("Choice not matched")},h.prototype._createEncoderBuffer=function(t){return new i(t,this.reporter)},h.prototype._encode=function(t,e,n){var r=this._baseState;if((null===r.default||r.default!==t)&&void 0!==(t=this._encodeValue(t,e,n))&&!this._skipDefault(t,e,n))return t},h.prototype._encodeValue=function(t,e,n){const i=this._baseState;if(null===i.parent)return i.children[0]._encode(t,e||new r);let o=null;if(this.reporter=e,i.optional&&void 0===t){if(null===i.default)return;t=i.default}let s=null,a=!1;if(i.any)o=this._createEncoderBuffer(t);else if(i.choice)o=this._encodeChoice(t,e);else if(i.contains)s=this._getUse(i.contains,n)._encode(t,e),a=!0;else if(i.children)s=i.children.map((function(n){if("null_"===n._baseState.tag)return n._encode(null,e,t);if(null===n._baseState.key)return e.error("Child should have a key");var r=e.enterKey(n._baseState.key);return"object"!=typeof t?e.error("Child expected, but input is not object"):(n=n._encode(t[n._baseState.key],e,t),e.leaveKey(r),n)}),this).filter((function(t){return t})),s=this._createEncoderBuffer(s);else if("seqof"===i.tag||"setof"===i.tag){if(!i.args||1!==i.args.length)return e.error("Too many args for : "+i.tag);if(!Array.isArray(t))return e.error("seqof/setof, but data is not Array");const n=this.clone();n._baseState.implicit=null,s=this._createEncoderBuffer(t.map((function(n){var r=this._baseState;return this._getUse(r.args[0],t)._encode(n,e)}),n))}else null!==i.use?o=this._getUse(i.use,n)._encode(t,e):(s=this._encodePrimitive(i.tag,t),a=!0);var u;return i.any||null!==i.choice||(u=null!==i.implicit?i.implicit:i.tag,n=null===i.implicit?"universal":"context",null===u?null===i.use&&e.error("Tag could be omitted only for .use()"):null===i.use&&(o=this._encodeComposite(u,a,n,s))),null!==i.explicit&&(o=this._encodeComposite(i.explicit,!1,"context",o)),o},h.prototype._encodeChoice=function(t,e){var n=this._baseState;const r=n.choice[t.type];return r||s(!1,t.type+" not found in "+JSON.stringify(Object.keys(n.choice))),r._encode(t.value,e)},h.prototype._encodePrimitive=function(t,e){var n=this._baseState;if(/str$/.test(t))return this._encodeStr(e,t);if("objid"===t&&n.args)return this._encodeObjid(e,n.reverseArgs[0],n.args[1]);if("objid"===t)return this._encodeObjid(e,null,null);if("gentime"===t||"utctime"===t)return this._encodeTime(e,t);if("null_"===t)return this._encodeNull();if("int"===t||"enum"===t)return this._encodeInt(e,n.args&&n.reverseArgs[0]);if("bool"===t)return this._encodeBool(e);if("objDesc"===t)return this._encodeStr(e,t);throw new Error("Unsupported tag: "+t)},h.prototype._isNumstr=function(t){return/^[0-9 ]*$/.test(t)},h.prototype._isPrintstr=function(t){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(t)}},function(t,e,n){"use strict";const r=n(17);function i(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function o(t,e){this.path=t,this.rethrow(e)}(e.Reporter=i).prototype.isError=function(t){return t instanceof o},i.prototype.save=function(){var t=this._reporterState;return{obj:t.obj,pathLen:t.path.length}},i.prototype.restore=function(t){const e=this._reporterState;e.obj=t.obj,e.path=e.path.slice(0,t.pathLen)},i.prototype.enterKey=function(t){return this._reporterState.path.push(t)},i.prototype.exitKey=function(t){const e=this._reporterState;e.path=e.path.slice(0,t-1)},i.prototype.leaveKey=function(t,e,n){const r=this._reporterState;this.exitKey(t),null!==r.obj&&(r.obj[e]=n)},i.prototype.path=function(){return this._reporterState.path.join("/")},i.prototype.enterObject=function(){const t=this._reporterState;var e=t.obj;return t.obj={},e},i.prototype.leaveObject=function(t){const e=this._reporterState;var n=e.obj;return e.obj=t,n},i.prototype.error=function(t){let e;const n=this._reporterState;var r=t instanceof o;if(e=r?t:new o(n.path.map((function(t){return"["+JSON.stringify(t)+"]"})).join(""),t.message||t,t.stack),!n.options.partial)throw e;return r||n.errors.push(e),e},i.prototype.wrapResult=function(t){var e=this._reporterState;return e.options.partial?{result:this.isError(t)?null:t,errors:e.errors}:t},r(o,Error),o.prototype.rethrow=function(t){if(this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,o),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this}},function(t,e,n){"use strict";function r(t){const e={};return Object.keys(t).forEach((function(n){(0|n)==n&&(n|=0);var r=t[n];e[r]=n})),e}e.tagClass={0:"universal",1:"application",2:"context",3:"private"},e.tagClassByName=r(e.tagClass),e.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},e.tagByName=r(e.tag)},function(t,e,n){t.exports=n(69)},function(t,e,n){"use strict";(function(t){var r=n(34),i=n(50),o=n(51);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(t=null===t?new u(e):t).length=e,t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"!=typeof t)return h(this,t,e,n);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}function h(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n);return(n=(t=a(t,r)).write(e,n))!==r&&(t=t.slice(0,n)),t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|d(e.length);return 0===(t=a(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?a(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e){if(c(e),t=a(t,e<0?0:0|d(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|d(e.length);t=a(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;var n=(t="string"!=typeof t?""+t:t).length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return P(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return x(t).length;default:if(r)return P(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var i,o,s,a=!1;if((e=void 0===e||e<0?0:e)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":return function(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||r<n)&&(n=r);for(var i="",o=e;o<n;++o)i+=function(t){return t<16?"0"+t.toString(16):t.toString(16)}(t[o]);return i}(this,e,n);case"utf8":case"utf-8":return w(this,e,n);case"ascii":return function(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}(this,e,n);case"latin1":case"binary":return function(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}(this,e,n);case"base64":return i=this,s=n,0===(o=e)&&s===i.length?r.fromByteArray(i):r.fromByteArray(i.slice(o,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}(this,e,n);default:if(a)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),a=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,(n=(n=isNaN(n)?i?0:t.length-1:n)<0?t.length+n:n)>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:v(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,e,n):v(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,r,i){var o=1,s=t.length,a=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s/=o=2,a/=2,n/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i)for(var h=-1,c=n;c<s;c++)if(u(t,c)===u(e,-1===h?0:c-h)){if(c-(h=-1===h?c:h)+1===a)return h*o}else-1!==h&&(c-=c-h),h=-1;else for(c=n=s<n+a?s-a:n;0<=c;c--){for(var l=!0,f=0;f<a;f++)if(u(t,c+f)!==u(e,f)){l=!1;break}if(l)return c}return-1}function b(t,e,n,r){return B(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function _(t,e,n,r){return B(function(t,e){for(var n,r,i=[],o=0;o<t.length&&!((e-=2)<0);++o)n=(r=t.charCodeAt(o))>>8,r%=256,i.push(r),i.push(n);return i}(e,t.length-n),t,n,r)}function w(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,u,h=t[i],c=null,l=239<h?4:223<h?3:191<h?2:1;if(i+l<=n)switch(l){case 1:h<128&&(c=h);break;case 2:128==(192&(o=t[i+1]))&&127<(u=(31&h)<<6|63&o)&&(c=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&2047<(u=(15&h)<<12|(63&o)<<6|63&s)&&(u<55296||57343<u)&&(c=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&h)<<18|(63&o)<<12|(63&s)<<6|63&a)&&u<1114112&&(c=u)}null===c?(c=65533,l=1):65535<c&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=l}return function(t){var e=t.length;if(e<=E)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=E));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return h(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return r=null,e=e,n=n,c(t=t),t<=0||void 0===e?a(r,t):"string"==typeof n?a(r,t).fill(e,n):a(r,t).fill(e);var r},u.allocUnsafe=function(t){return l(null,t)},u.allocUnsafeSlow=function(t){return l(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);if(void 0===e)for(i=e=0;i<t.length;++i)e+=t[i].length;for(var n=u.allocUnsafe(e),r=0,i=0;i<t.length;++i){var s=t[i];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,r),r+=s.length}return n},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?w(this,0,t):g.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),(e=void 0===e?0:e)<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=e)return 0;if(i<=r)return-1;if(n<=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),h=this.slice(r,i),c=t.slice(e,n),l=0;l<a;++l)if(h[l]!==c[l]){o=h[l],s=c[l];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||i<n)&&(n=i),0<t.length&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var o,s,a,u=!1;;)switch(r){case"hex":return function(t,e,n,r){n=Number(n)||0;var i=t.length-n;if((!r||i<(r=Number(r)))&&(r=i),(i=e.length)%2!=0)throw new TypeError("Invalid hex string");i/2<r&&(r=i/2);for(var o=0;o<r;++o){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))return o;t[n+o]=s}return o}(this,t,e,n);case"utf8":case"utf-8":return s=e,a=n,B(P(t,(o=this).length-s),o,s,a);case"ascii":return b(this,t,e,n);case"latin1":case"binary":return b(this,t,e,n);case"base64":return o=this,s=e,a=n,B(x(t),o,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,e,n);default:if(u)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),u=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function T(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(n<t+e)throw new RangeError("Trying to access beyond buffer length")}function M(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<e||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function S(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function O(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function A(t,e,n,r){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function k(t,e,n,r,o){return o||A(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function R(t,e,n,r,o){return o||A(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=u.prototype;else for(var r=e-t,i=new u(r,void 0),o=0;o<r;++o)i[o]=this[o+t];return i},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=this[t+--e],i=1;0<e&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||T(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||T(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||T(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||T(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||T(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=e,i=1,o=this[t+--r];0<r&&(i*=256);)o+=this[t+--r]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||T(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){return e||T(t,2,this.length),32768&(t=this[t]|this[t+1]<<8)?4294901760|t:t},u.prototype.readInt16BE=function(t,e){return e||T(t,2,this.length),32768&(t=this[t+1]|this[t]<<8)?4294901760|t:t},u.prototype.readInt32LE=function(t,e){return e||T(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||T(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||T(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||T(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||T(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||T(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||M(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||M(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;0<=--i&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):S(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):S(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):O(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){t=+t,e|=0,r||M(this,t,e,n,(r=Math.pow(2,8*n-1))-1,-r);var i=0,o=1,s=0;for(this[e]=255&t;++i<n&&(o*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){t=+t,e|=0,r||M(this,t,e,n,(r=Math.pow(2,8*n-1))-1,-r);var i=n-1,o=1,s=0;for(this[e+i]=255&t;0<=--i&&(o*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&(t=t<0?255+t+1:t),e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):S(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):S(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):O(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return k(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return k(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return R(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return R(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n=n||0,r||0===r||(r=this.length),e>=t.length&&(e=t.length),(r=0<r&&r<n?n:r)===n)return 0;if(0===t.length||0===this.length)return 0;if((e=e||0)<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var i,o=(r=t.length-e<r-n?t.length-e+n:r)-n;if(this===t&&n<e&&e<r)for(i=o-1;0<=i;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){var i;if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1!==t.length||(i=t.charCodeAt(0))<256&&(t=i),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;if(e>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(t=t||0))for(a=e;a<n;++a)this[a]=t;else for(var o=u.isBuffer(t)?t:P(new u(t,r).toString()),s=o.length,a=0;a<n-e;++a)this[a+e]=o[a%s];return this};var I=/[^+\/0-9A-Za-z-_]/g;function P(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if(55295<(n=t.charCodeAt(s))&&n<57344){if(!i){if(56319<n){-1<(e-=3)&&o.push(239,191,189);continue}if(s+1===r){-1<(e-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(e-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(e-=3)&&o.push(239,191,189);if(i=null,n<128){if(--e<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function x(t){return r.toByteArray(function(t){var e;if((t=((e=t).trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(I,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function B(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(26))},function(t,e,n){"use strict";e.byteLength=function(t){var e;return 3*((t=(e=h(t))[0])+(e=e[1]))/4-e},e.toByteArray=function(t){var e,n,r=(s=h(t))[0],s=s[1],a=new o(function(t,e){return 3*(t+e)/4-e}(r,s)),u=0,c=0<s?r-4:r;for(n=0;n<c;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],a[u++]=e>>16&255,a[u++]=e>>8&255,a[u++]=255&e;return 2===s&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,a[u++]=255&e),1===s&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,a[u++]=e>>8&255,a[u++]=255&e),a},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(function(t,e,n){for(var i,o=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),o.push(function(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}(i));return o.join("")}(t,s,a<s+16383?a:s+16383));return 1==i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2==i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function h(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");return[t=-1===(t=t.indexOf("="))?e:t,t===e?0:4-t%4]}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e,n){const r=n(22).BigInteger,i=n(23);t.exports=class{constructor(t,e,n){"string"==typeof t&&"string"==typeof e?(this.X=new r(t,16),this.Y=new r(e,16)):(this.X=t,this.Y=e),this.Z=null==n?r.ONE:n,this.zinv=null,this.curve=new i}getX(){return null===this.zinv&&(this.zinv=this.Z.modInverse(this.curve.p)),this.X.multiply(this.zinv).mod(this.curve.p)}getY(){return null===this.zinv&&(this.zinv=this.Z.modInverse(this.curve.p)),this.Y.multiply(this.zinv).mod(this.curve.p)}isInfinity(){return null===this.X&&null===this.Y||this.Z.equals(r.ZERO)&&!this.Y.equals(r.ZERO)}}},function(t,e){function n(){}function r(){}n.prototype.encode=function(t){const e=[];var n=t.length;let r=0;for(;r<n;){var i=t.codePointAt(r);let n=0,o=0;for(i<=127?(n=0,o=0):i<=2047?(n=6,o=192):i<=65535?(n=12,o=224):i<=2097151&&(n=18,o=240),e.push(o|i>>n),n-=6;0<=n;)e.push(128|i>>n&63),n-=6;r+=65536<=i?2:1}return e},r.prototype.decode=function(t){let e="",n=0;for(;n<t.length;){let r=t[n],i=0,o=0;if(r<=127?(i=0,o=255&r):r<=223?(i=1,o=31&r):r<=239?(i=2,o=15&r):r<=244&&(i=3,o=7&r),0<t.length-n-i){let e=0;for(;e<i;)r=t[n+e+1],o=o<<6|63&r,e+=1}else o=65533,i=t.length-n;e+=String.fromCodePoint(o),n+=i+1}return e},t.exports={TextDecoder:r,TextEncoder:n}},function(t,e){t.exports={normalize:function(t){let e=[...t];if(32<e.length)e=e.slice(e.length-32,e.length);else if(e.length<32)for(let t=0;t<32-e.length;t++)e.unshift(0);return e},leftPad:function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t}}},function(t,e,n){(function(t){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){function n(){}t.super_=e,n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function o(t,e,n){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,(this.red=null)!==t&&("le"!==e&&"be"!==e||(n=e,e=10),this._init(t||0,e||10,n||"be"))}var s;"object"==typeof t?t.exports=o:e.BN=o,(o.BN=o).wordSize=26;try{s=("undefined"!=typeof window&&void 0!==window.Buffer?window:n(56)).Buffer}catch(t){}function a(t,e){return 65<=(e=t.charCodeAt(e))&&e<=70?e-55:97<=e&&e<=102?e-87:e-48&15}function u(t,e,n){var r=a(t,n);return e<=n-1&&(r|=a(t,n-1)<<4),r}function h(t,e,n,r){for(var i=0,o=Math.min(t.length,n),s=e;s<o;s++){var a=t.charCodeAt(s)-48;i*=r,i+=49<=a?a-49+10:17<=a?a-17+10:a}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return 0<t.cmp(e)?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,n){if("number"==typeof t)return this._initNumber(t,e,n);if("object"==typeof t)return this._initArray(t,e,n);r((e="hex"===e?16:e)===(0|e)&&2<=e&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,n):(this._parseBase(t,e,i),"le"===n&&this._initArray(this.toArray(),e,n)))},o.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},o.prototype._initArray=function(t,e,n){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i,o,s=0;s<this.length;s++)this.words[s]=0;var a=0;if("be"===n)for(s=t.length-1,i=0;0<=s;s-=3)o=t[s]|t[s-1]<<8|t[s-2]<<16,this.words[i]|=o<<a&67108863,this.words[i+1]=o>>>26-a&67108863,26<=(a+=24)&&(a-=26,i++);else if("le"===n)for(i=s=0;s<t.length;s+=3)o=t[s]|t[s+1]<<8|t[s+2]<<16,this.words[i]|=o<<a&67108863,this.words[i+1]=o>>>26-a&67108863,26<=(a+=24)&&(a-=26,i++);return this.strip()},o.prototype._parseHex=function(t,e,n){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,o=0,s=0;if("be"===n)for(r=t.length-1;e<=r;r-=2)i=u(t,e,r)<<o,this.words[s]|=67108863&i,18<=o?(o-=18,this.words[s+=1]|=i>>>26):o+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)i=u(t,e,r)<<o,this.words[s]|=67108863&i,18<=o?(o-=18,this.words[s+=1]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,n){this.words=[0];for(var r=0,i=this.length=1;i<=67108863;i*=e)r++;i=i/e|0;for(var o=t.length-n,s=o%--r,a=Math.min(o,o-s)+n,u=0,c=n;c<a;c+=r)u=h(t,c,c+r,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!=s){var l=1;for(u=h(t,c,t.length,e),c=0;c<s;c++)l*=e;this.imuln(l),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t,e,n){n.negative=e.negative^t.negative;var r=t.length+e.length|0,i=(r=(n.length=r)-1|0,(s=(0|t.words[0])*(0|e.words[0]))/67108864|0);n.words[0]=67108863&s;for(var o=1;o<r;o++){for(var s,a=i>>>26,u=67108863&i,h=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=h;c++)a+=(s=(0|t.words[o-c|0])*(0|e.words[c])+u)/67108864|0,u=67108863&s;n.words[o]=0|u,i=0|a}return 0!==i?n.words[o]=0|i:n.length--,n.strip()}o.prototype.toString=function(t,e){if(e=0|e||1,16===(t=t||10)||"hex"===t){u="";for(var n=0,i=0,o=0;o<this.length;o++){var s=this.words[o],a=(16777215&(s<<n|i)).toString(16),u=0!=(i=s>>>24-n&16777215)||o!==this.length-1?c[6-a.length]+a+u:a+u;26<=(n+=2)&&(n-=26,o--)}for(0!==i&&(u=i.toString(16)+u);u.length%e!=0;)u="0"+u;return 0!==this.negative?"-"+u:u}if(t===(0|t)&&2<=t&&t<=36){var h=l[t],d=f[t];for(u="",(p=this.clone()).negative=0;!p.isZero();){var p,g=p.modn(d).toString(t);u=(p=p.idivn(d)).isZero()?g+u:c[h-g.length]+g+u}for(this.isZero()&&(u="0"+u);u.length%e!=0;)u="0"+u;return 0!==this.negative?"-"+u:u}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:2<this.length&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return r(void 0!==s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,n){var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(0<o,"Requested array length <= 0"),this.strip();e="le"===e;var s,a,u=new t(o),h=this.clone();if(e){for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),u[a]=s;for(;a<o;a++)u[a]=0}else{for(a=0;a<o-i;a++)u[a]=0;for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),u[o-a-1]=s}return u},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t;t=0;return 4096<=e&&(t+=13,e>>>=13),64<=e&&(t+=7,e>>>=7),8<=e&&(t+=4,e>>>=4),2<=e&&(t+=2,e>>>=2),t+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t;t=0;return 0==(8191&e)&&(t+=13,e>>>=13),0==(127&e)&&(t+=7,e>>>=7),0==(15&e)&&(t+=4,e>>>=4),0==(3&e)&&(t+=2,e>>>=2),0==(1&e)&&t++,t},o.prototype.bitLength=function(){var t=this.words[this.length-1];t=this._countBits(t);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var n=this._zeroBits(this.words[e]);if(t+=n,26!==n)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){for(var e=this.length>t.length?t:this,n=0;n<e.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){for(var e,n=this.length>t.length?(e=this,t):(e=t,this),r=0;r<n.length;r++)this.words[r]=e.words[r]^n.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){r("number"==typeof t&&0<=t);var e=0|Math.ceil(t/26);t%=26;this._expand(e),0<t&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return 0<t&&(this.words[n]=~this.words[n]&67108863>>26-t),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){r("number"==typeof t&&0<=t);var n=t/26|0;t%=26;return this._expand(1+n),this.words[n]=e?this.words[n]|1<<t:this.words[n]&~(1<<t),this.strip()},o.prototype.iadd=function(t){var e,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();for(var r=this.length>t.length?(n=this,t):(n=t,this),i=0,o=0;o<r.length;o++)e=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<n.length;o++)e=(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,r=this.cmp(t);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;for(var i=0<r?(n=this,t):(n=t,this),o=0,s=0;s<i.length;s++)o=(e=(0|n.words[s])-(0|i.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<n.length;s++)o=(e=(0|n.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,n){var r,i,o,s=t.words,a=e.words,u=n.words,h=8191&(r=0|s[0]),c=r>>>13,l=8191&(Y=0|s[1]),f=Y>>>13,d=8191&(H=0|s[2]),p=H>>>13,g=8191&(i=0|s[3]),m=i>>>13,y=8191&(K=0|s[4]),v=K>>>13,b=8191&(V=0|s[5]),_=V>>>13,w=8191&(o=0|s[6]),E=o>>>13,T=8191&(z=0|s[7]),M=z>>>13,S=8191&(X=0|s[8]),O=X>>>13,A=8191&(Q=0|s[9]),k=Q>>>13,R=8191&(Z=0|a[0]),I=Z>>>13,P=0|a[1],x=8191&P,B=P>>>13,C=0|a[2],j=8191&C,D=C>>>13,L=8191&($=0|a[3]),N=$>>>13,U=0|a[4],q=8191&U,F=U>>>13,G=0|a[5],J=8191&G,W=G>>>13,Y=8191&(r=0|a[6]),H=r>>>13,K=8191&(i=0|a[7]),V=i>>>13,z=8191&(o=0|a[8]),X=o>>>13,Q=8191&(s=0|a[9]),Z=s>>>13;n.negative=t.negative^e.negative,n.length=19;var $=(0+Math.imul(h,R)|0)+((8191&(C=(C=Math.imul(h,I))+Math.imul(c,R)|0))<<13)|0,tt=((U=Math.imul(c,I))+(C>>>13)|0)+($>>>26)|0;return $&=67108863,P=Math.imul(l,R),C=(C=Math.imul(l,I))+Math.imul(f,R)|0,U=Math.imul(f,I),G=(tt+(P+Math.imul(h,x)|0)|0)+((8191&(C=(C=C+Math.imul(h,B)|0)+Math.imul(c,x)|0))<<13)|0,tt=((U=U+Math.imul(c,B)|0)+(C>>>13)|0)+(G>>>26)|0,G&=67108863,P=Math.imul(d,R),C=(C=Math.imul(d,I))+Math.imul(p,R)|0,U=Math.imul(p,I),P=P+Math.imul(l,x)|0,C=(C=C+Math.imul(l,B)|0)+Math.imul(f,x)|0,U=U+Math.imul(f,B)|0,r=(tt+(P+Math.imul(h,j)|0)|0)+((8191&(C=(C=C+Math.imul(h,D)|0)+Math.imul(c,j)|0))<<13)|0,tt=((U=U+Math.imul(c,D)|0)+(C>>>13)|0)+(r>>>26)|0,r&=67108863,P=Math.imul(g,R),C=(C=Math.imul(g,I))+Math.imul(m,R)|0,U=Math.imul(m,I),P=P+Math.imul(d,x)|0,C=(C=C+Math.imul(d,B)|0)+Math.imul(p,x)|0,U=U+Math.imul(p,B)|0,P=P+Math.imul(l,j)|0,C=(C=C+Math.imul(l,D)|0)+Math.imul(f,j)|0,U=U+Math.imul(f,D)|0,i=(tt+(P+Math.imul(h,L)|0)|0)+((8191&(C=(C=C+Math.imul(h,N)|0)+Math.imul(c,L)|0))<<13)|0,tt=((U=U+Math.imul(c,N)|0)+(C>>>13)|0)+(i>>>26)|0,i&=67108863,P=Math.imul(y,R),C=(C=Math.imul(y,I))+Math.imul(v,R)|0,U=Math.imul(v,I),P=P+Math.imul(g,x)|0,C=(C=C+Math.imul(g,B)|0)+Math.imul(m,x)|0,U=U+Math.imul(m,B)|0,P=P+Math.imul(d,j)|0,C=(C=C+Math.imul(d,D)|0)+Math.imul(p,j)|0,U=U+Math.imul(p,D)|0,P=P+Math.imul(l,L)|0,C=(C=C+Math.imul(l,N)|0)+Math.imul(f,L)|0,U=U+Math.imul(f,N)|0,o=(tt+(P+Math.imul(h,q)|0)|0)+((8191&(C=(C=C+Math.imul(h,F)|0)+Math.imul(c,q)|0))<<13)|0,tt=((U=U+Math.imul(c,F)|0)+(C>>>13)|0)+(o>>>26)|0,o&=67108863,P=Math.imul(b,R),C=(C=Math.imul(b,I))+Math.imul(_,R)|0,U=Math.imul(_,I),P=P+Math.imul(y,x)|0,C=(C=C+Math.imul(y,B)|0)+Math.imul(v,x)|0,U=U+Math.imul(v,B)|0,P=P+Math.imul(g,j)|0,C=(C=C+Math.imul(g,D)|0)+Math.imul(m,j)|0,U=U+Math.imul(m,D)|0,P=P+Math.imul(d,L)|0,C=(C=C+Math.imul(d,N)|0)+Math.imul(p,L)|0,U=U+Math.imul(p,N)|0,P=P+Math.imul(l,q)|0,C=(C=C+Math.imul(l,F)|0)+Math.imul(f,q)|0,U=U+Math.imul(f,F)|0,a=(tt+(P+Math.imul(h,J)|0)|0)+((8191&(C=(C=C+Math.imul(h,W)|0)+Math.imul(c,J)|0))<<13)|0,tt=((U=U+Math.imul(c,W)|0)+(C>>>13)|0)+(a>>>26)|0,a&=67108863,P=Math.imul(w,R),C=(C=Math.imul(w,I))+Math.imul(E,R)|0,U=Math.imul(E,I),P=P+Math.imul(b,x)|0,C=(C=C+Math.imul(b,B)|0)+Math.imul(_,x)|0,U=U+Math.imul(_,B)|0,P=P+Math.imul(y,j)|0,C=(C=C+Math.imul(y,D)|0)+Math.imul(v,j)|0,U=U+Math.imul(v,D)|0,P=P+Math.imul(g,L)|0,C=(C=C+Math.imul(g,N)|0)+Math.imul(m,L)|0,U=U+Math.imul(m,N)|0,P=P+Math.imul(d,q)|0,C=(C=C+Math.imul(d,F)|0)+Math.imul(p,q)|0,U=U+Math.imul(p,F)|0,P=P+Math.imul(l,J)|0,C=(C=C+Math.imul(l,W)|0)+Math.imul(f,J)|0,U=U+Math.imul(f,W)|0,s=(tt+(P+Math.imul(h,Y)|0)|0)+((8191&(C=(C=C+Math.imul(h,H)|0)+Math.imul(c,Y)|0))<<13)|0,tt=((U=U+Math.imul(c,H)|0)+(C>>>13)|0)+(s>>>26)|0,s&=67108863,P=Math.imul(T,R),C=(C=Math.imul(T,I))+Math.imul(M,R)|0,U=Math.imul(M,I),P=P+Math.imul(w,x)|0,C=(C=C+Math.imul(w,B)|0)+Math.imul(E,x)|0,U=U+Math.imul(E,B)|0,P=P+Math.imul(b,j)|0,C=(C=C+Math.imul(b,D)|0)+Math.imul(_,j)|0,U=U+Math.imul(_,D)|0,P=P+Math.imul(y,L)|0,C=(C=C+Math.imul(y,N)|0)+Math.imul(v,L)|0,U=U+Math.imul(v,N)|0,P=P+Math.imul(g,q)|0,C=(C=C+Math.imul(g,F)|0)+Math.imul(m,q)|0,U=U+Math.imul(m,F)|0,P=P+Math.imul(d,J)|0,C=(C=C+Math.imul(d,W)|0)+Math.imul(p,J)|0,U=U+Math.imul(p,W)|0,P=P+Math.imul(l,Y)|0,C=(C=C+Math.imul(l,H)|0)+Math.imul(f,Y)|0,U=U+Math.imul(f,H)|0,t=(tt+(P+Math.imul(h,K)|0)|0)+((8191&(C=(C=C+Math.imul(h,V)|0)+Math.imul(c,K)|0))<<13)|0,tt=((U=U+Math.imul(c,V)|0)+(C>>>13)|0)+(t>>>26)|0,t&=67108863,P=Math.imul(S,R),C=(C=Math.imul(S,I))+Math.imul(O,R)|0,U=Math.imul(O,I),P=P+Math.imul(T,x)|0,C=(C=C+Math.imul(T,B)|0)+Math.imul(M,x)|0,U=U+Math.imul(M,B)|0,P=P+Math.imul(w,j)|0,C=(C=C+Math.imul(w,D)|0)+Math.imul(E,j)|0,U=U+Math.imul(E,D)|0,P=P+Math.imul(b,L)|0,C=(C=C+Math.imul(b,N)|0)+Math.imul(_,L)|0,U=U+Math.imul(_,N)|0,P=P+Math.imul(y,q)|0,C=(C=C+Math.imul(y,F)|0)+Math.imul(v,q)|0,U=U+Math.imul(v,F)|0,P=P+Math.imul(g,J)|0,C=(C=C+Math.imul(g,W)|0)+Math.imul(m,J)|0,U=U+Math.imul(m,W)|0,P=P+Math.imul(d,Y)|0,C=(C=C+Math.imul(d,H)|0)+Math.imul(p,Y)|0,U=U+Math.imul(p,H)|0,P=P+Math.imul(l,K)|0,C=(C=C+Math.imul(l,V)|0)+Math.imul(f,K)|0,U=U+Math.imul(f,V)|0,e=(tt+(P+Math.imul(h,z)|0)|0)+((8191&(C=(C=C+Math.imul(h,X)|0)+Math.imul(c,z)|0))<<13)|0,tt=((U=U+Math.imul(c,X)|0)+(C>>>13)|0)+(e>>>26)|0,e&=67108863,P=Math.imul(A,R),C=(C=Math.imul(A,I))+Math.imul(k,R)|0,U=Math.imul(k,I),P=P+Math.imul(S,x)|0,C=(C=C+Math.imul(S,B)|0)+Math.imul(O,x)|0,U=U+Math.imul(O,B)|0,P=P+Math.imul(T,j)|0,C=(C=C+Math.imul(T,D)|0)+Math.imul(M,j)|0,U=U+Math.imul(M,D)|0,P=P+Math.imul(w,L)|0,C=(C=C+Math.imul(w,N)|0)+Math.imul(E,L)|0,U=U+Math.imul(E,N)|0,P=P+Math.imul(b,q)|0,C=(C=C+Math.imul(b,F)|0)+Math.imul(_,q)|0,U=U+Math.imul(_,F)|0,P=P+Math.imul(y,J)|0,C=(C=C+Math.imul(y,W)|0)+Math.imul(v,J)|0,U=U+Math.imul(v,W)|0,P=P+Math.imul(g,Y)|0,C=(C=C+Math.imul(g,H)|0)+Math.imul(m,Y)|0,U=U+Math.imul(m,H)|0,P=P+Math.imul(d,K)|0,C=(C=C+Math.imul(d,V)|0)+Math.imul(p,K)|0,U=U+Math.imul(p,V)|0,P=P+Math.imul(l,z)|0,C=(C=C+Math.imul(l,X)|0)+Math.imul(f,z)|0,U=U+Math.imul(f,X)|0,h=(tt+(P+Math.imul(h,Q)|0)|0)+((8191&(C=(C=C+Math.imul(h,Z)|0)+Math.imul(c,Q)|0))<<13)|0,tt=((U=U+Math.imul(c,Z)|0)+(C>>>13)|0)+(h>>>26)|0,h&=67108863,P=Math.imul(A,x),C=(C=Math.imul(A,B))+Math.imul(k,x)|0,U=Math.imul(k,B),P=P+Math.imul(S,j)|0,C=(C=C+Math.imul(S,D)|0)+Math.imul(O,j)|0,U=U+Math.imul(O,D)|0,P=P+Math.imul(T,L)|0,C=(C=C+Math.imul(T,N)|0)+Math.imul(M,L)|0,U=U+Math.imul(M,N)|0,P=P+Math.imul(w,q)|0,C=(C=C+Math.imul(w,F)|0)+Math.imul(E,q)|0,U=U+Math.imul(E,F)|0,P=P+Math.imul(b,J)|0,C=(C=C+Math.imul(b,W)|0)+Math.imul(_,J)|0,U=U+Math.imul(_,W)|0,P=P+Math.imul(y,Y)|0,C=(C=C+Math.imul(y,H)|0)+Math.imul(v,Y)|0,U=U+Math.imul(v,H)|0,P=P+Math.imul(g,K)|0,C=(C=C+Math.imul(g,V)|0)+Math.imul(m,K)|0,U=U+Math.imul(m,V)|0,P=P+Math.imul(d,z)|0,C=(C=C+Math.imul(d,X)|0)+Math.imul(p,z)|0,U=U+Math.imul(p,X)|0,l=(tt+(P+Math.imul(l,Q)|0)|0)+((8191&(C=(C=C+Math.imul(l,Z)|0)+Math.imul(f,Q)|0))<<13)|0,tt=((U=U+Math.imul(f,Z)|0)+(C>>>13)|0)+(l>>>26)|0,l&=67108863,P=Math.imul(A,j),C=(C=Math.imul(A,D))+Math.imul(k,j)|0,U=Math.imul(k,D),P=P+Math.imul(S,L)|0,C=(C=C+Math.imul(S,N)|0)+Math.imul(O,L)|0,U=U+Math.imul(O,N)|0,P=P+Math.imul(T,q)|0,C=(C=C+Math.imul(T,F)|0)+Math.imul(M,q)|0,U=U+Math.imul(M,F)|0,P=P+Math.imul(w,J)|0,C=(C=C+Math.imul(w,W)|0)+Math.imul(E,J)|0,U=U+Math.imul(E,W)|0,P=P+Math.imul(b,Y)|0,C=(C=C+Math.imul(b,H)|0)+Math.imul(_,Y)|0,U=U+Math.imul(_,H)|0,P=P+Math.imul(y,K)|0,C=(C=C+Math.imul(y,V)|0)+Math.imul(v,K)|0,U=U+Math.imul(v,V)|0,P=P+Math.imul(g,z)|0,C=(C=C+Math.imul(g,X)|0)+Math.imul(m,z)|0,U=U+Math.imul(m,X)|0,d=(tt+(P+Math.imul(d,Q)|0)|0)+((8191&(C=(C=C+Math.imul(d,Z)|0)+Math.imul(p,Q)|0))<<13)|0,tt=((U=U+Math.imul(p,Z)|0)+(C>>>13)|0)+(d>>>26)|0,d&=67108863,P=Math.imul(A,L),C=(C=Math.imul(A,N))+Math.imul(k,L)|0,U=Math.imul(k,N),P=P+Math.imul(S,q)|0,C=(C=C+Math.imul(S,F)|0)+Math.imul(O,q)|0,U=U+Math.imul(O,F)|0,P=P+Math.imul(T,J)|0,C=(C=C+Math.imul(T,W)|0)+Math.imul(M,J)|0,U=U+Math.imul(M,W)|0,P=P+Math.imul(w,Y)|0,C=(C=C+Math.imul(w,H)|0)+Math.imul(E,Y)|0,U=U+Math.imul(E,H)|0,P=P+Math.imul(b,K)|0,C=(C=C+Math.imul(b,V)|0)+Math.imul(_,K)|0,U=U+Math.imul(_,V)|0,P=P+Math.imul(y,z)|0,C=(C=C+Math.imul(y,X)|0)+Math.imul(v,z)|0,U=U+Math.imul(v,X)|0,g=(tt+(P+Math.imul(g,Q)|0)|0)+((8191&(C=(C=C+Math.imul(g,Z)|0)+Math.imul(m,Q)|0))<<13)|0,tt=((U=U+Math.imul(m,Z)|0)+(C>>>13)|0)+(g>>>26)|0,g&=67108863,P=Math.imul(A,q),C=(C=Math.imul(A,F))+Math.imul(k,q)|0,U=Math.imul(k,F),P=P+Math.imul(S,J)|0,C=(C=C+Math.imul(S,W)|0)+Math.imul(O,J)|0,U=U+Math.imul(O,W)|0,P=P+Math.imul(T,Y)|0,C=(C=C+Math.imul(T,H)|0)+Math.imul(M,Y)|0,U=U+Math.imul(M,H)|0,P=P+Math.imul(w,K)|0,C=(C=C+Math.imul(w,V)|0)+Math.imul(E,K)|0,U=U+Math.imul(E,V)|0,P=P+Math.imul(b,z)|0,C=(C=C+Math.imul(b,X)|0)+Math.imul(_,z)|0,U=U+Math.imul(_,X)|0,y=(tt+(P+Math.imul(y,Q)|0)|0)+((8191&(C=(C=C+Math.imul(y,Z)|0)+Math.imul(v,Q)|0))<<13)|0,tt=((U=U+Math.imul(v,Z)|0)+(C>>>13)|0)+(y>>>26)|0,y&=67108863,P=Math.imul(A,J),C=(C=Math.imul(A,W))+Math.imul(k,J)|0,U=Math.imul(k,W),P=P+Math.imul(S,Y)|0,C=(C=C+Math.imul(S,H)|0)+Math.imul(O,Y)|0,U=U+Math.imul(O,H)|0,P=P+Math.imul(T,K)|0,C=(C=C+Math.imul(T,V)|0)+Math.imul(M,K)|0,U=U+Math.imul(M,V)|0,P=P+Math.imul(w,z)|0,C=(C=C+Math.imul(w,X)|0)+Math.imul(E,z)|0,U=U+Math.imul(E,X)|0,b=(tt+(P+Math.imul(b,Q)|0)|0)+((8191&(C=(C=C+Math.imul(b,Z)|0)+Math.imul(_,Q)|0))<<13)|0,tt=((U=U+Math.imul(_,Z)|0)+(C>>>13)|0)+(b>>>26)|0,b&=67108863,P=Math.imul(A,Y),C=(C=Math.imul(A,H))+Math.imul(k,Y)|0,U=Math.imul(k,H),P=P+Math.imul(S,K)|0,C=(C=C+Math.imul(S,V)|0)+Math.imul(O,K)|0,U=U+Math.imul(O,V)|0,P=P+Math.imul(T,z)|0,C=(C=C+Math.imul(T,X)|0)+Math.imul(M,z)|0,U=U+Math.imul(M,X)|0,w=(tt+(P+Math.imul(w,Q)|0)|0)+((8191&(C=(C=C+Math.imul(w,Z)|0)+Math.imul(E,Q)|0))<<13)|0,tt=((U=U+Math.imul(E,Z)|0)+(C>>>13)|0)+(w>>>26)|0,w&=67108863,P=Math.imul(A,K),C=(C=Math.imul(A,V))+Math.imul(k,K)|0,U=Math.imul(k,V),P=P+Math.imul(S,z)|0,C=(C=C+Math.imul(S,X)|0)+Math.imul(O,z)|0,U=U+Math.imul(O,X)|0,T=(tt+(P+Math.imul(T,Q)|0)|0)+((8191&(C=(C=C+Math.imul(T,Z)|0)+Math.imul(M,Q)|0))<<13)|0,tt=((U=U+Math.imul(M,Z)|0)+(C>>>13)|0)+(T>>>26)|0,T&=67108863,P=Math.imul(A,z),C=(C=Math.imul(A,X))+Math.imul(k,z)|0,U=Math.imul(k,X),S=(tt+(P+Math.imul(S,Q)|0)|0)+((8191&(C=(C=C+Math.imul(S,Z)|0)+Math.imul(O,Q)|0))<<13)|0,tt=((U=U+Math.imul(O,Z)|0)+(C>>>13)|0)+(S>>>26)|0,S&=67108863,Q=(tt+Math.imul(A,Q)|0)+((8191&(C=(C=Math.imul(A,Z))+Math.imul(k,Q)|0))<<13)|0,tt=((U=Math.imul(k,Z))+(C>>>13)|0)+(Q>>>26)|0,Q&=67108863,u[0]=$,u[1]=G,u[2]=r,u[3]=i,u[4]=o,u[5]=a,u[6]=s,u[7]=t,u[8]=e,u[9]=h,u[10]=l,u[11]=d,u[12]=g,u[13]=y,u[14]=b,u[15]=w,u[16]=T,u[17]=S,u[18]=Q,0!=tt&&(u[19]=tt,n.length++),n};function g(t,e,n){return(new m).mulp(t,e,n)}function m(t,e){this.x=t,this.y=e}Math.imul||(p=d),o.prototype.mulTo=function(t,e){var n=this.length+t.length;return e=(10===this.length&&10===t.length?p:n<63?d:n<1024?function(t,e,n){n.negative=e.negative^t.negative,n.length=t.length+e.length;for(var r=0,i=0,o=0;o<n.length-1;o++){for(var s=i,a=(i=0,67108863&r),u=Math.min(o,e.length-1),h=Math.max(0,o-t.length+1);h<=u;h++){var c,l=(0|t.words[o-h])*(0|e.words[h]);a=67108863&(c=(c=67108863&l)+a|0);i+=(s=(s=s+(l/67108864|0)|0)+(c>>>26)|0)>>>26,s&=67108863}n.words[o]=a,r=s,s=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}:g)(this,t,e)},m.prototype.makeRBT=function(t){for(var e=new Array(t),n=o.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,n,t);return e},m.prototype.revBin=function(t,e,n){if(0===t||t===n-1)return t;for(var r=0,i=0;i<e;i++)r|=(1&t)<<e-i-1,t>>=1;return r},m.prototype.permute=function(t,e,n,r,i,o){for(var s=0;s<o;s++)r[s]=e[t[s]],i[s]=n[t[s]]},m.prototype.transform=function(t,e,n,r,i,o){this.permute(o,t,e,n,r,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),h=Math.sin(2*Math.PI/a),c=0;c<i;c+=a)for(var l=u,f=h,d=0;d<s;d++){var p=n[c+d],g=r[c+d],m=n[c+d+s],y=l*m-f*(v=r[c+d+s]),v=l*v+f*m;n[c+d]=p+(m=y),r[c+d]=g+v,n[c+d+s]=p-m,r[c+d+s]=g-v,d!==a&&(y=u*l-h*f,f=u*f+h*l,l=y)}},m.prototype.guessLen13b=function(t,e){t=1&(r=1|Math.max(e,t));for(var n=0,r=r/2|0;r;r>>>=1)n++;return 1<<n+1+t},m.prototype.conjugate=function(t,e,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=t[r];t[r]=t[n-r-1],t[n-r-1]=i,i=e[r],e[r]=-e[n-r-1],e[n-r-1]=-i}},m.prototype.normalize13b=function(t,e){for(var n=0,r=0;r<e/2;r++){var i=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+n;t[r]=67108863&i,n=i<67108864?0:i/67108864|0}return t},m.prototype.convert13b=function(t,e,n,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],n[2*s]=8191&o,n[2*s+1]=8191&(o>>>=13),o>>>=13;for(s=2*e;s<i;++s)n[s]=0;r(0===o),r(0==(-8192&o))},m.prototype.stub=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=0;return e},m.prototype.mulp=function(t,e,n){var r=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(r),o=this.stub(r),s=new Array(r),a=new Array(r),u=new Array(r),h=new Array(r),c=new Array(r),l=new Array(r),f=n.words;f.length=r,this.convert13b(t.words,t.length,s,r),this.convert13b(e.words,e.length,h,r),this.transform(s,o,a,u,r,i),this.transform(h,o,c,l,r,i);for(var d=0;d<r;d++){var p=a[d]*c[d]-u[d]*l[d];u[d]=a[d]*l[d]+u[d]*c[d],a[d]=p}return this.conjugate(a,u,r),this.transform(a,u,f,o,r,i),this.conjugate(f,o,r),this.normalize13b(f,r),n.negative=t.negative^e.negative,n.length=t.length+e.length,n.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),g(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,n=0;n<this.length;n++){var i=(0|this.words[n])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[n]=67108863&o}return 0!==e&&(this.words[n]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),n=0;n<e.length;n++){var r=n%26;e[n]=(t.words[n/26|0]&1<<r)>>>r}return e}(t);if(0===e.length)return new o(1);for(var n=this,r=0;r<e.length&&0===e[r];r++,n=n.sqr());if(++r<e.length)for(var i=n.sqr();r<e.length;r++,i=i.sqr())0!==e[r]&&(n=n.mul(i));return n},o.prototype.iushln=function(t){r("number"==typeof t&&0<=t);var e=t%26,n=(t-e)/26,i=67108863>>>26-e<<26-e;if(0!=e){for(var o=0,s=0;s<this.length;s++){var a=this.words[s]&i,u=(0|this.words[s])-a<<e;this.words[s]=u|o,o=a>>>26-e}o&&(this.words[s]=o,this.length++)}if(0!=n){for(s=this.length-1;0<=s;s--)this.words[s+n]=this.words[s];for(s=0;s<n;s++)this.words[s]=0;this.length+=n}return this.strip()},o.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,n){r("number"==typeof t&&0<=t);var i=e?(e-e%26)/26:0,o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,u=n;if(i-=s,i=Math.max(0,i),u){for(var h=0;h<s;h++)u.words[h]=this.words[h];u.length=s}if(0!==s)if(this.length>s)for(this.length-=s,h=0;h<this.length;h++)this.words[h]=this.words[h+s];else this.words[0]=0,this.length=1;var c=0;for(h=this.length-1;0<=h&&(0!==c||i<=h);h--){var l=0|this.words[h];this.words[h]=c<<26-o|l>>>o,c=l&a}return u&&0!==c&&(u.words[u.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){r("number"==typeof t&&0<=t);var e=t%26;t=(t-e)/26;return!(this.length<=t||!(this.words[t]&1<<e))},o.prototype.imaskn=function(t){r("number"==typeof t&&0<=t);var e=t%26;t=(t-e)/26;return r(0===this.negative,"imaskn works only with positive numbers"),this.length<=t?this:(0!=e&&t++,this.length=Math.min(t,this.length),0!=e&&(this.words[this.length-1]&=67108863^67108863>>>e<<e),this.strip())},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?(1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(t),this.negative=1),this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&67108864<=this.words[e];e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,--this.words[e+1];return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,n){var i=t.length+n;this._expand(i);for(var o=0,s=0;s<t.length;s++){var a=(0|this.words[s+n])+o,u=(0|t.words[s])*e;o=((a-=67108863&u)>>26)-(u/67108864|0);this.words[s+n]=67108863&a}for(;s<this.length-n;s++)o=(a=(0|this.words[s+n])+o)>>26,this.words[s+n]=67108863&a;if(0===o)return this.strip();for(r(-1===o),s=o=0;s<this.length;s++)o=(a=-(0|this.words[s])+o)>>26,this.words[s]=67108863&a;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var n=(this.length,t.length),r=this.clone(),i=t,s=0|i.words[i.length-1];0!=(n=26-this._countBits(s))&&(i=i.ushln(n),r.iushln(n),s=0|i.words[i.length-1]);var a,u=r.length-i.length;if("mod"!==e){(a=new o(null)).length=1+u,a.words=new Array(a.length);for(var h=0;h<a.length;h++)a.words[h]=0}0===(t=r.clone()._ishlnsubmul(i,1,u)).negative&&(r=t,a&&(a.words[u]=1));for(var c=u-1;0<=c;c--){var l=67108864*(0|r.words[i.length+c])+(0|r.words[i.length+c-1]);l=Math.min(l/s|0,67108863);for(r._ishlnsubmul(i,l,c);0!==r.negative;)l--,r.negative=0,r._ishlnsubmul(i,1,c),r.isZero()||(r.negative^=1);a&&(a.words[c]=l)}return a&&a.strip(),r.strip(),"div"!==e&&0!=n&&r.iushrn(n),{div:a||null,mod:r}},o.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),{div:i="mod"!==e?a.div.neg():i,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var n=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1);t=t.andln(1);return(r=n.cmp(r))<0||1===t&&0===r?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,n=0,i=this.length-1;0<=i;i--)n=(e*n+(0|this.words[i]))%t;return n},o.prototype.idivn=function(t){r(t<=67108863);for(var e=0,n=this.length-1;0<=n;n--){var i=(0|this.words[n])+67108864*e;this.words[n]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());for(var e=this,n=t.clone(),i=(e=0!==e.negative?e.umod(t):e.clone(),new o(1)),s=new o(0),a=new o(0),u=new o(1),h=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++h;for(var c=n.clone(),l=e.clone();!e.isZero();){for(var f=0,d=1;0==(e.words[0]&d)&&f<26;++f,d<<=1);if(0<f)for(e.iushrn(f);0<f--;)(i.isOdd()||s.isOdd())&&(i.iadd(c),s.isub(l)),i.iushrn(1),s.iushrn(1);for(var p=0,g=1;0==(n.words[0]&g)&&p<26;++p,g<<=1);if(0<p)for(n.iushrn(p);0<p--;)(a.isOdd()||u.isOdd())&&(a.iadd(c),u.isub(l)),a.iushrn(1),u.iushrn(1);0<=e.cmp(n)?(e.isub(n),i.isub(a),s.isub(u)):(n.isub(e),a.isub(i),u.isub(s))}return{a:a,b:u,gcd:n.iushln(h)}},o.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());for(var e,n=this,i=t.clone(),s=(n=0!==n.negative?n.umod(t):n.clone(),new o(1)),a=new o(0),u=i.clone();0<n.cmpn(1)&&0<i.cmpn(1);){for(var h=0,c=1;0==(n.words[0]&c)&&h<26;++h,c<<=1);if(0<h)for(n.iushrn(h);0<h--;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var l=0,f=1;0==(i.words[0]&f)&&l<26;++l,f<<=1);if(0<l)for(i.iushrn(l);0<l--;)a.isOdd()&&a.iadd(u),a.iushrn(1);0<=n.cmp(i)?(n.isub(i),s.isub(a)):(i.isub(n),a.isub(s))}return(e=0===n.cmpn(1)?s:a).cmpn(0)<0&&e.iadd(t),e},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),n=t.clone();e.negative=0;for(var r=n.negative=0;e.isEven()&&n.isEven();r++)e.iushrn(1),n.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=e.cmp(n);if(i<0){var o=e;e=n,n=o}else if(0===i||0===n.cmpn(1))break;e.isub(n)}return n.iushln(r)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){r("number"==typeof t);t=(t-(e=t%26))/26;var e=1<<e;if(this.length<=t)return this._expand(1+t),this.words[t]|=e,this;for(var n=e,i=t;0!==n&&i<this.length;i++){var o=0|this.words[i];n=(o+=n)>>>26;o&=67108863,this.words[i]=o}return 0!==n&&(this.words[i]=n,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e=t<0;return 0===this.negative||e?0===this.negative&&e?1:(this.strip(),t=1<this.length?1:(r((t=e?-t:t)<=67108863,"Number is too big"),(e=0|this.words[0])===t?0:e<t?-1:1),0!==this.negative?0|-t:t):-1},o.prototype.cmp=function(t){return 0!==this.negative&&0===t.negative?-1:0===this.negative&&0!==t.negative?1:(t=this.ucmp(t),0!==this.negative?0|-t:t)},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,n=this.length-1;0<=n;n--){var r=0|this.words[n],i=0|t.words[n];if(r!=i){r<i?e=-1:i<r&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return 0<=this.cmpn(t)},o.prototype.gte=function(t){return 0<=this.cmp(t)},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new T(t)},o.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var y={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function E(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function T(t){var e;"string"==typeof t?(e=o._prime(t),this.m=e.p,this.prime=e):(r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null)}function M(t){T.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){for(var e,n=t;this.split(n,this.tmp),(e=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength())>this.n;);return 0===(t=e<this.n?-1:n.ucmp(this.p))?(n.words[0]=0,n.length=1):0<t?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},i(b,v),b.prototype.split=function(t,e){for(var n=Math.min(t.length,9),r=0;r<n;r++)e.words[r]=t.words[r];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,r=10;r<t.length;r++){var o=0|t.words[r];t.words[r-10]=(4194303&o)<<4|i>>>22,i=o}0==(t.words[r-10]=i>>>=22)&&10<t.length?t.length-=10:t.length-=9},b.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,n=0;n<t.length;n++){var r=0|t.words[n];e+=977*r,t.words[n]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(_,v),i(w,v),i(E,v),E.prototype.imulK=function(t){for(var e=0,n=0;n<t.length;n++){var r=19*(0|t.words[n])+e,i=67108863&r;r>>>=26,t.words[n]=i,e=r}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(y[t])return y[t];var e;if("k256"===t)e=new b;else if("p224"===t)e=new _;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new E}return y[t]=e},T.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},T.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},T.prototype.imod=function(t){return(this.prime?this.prime.ireduce(t):t.umod(this.m))._forceRed(this)},T.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},T.prototype.add=function(t,e){return this._verify2(t,e),0<=(e=t.add(e)).cmp(this.m)&&e.isub(this.m),e._forceRed(this)},T.prototype.iadd=function(t,e){return this._verify2(t,e),0<=(e=t.iadd(e)).cmp(this.m)&&e.isub(this.m),e},T.prototype.sub=function(t,e){return this._verify2(t,e),(e=t.sub(e)).cmpn(0)<0&&e.iadd(this.m),e._forceRed(this)},T.prototype.isub=function(t,e){return this._verify2(t,e),(e=t.isub(e)).cmpn(0)<0&&e.iadd(this.m),e},T.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},T.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},T.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},T.prototype.isqr=function(t){return this.imul(t,t.clone())},T.prototype.sqr=function(t){return this.mul(t,t)},T.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e)return e=this.m.add(new o(1)).iushrn(2),this.pow(t,e);for(var n=this.m.subn(1),i=0;!n.isZero()&&0===n.andln(1);)i++,n.iushrn(1);r(!n.isZero());for(var s=new o(1).toRed(this),a=s.redNeg(),u=this.m.subn(1).iushrn(1),h=new o(2*(h=this.m.bitLength())*h).toRed(this);0!==this.pow(h,u).cmp(a);)h.redIAdd(a);for(var c=this.pow(h,n),l=this.pow(t,n.addn(1).iushrn(1)),f=this.pow(t,n),d=i;0!==f.cmp(s);){for(var p=f,g=0;0!==p.cmp(s);g++)p=p.redSqr();r(g<d);var m=this.pow(c,new o(1).iushln(d-g-1));l=l.redMul(m),c=m.redSqr(),f=f.redMul(c),d=g}return l},T.prototype.invm=function(t){return 0!==(t=t._invmp(this.m)).negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},T.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=t;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],t);var i=n[0],s=0,a=0,u=e.bitLength()%26;for(0===u&&(u=26),r=e.length-1;0<=r;r--){for(var h=e.words[r],c=u-1;0<=c;c--){var l=h>>c&1;i!==n[0]&&(i=this.sqr(i)),0!=l||0!==s?(s<<=1,s|=l,(4==++a||0===r&&0===c)&&(i=this.mul(i,n[s]),s=a=0)):a=0}u=26}return i},T.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},T.prototype.convertFrom=function(t){return(t=t.clone()).red=null,t},o.mont=function(t){return new M(t)},i(M,T),M.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},M.prototype.convertFrom=function(t){return(t=this.imod(t.mul(this.rinv))).red=null,t},M.prototype.imul=function(t,e){return t.isZero()||e.isZero()?(t.words[0]=0,t.length=1,t):(e=(t=t.imul(e)).maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=t=t.isub(e).iushrn(this.shift),0<=t.cmp(this.m)?e=t.isub(this.m):t.cmpn(0)<0&&(e=t.iadd(this.m)),e._forceRed(this))},M.prototype.mul=function(t,e){return t.isZero()||e.isZero()?new o(0)._forceRed(this):(e=(t=t.mul(e)).maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=t=t.isub(e).iushrn(this.shift),0<=t.cmp(this.m)?e=t.isub(this.m):t.cmpn(0)<0&&(e=t.iadd(this.m)),e._forceRed(this))},M.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,n(55)(t))},function(t,e,n){"use strict";const r=e;r.der=n(40),r.pem=n(59)},function(t,e,n){"use strict";const r=n(17),i=n(28).Buffer,o=n(29),s=n(31);function a(t){o.call(this,"der",t)}function u(t){return t<10?"0"+t:t}(t.exports=function(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new a,this.tree._init(t.body)}).prototype.encode=function(t,e){return this.tree._encode(t,e).join()},r(a,o),a.prototype._encodeComposite=function(t,e,n,r){if(n=function(t,e,n,r){let i;if("seqof"===t?t="seq":"setof"===t&&(t="set"),s.tagByName.hasOwnProperty(t))i=s.tagByName[t];else{if("number"!=typeof t||(0|t)!==t)return r.error("Unknown tag: "+t);i=t}return 31<=i?r.error("Multi-octet tag encoding unsupported"):(e||(i|=32),i|=s.tagClassByName[n||"universal"]<<6,i)}(t,e,n,this.reporter),r.length<128){const t=i.alloc(2);return t[0]=n,t[1]=r.length,this._createEncoderBuffer([t,r])}let o=1;for(let t=r.length;256<=t;t>>=8)o++;const a=i.alloc(2+o);a[0]=n,a[1]=128|o;for(let t=1+o,e=r.length;0<e;t--,e>>=8)a[t]=255&e;return this._createEncoderBuffer([a,r])},a.prototype._encodeStr=function(t,e){if("bitstr"===e)return this._createEncoderBuffer([0|t.unused,t.data]);if("bmpstr"!==e)return"numstr"===e?this._isNumstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===e?this._isPrintstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(e)||"objDesc"===e?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: "+e+" unsupported");{const e=i.alloc(2*t.length);for(let n=0;n<t.length;n++)e.writeUInt16BE(t.charCodeAt(n),2*n);return this._createEncoderBuffer(e)}},a.prototype._encodeObjid=function(t,e,n){if("string"==typeof t){if(!e)return this.reporter.error("string objid given, but no values map found");if(!e.hasOwnProperty(t))return this.reporter.error("objid not found in values map");t=e[t].split(/[\s.]+/g);for(let e=0;e<t.length;e++)t[e]|=0}else if(Array.isArray(t)){t=t.slice();for(let e=0;e<t.length;e++)t[e]|=0}if(!Array.isArray(t))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(t));if(!n){if(40<=t[1])return this.reporter.error("Second objid identifier OOB");t.splice(0,2,40*t[0]+t[1])}let r=0;for(let e=0;e<t.length;e++){let n=t[e];for(r++;128<=n;n>>=7)r++}const o=i.alloc(r);let s=o.length-1;for(let e=t.length-1;0<=e;e--){let n=t[e];for(o[s--]=127&n;0<(n>>=7);)o[s--]=128|127&n}return this._createEncoderBuffer(o)},a.prototype._encodeTime=function(t,e){let n;const r=new Date(t);return"gentime"===e?n=[u(r.getUTCFullYear()),u(r.getUTCMonth()+1),u(r.getUTCDate()),u(r.getUTCHours()),u(r.getUTCMinutes()),u(r.getUTCSeconds()),"Z"].join(""):"utctime"===e?n=[u(r.getUTCFullYear()%100),u(r.getUTCMonth()+1),u(r.getUTCDate()),u(r.getUTCHours()),u(r.getUTCMinutes()),u(r.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+e+" time is not supported yet"),this._encodeStr(n,"octstr")},a.prototype._encodeNull=function(){return this._createEncoderBuffer("")},a.prototype._encodeInt=function(t,e){if("string"==typeof t){if(!e)return this.reporter.error("String int or enum given, but no values map");if(!e.hasOwnProperty(t))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(t));t=e[t]}if("number"!=typeof t&&!i.isBuffer(t)){const e=t.toArray();!t.sign&&128&e[0]&&e.unshift(0),t=i.from(e)}if(i.isBuffer(t)){let e=t.length;0===t.length&&e++;const n=i.alloc(e);return t.copy(n),0===t.length&&(n[0]=0),this._createEncoderBuffer(n)}if(t<128)return this._createEncoderBuffer(t);if(t<256)return this._createEncoderBuffer([0,t]);let n=1;for(let e=t;256<=e;e>>=8)n++;const r=new Array(n);for(let e=r.length-1;0<=e;e--)r[e]=255&t,t>>=8;return 128&r[0]&&r.unshift(0),this._createEncoderBuffer(i.from(r))},a.prototype._encodeBool=function(t){return this._createEncoderBuffer(t?255:0)},a.prototype._use=function(t,e){return(t="function"==typeof t?t(e):t)._getEncoder("der").tree},a.prototype._skipDefault=function(t,e,n){const r=this._baseState;let i;if(null===r.default)return!1;var o=t.join();if(void 0===r.defaultBuffer&&(r.defaultBuffer=this._encodeValue(r.default,e,n).join()),o.length!==r.defaultBuffer.length)return!1;for(i=0;i<o.length;i++)if(o[i]!==r.defaultBuffer[i])return!1;return!0}},function(t,e){var n,r;t=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var a,u=[],h=!1,c=-1;function l(){h&&a&&(h=!1,a.length?u=a.concat(u):c=-1,u.length&&f())}function f(){if(!h){var t=s(l);h=!0;for(var e=u.length;e;){for(a=u,u=[];++c<e;)a&&a[c].run();c=-1,e=u.length}a=null,h=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function p(){}t.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new d(t,e)),1!==u.length||h||s(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=p,t.addListener=p,t.once=p,t.off=p,t.removeListener=p,t.removeAllListeners=p,t.emit=p,t.prependListener=p,t.prependOnceListener=p,t.listeners=function(t){return[]},t.binding=function(t){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(t){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},function(t,e,n){"use strict";const r=e;r.der=n(43),r.pem=n(60)},function(t,e,n){"use strict";const r=n(17),i=n(38),o=n(19).DecoderBuffer,s=n(29),a=n(31);function u(t){s.call(this,"der",t)}function h(t,e){let n=t.readUInt8(e);if(t.isError(n))return n;var r=a.tagClass[n>>6],i=0==(32&n);if(31==(31&n)){let r=n;for(n=0;128==(128&r);){if(r=t.readUInt8(e),t.isError(r))return r;n<<=7,n|=127&r}}else n&=31;return{cls:r,primitive:i,tag:n,tagStr:a.tag[n]}}function c(t,e,n){let r=t.readUInt8(n);if(t.isError(r))return r;if(!e&&128===r)return null;if(0==(128&r))return r;var i=127&r;if(4<i)return t.error("length octect is too long");for(let e=r=0;e<i;e++){r<<=8;var o=t.readUInt8(n);if(t.isError(o))return o;r|=o}return r}(t.exports=function(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new u,this.tree._init(t.body)}).prototype.decode=function(t,e){return o.isDecoderBuffer(t)||(t=new o(t,e)),this.tree._decode(t,e)},r(u,s),u.prototype._peekTag=function(t,e,n){if(t.isEmpty())return!1;var r=t.save(),i=h(t,'Failed to peek tag: "'+e+'"');return t.isError(i)?i:(t.restore(r),i.tag===e||i.tagStr===e||i.tagStr+"of"===e||n)},u.prototype._decodeTag=function(t,e,n){var r=h(t,'Failed to decode tag of "'+e+'"');if(t.isError(r))return r;let i=c(t,r.primitive,'Failed to get length of "'+e+'"');return t.isError(i)?i:n||r.tag===e||r.tagStr===e||r.tagStr+"of"===e?r.primitive||null!==i?t.skip(i,'Failed to match body of: "'+e+'"'):(n=t.save(),r=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"'),t.isError(r)?r:(i=t.offset-n.offset,t.restore(n),t.skip(i,'Failed to match body of: "'+e+'"'))):t.error('Failed to match tag: "'+e+'"')},u.prototype._skipUntilEnd=function(t,e){for(;;){var n=h(t,e);if(t.isError(n))return n;var r=c(t,n.primitive,e);if(t.isError(r))return r;let i;if(i=n.primitive||null!==r?t.skip(r):this._skipUntilEnd(t,e),t.isError(i))return i;if("end"===n.tagStr)break}},u.prototype._decodeList=function(t,e,n,r){const i=[];for(;!t.isEmpty();){var o=this._peekTag(t,"end");if(t.isError(o))return o;var s=n.decode(t,"der",r);if(t.isError(s)&&o)break;i.push(s)}return i},u.prototype._decodeStr=function(t,e){if("bitstr"===e){var n=t.readUInt8();return t.isError(n)?n:{unused:n,data:t.raw()}}if("bmpstr"===e){const e=t.raw();if(e.length%2==1)return t.error("Decoding of string type: bmpstr length mismatch");let n="";for(let t=0;t<e.length/2;t++)n+=String.fromCharCode(e.readUInt16BE(2*t));return n}return"numstr"===e?(n=t.raw().toString("ascii"),this._isNumstr(n)?n:t.error("Decoding of string type: numstr unsupported characters")):"octstr"===e||"objDesc"===e?t.raw():"printstr"!==e?/str$/.test(e)?t.raw().toString():t.error("Decoding of string type: "+e+" unsupported"):(e=t.raw().toString("ascii"),this._isPrintstr(e)?e:t.error("Decoding of string type: printstr unsupported characters"))},u.prototype._decodeObjid=function(t,e,n){let r;const i=[];let o=0,s=0;for(;!t.isEmpty();)s=t.readUInt8(),o<<=7,o|=127&s,0==(128&s)&&(i.push(o),o=0);128&s&&i.push(o);const a=i[0]/40|0,u=i[0]%40;if(r=n?i:[a,u].concat(i.slice(1)),e){let t=e[r.join(" ")];void 0===t&&(t=e[r.join(".")]),void 0!==t&&(r=t)}return r},u.prototype._decodeTime=function(t,e){const n=t.raw().toString();let r,i,o,s,a,u;if("gentime"===e)r=0|n.slice(0,4),i=0|n.slice(4,6),o=0|n.slice(6,8),s=0|n.slice(8,10),a=0|n.slice(10,12),u=0|n.slice(12,14);else{if("utctime"!==e)return t.error("Decoding "+e+" time is not supported yet");r=0|n.slice(0,2),i=0|n.slice(2,4),o=0|n.slice(4,6),s=0|n.slice(6,8),a=0|n.slice(8,10),u=0|n.slice(10,12),r=r<70?2e3+r:1900+r}return Date.UTC(r,i-1,o,s,a,u,0)},u.prototype._decodeNull=function(){return null},u.prototype._decodeBool=function(t){var e=t.readUInt8();return t.isError(e)?e:0!==e},u.prototype._decodeInt=function(t,e){t=t.raw();let n=new i(t);return e&&(n=e[n.toString(10)]||n),n},u.prototype._use=function(t,e){return(t="function"==typeof t?t(e):t)._getDecoder("der").tree}},function(t,e){t.exports={bitSlice(t,e,n){return t=this._shiftRight(t.slice(e/32),32-(31&e)).slice(1),void 0===n?t:this.clamp(t,n-e)},extract(t,e,n){let r;var i=Math.floor(-e-n&31);return r=-32&(e+n-1^e)?t[e/32|0]<<32-i^t[e/32+1|0]>>>i:t[e/32|0]>>>i,r&(1<<n)-1},concat(t,e){if(0===t.length||0===e.length)return t.concat(e);var n=t[t.length-1],r=this.getPartial(n);return 32===r?t.concat(e):this._shiftRight(e,r,0|n,t.slice(0,t.length-1))},bitLength(t){var e=t.length;return 0===e?0:(t=t[e-1],32*(e-1)+this.getPartial(t))},clamp(t,e){if(32*t.length<e)return t;var n=(t=t.slice(0,Math.ceil(e/32))).length;return e&=31,0<n&&e&&(t[n-1]=this.partial(e,t[n-1]&2147483648>>e-1,1)),t},partial:(t,e,n)=>32===t?e:(n?0|e:e<<32-t)+1099511627776*t,getPartial:t=>Math.round(t/1099511627776)||32,equal(t,e){if(this.bitLength(t)!==this.bitLength(e))return!1;let n,r=0;for(n=0;n<t.length;n++)r|=t[n]^e[n];return 0===r},_shiftRight(t,e,n,r){let i;var o;for(void 0===r&&(r=[]);32<=e;e-=32)r.push(n),n=0;if(0===e)return r.concat(t);for(i=0;i<t.length;i++)r.push(n|t[i]>>>e),n=t[i]<<32-e;return o=t.length?t[t.length-1]:0,o=this.getPartial(o),r.push(this.partial(e+o&31,32<e+o?n:r.pop(),1)),r},_xor4:(t,e)=>[t[0]^e[0],t[1]^e[1],t[2]^e[2],t[3]^e[3]],byteswapM(t){let e;var n;for(e=0;e<t.length;++e)n=t[e],t[e]=n>>>24|n>>>8&65280|(65280&n)<<8|n<<24;return t},bytesFromBits(t){let e=[];var n=this.bitLength(t);let r,i;for(r=0;r<n/8;r++)0==(3&r)&&(i=t[r/4]),e.push(i>>>24),i<<=8;return e},bytesToBits(t){let e,n=[],r=0;for(e=0;e<t.length;e++)r=r<<8|t[e],3==(3&e)&&(n.push(r),r=0);return 3&e&&n.push(this.partial(8*(3&e),r)),n}}},function(t,e){var n={utf8:{stringToBytes:function(t){return n.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(n.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};t.exports=n},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));e=n(4);var r=n.n(e),i=(e=n(5),n.n(e)),o=n(0),s=n(2),a=n(1),u=function(){function t(){r()(this,t),this.subscribeCallbacks={},this.instance=null}return i()(t,[{key:"subscribe",value:function(t,e){try{Object(o.r)(e)&&Object.values(s.a).includes(t)&&(void 0===this.subscribeCallbacks[t]&&(this.subscribeCallbacks[t]=[]),this.subscribeCallbacks[t].push(e))}catch(t){a.a.error(t)}}},{key:"applySubscribeWithOpts",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};try{e=Object.assign({},e,{immediately:!1});var n=this.subscribeCallbacks[t.type];if(void 0===n)return;n.forEach((function(n){if(Object(o.r)(n))try{n(t.event,e)}catch(n){}}))}catch(n){a.a.error(n)}}},{key:"applySubscribe",value:function(t){return this.applySubscribeWithOpts(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new t),this.instance}}]),t}()},function(t,e){function n(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(r,i)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(i,o){var s=t.apply(e,r);function a(t){n(s,i,o,a,u,"next",t)}function u(t){n(s,i,o,a,u,"throw",t)}a(void 0)}))}}},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){(function(e){const{BigInteger:r,SecureRandom:i}=n(22),o=n(23),s=n(35),a=n(52),u=n(27),h=n(53),c=n(24),l=n(54),f=l.bignum,d=n(37),p=new i,g=l.define("ASN1_SM2EncryptFormat",(function(){this.seq().obj(this.key("X").int(),this.key("Y").int(),this.key("Hash").octstr(),this.key("Cipher").octstr())})),m=l.define("ASN1_SM2SignFormat",(function(){this.seq().obj(this.key("R").int(),this.key("S").int())})),y=l.define("ASN1_SM2PublicKeyObjID",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("subAlgorithm").objid())})),v=l.define("ASN1_SM2PublicKey",(function(){this.seq().obj(this.key("algorithm").use(y),this.key("key").bitstr())}));t.exports=class{constructor(){this.curve=new o,this.ecmath=new h,this.sm3=new u}encodePublicKeyToDer(t){return t=v.encode({algorithm:{algorithm:"1.2.840.10045.2.1".split("."),subAlgorithm:"1.2.156.10197.1.301".split(".")},key:{data:e.from(t,"hex")}},"der"),c.byteArrayToHex(t)}decodePublicKeyFromDer(t){return t=v.decode(e.from(t,"hex"),"der"),c.byteArrayToHex(t.key.data)}encrypt(t,e){var n=new r(this.curve.n.bitLength(),p).mod(this.curve.n.subtract(r.ONE)).add(r.ONE);const i=this.ecmath.ECPointMultiplyG(n);var o=d.normalize(i.getX().toByteArray()),u=d.normalize(i.getY().toByteArray()),h=new s(t.substr(2,64),t.substr(66,64));const l=this.ecmath.ECPointMultiply(h,n),m=d.normalize(l.getX().toByteArray());h=d.normalize(l.getY().toByteArray()),n=m.concat(h);var y=a.kdf(n,e.length);let v=!0;for(let t=0;t<y.length;t++)if(0!=y[t]){v=!1;break}if(v)return this.encrypt(t,e);const b=new Array(e.length);for(let t=0;t<e.length;t++)b[t]=e[t]^y[t];return h=m.concat(Array.prototype.slice.call(e)).concat(h),this.sm3.init(),this.sm3.update(h),h=this.sm3.final(),h=g.encode({X:new f(c.byteArrayToHex(o),16),Y:new f(c.byteArrayToHex(u),16),Hash:h,Cipher:b},"der"),c.byteArrayToHex(h)}decrypt(t,n){n=e.from(c.hexToByteArray(n));const i=g.decode(n,"der");n=new s(i.X.toString(16),i.Y.toString(16)),t=new r(t,16);const o=this.ecmath.ECPointMultiply(n,t),u=d.normalize(o.getX().toByteArray());n=d.normalize(o.getY().toByteArray()),t=u.concat(n);var h=a.kdf(t,i.Cipher.length);let l=!0;for(let t=0;t<h.length;t++)if(0!=h[t]){l=!1;break}if(l)return-1;const f=new Array(i.Cipher.length);for(let t=0;t<i.Cipher.length;t++)f[t]=i.Cipher[t]^h[t];n=u.concat(f).concat(n),this.sm3.init(),this.sm3.update(n);return e.from(this.sm3.final()).equals(i.Hash)?f:-1}sign(t,e,n,i){t.startsWith("0x")&&(t=t.slice(2)),e.startsWith("0x")&&(e=e.slice(2));var o=new s(t.substr(2,64),t.substr(66,64));o=a.SM2MessageDigest(n,i,o);const u=new r(this.curve.n.bitLength(),p).mod(this.curve.n.subtract(r.ONE)).add(r.ONE),h=this.ecmath.ECPointMultiplyG(u),l=new r(c.byteArrayToHex(o),16).add(h.getX()).mod(this.curve.n);if(l.equals(this.ecmath.zero))return this.sign(t,e,n,i);if(l.add(u).equals(this.curve.n))return this.sign(t,e,n,i);const d=new r(e,16),g=d.add(this.ecmath.one).modInverse(this.curve.n),y=l.multiply(d),v=g.multiply(u.add(y.negate())).mod(this.curve.n);return v.equals(this.ecmath.zero)?this.sign(t,e,n,i):(i=m.encode({R:new f(l.toString(16),16),S:new f(v.toString(16),16)},"der"),c.byteArrayToHex(i))}verify(t,n,i,o){t.startsWith("0x")&&(t=t.slice(2));var u=e.from(c.hexToByteArray(o));const h=m.decode(u,"der"),l=new r(h.R.toString(16),16),f=new r(h.S.toString(16),16);if(!(0<l.compareTo(this.ecmath.zero)&&l.compareTo(this.curve.n)<0))return!1;if(!(0<f.compareTo(this.ecmath.zero)&&f.compareTo(this.curve.n)<0))return!1;const d=l.add(f).mod(this.curve.n);if(d.equals(this.ecmath.zero))return!1;o=this.ecmath.ECPointMultiplyG(f),u=new s(t.substr(2,64),t.substr(66,64)),t=this.ecmath.ECPointMultiply(u,d);const p=this.ecmath.ECPointAdd(o,t);u=a.SM2MessageDigest(n,i,u);return!!new r(c.byteArrayToHex(u),16).add(p.getX()).mod(this.curve.n).equals(l)}genKeyPair(){const t=new r(this.curve.n.bitLength(),p).mod(this.curve.n.subtract(r.ONE)).add(r.ONE),e=this.ecmath.ECPointMultiplyG(t);var n=d.normalize(e.getX().toByteArray()),i=d.normalize(e.getY().toByteArray());i=c.byteArrayToHex([4,...n,...i]);return{privateKey:d.leftPad(t.toString(16),64),publicKey:i}}getPublicKeyFromPrivateKey(t){const e=this.ecmath.ECPointMultiplyG(new r(t,16));var n=d.normalize(e.getX().toByteArray());t=d.normalize(e.getY().toByteArray());return c.byteArrayToHex([4,...n,...t])}kdf(t,e){return a.kdf(t,e)}}}).call(this,n(33).Buffer)},function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,h=u>>1,c=-7,l=n?i-1:0,f=n?-1:1;n=t[e+l];for(l+=f,o=n&(1<<-c)-1,n>>=-c,c+=a;0<c;o=256*o+t[e+l],l+=f,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=r;0<c;s=256*s+t[e+l],l+=f,c-=8);if(0===o)o=1-h;else{if(o===u)return s?NaN:1/0*(n?-1:1);s+=Math.pow(2,r),o-=h}return(n?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,u=8*o-i-1,h=(1<<u)-1,c=h>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1;o=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(r=Math.pow(2,-s))<1&&(s--,r*=2),2<=(e+=1<=s+c?l/r:l*Math.pow(2,1-c))*r&&(s++,r/=2),h<=s+c?(a=0,s=h):1<=s+c?(a=(e*r-1)*Math.pow(2,i),s+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,i),s=0));8<=i;t[n+f]=255&a,f+=d,a/=256,i-=8);for(s=s<<i|a,u+=i;0<u;t[n+f]=255&s,f+=d,s/=256,u-=8);t[n+f-d]|=128*o}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){const r=n(27),i=new(n(23)),o=new r,s=n(37);function a(t,e){const n=new Array(2+t.length+192);var r=8*t.length;n[0]=r>>8&255,n[1]=255&r;for(let e=0;e<t.length;e++)n[2+e]=t[e];let a=2+t.length;var u=s.normalize(i.a.toByteArray());for(let t=0;t<u.length;t++)n[a+t]=(u[t]>>>0)%256;a+=u.length;var h=s.normalize(i.b.toByteArray());for(let t=0;t<h.length;t++)n[a+t]=(h[t]>>>0)%256;a+=h.length;var c=s.normalize(i.Gx.toByteArray());for(let t=0;t<c.length;t++)n[a+t]=(c[t]>>>0)%256;a+=c.length;var l=s.normalize(i.Gy.toByteArray());for(let t=0;t<l.length;t++)n[a+t]=(l[t]>>>0)%256;a+=l.length;var f=s.normalize(e.getX().toByteArray());for(let t=0;t<f.length;t++)n[a+t]=(f[t]>>>0)%256;a+=f.length;var d=s.normalize(e.getY().toByteArray());for(let t=0;t<d.length;t++)n[a+t]=(d[t]>>>0)%256;return a+=d.length,o.init(),o.update(n),o.final()}t.exports={SM2MessageDigest:function(t,e,n){return n=a(e,n),o.init(),o.update(n),o.update(t),o.final()},SM2GetZ:a,kdf:function(t,e){if(137438953440<e)return-1;if(1024<t.length)return-1;let n=1,r=e;var i;const s=[];let a=0;for(t.push((n>>>24)%256),t.push((n>>>16)%256),t.push((n>>>8)%256),t.push((n>>>0)%256);0<r;){if(o.init(),o.update(t),i=o.final(),r<=32)for(let t=0;t<r;t++)s[a+t]=i[t];else{var u=32<=e?32:e;for(let t=0;t<u;t++)s[a+t]=i[t]}r-=32,a+=32,n++,t[t.length-4]=(n>>>24)%256,t[t.length-3]=(n>>>16)%256,t[t.length-2]=(n>>>8)%256,t[t.length-1]=(n>>>0)%256}return s}}},function(t,e,n){const r=n(22).BigInteger,i=n(23),o=n(35);t.exports=class{constructor(){this.curve=new i,this.G=new o("32C4AE2C1F1981195F9904466A39C9948FE30BBFF2660BE1715A4589334C74C7","BC3736A2F4F6779C59BDCEE36B692153D0A9877CC62A474002DF32E52139F0A0"),this.zero=new r("0"),this.one=new r("1"),this.two=new r("2"),this.three=new r("3"),this.infinity=new o(null,null),this.preCompute()}preCompute(){const t=new Map;for(let e=1;e<256;e++)t.set(""+e,this.preComputeMultiplyG(new r(""+e)));this.map=t}preComputeMultiplyG(t){if(t.equals(this.one))return this.G;let e=this.G;for(let n=t.bitLength()-2;0<=n;n--)e=this.ECPointDoubling(e),1==t.testBit(n)&&(e=this.ECPointAdd(e,this.G));return e}ECPointAdd(t,e){var n=this.curve.p;if(t.isInfinity())return e;if(e.isInfinity())return t;const r=t.X,i=t.Y,s=t.Z,a=e.X,u=e.Y;var h=e.Z;const c=r.multiply(h).mod(n);var l=a.multiply(s).mod(n);const f=c.subtract(l),d=i.multiply(h).mod(n);e=u.multiply(s).mod(n);const p=d.subtract(e);if(this.zero.equals(f))return this.zero.equals(p)?this.ECPointDoubling(t):this.infinity;const g=c.add(l),m=s.multiply(h).mod(n),y=f.square().mod(n),v=f.multiply(y).mod(n);return l=m.multiply(p.square()).subtract(g.multiply(y)).mod(n),h=f.multiply(l).mod(n),l=p.multiply(y.multiply(c).subtract(l)).subtract(d.multiply(v)).mod(n),n=v.multiply(m).mod(n),new o(h,l,n)}ECPointDoubling(t){if(t.isInfinity())return t;if(!t.Y.signum())return this.infinity;const e=t.X,n=t.Y,r=t.Z;var i=this.curve.p;const s=this.curve.a,a=e.square().multiply(this.three).add(s.multiply(r.square())).mod(i),u=n.shiftLeft(1).multiply(r).mod(i),h=n.square().mod(i),c=h.multiply(e).multiply(r).mod(i),l=u.square().mod(i);var f=a.square().subtract(c.shiftLeft(3)).mod(i);t=u.multiply(f).mod(i),f=a.multiply(c.shiftLeft(2).subtract(f)).subtract(l.shiftLeft(1).multiply(h)).mod(i),i=u.multiply(l).mod(i);return new o(t,f,i)}ECPointMultiply(t,e){if(e.equals(this.one))return t;let n=t;for(let r=e.bitLength()-2;0<=r;r--)n=this.ECPointDoubling(n),1==e.testBit(r)&&(n=this.ECPointAdd(n,t));return n}ECPointMultiplyG(t){if(t.equals(this.one))return this.G;var e=t.bitLength(),n=e%8==0?8:e%8;let r=this.map.get(t.shiftRight(e-n).toString());for(let e=t.bitLength()-n-1;0<e;e-=8){r=this.ECPointDoubling(r),r=this.ECPointDoubling(r),r=this.ECPointDoubling(r),r=this.ECPointDoubling(r),r=this.ECPointDoubling(r),r=this.ECPointDoubling(r),r=this.ECPointDoubling(r),r=this.ECPointDoubling(r);let n=0;for(let r=0;r<8;r++)n*=2,t.testBit(e-r)&&(n+=1);0!==n&&(r=this.ECPointAdd(r,this.map.get(""+n)))}return r}ECPointIsOnCurve(t){const e=t.Y.multiply(t.Y).mod(this.curve.p);return t=t.X.multiply(t.X).multiply(t.X).add(t.X.multiply(this.curve.a)).add(this.curve.b).mod(this.curve.p),e.equals(t)}}},function(t,e,n){"use strict";const r=e;r.bignum=n(38),r.define=n(57).define,r.base=n(61),r.constants=n(62),r.decoders=n(42),r.encoders=n(39)},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){},function(t,e,n){"use strict";const r=n(39),i=n(42),o=n(17);function s(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={}}e.define=function(t,e){return new s(t,e)},s.prototype._createNamed=function(t){const e=this.name;function n(t){this._initNamed(t,e)}return o(n,t),n.prototype._initNamed=function(e,n){t.call(this,e,n)},new n(this)},s.prototype._getDecoder=function(t){return this.decoders.hasOwnProperty(t=t||"der")||(this.decoders[t]=this._createNamed(i[t])),this.decoders[t]},s.prototype.decode=function(t,e,n){return this._getDecoder(e).decode(t,n)},s.prototype._getEncoder=function(t){return this.encoders.hasOwnProperty(t=t||"der")||(this.encoders[t]=this._createNamed(r[t])),this.encoders[t]},s.prototype.encode=function(t,e,n){return this._getEncoder(e).encode(t,n)}},function(t,e){(t.exports=function(t,e){if(!t)throw new Error(e||"Assertion failed")}).equal=function(t,e,n){if(t!=e)throw new Error(n||"Assertion failed: "+t+" != "+e)}},function(t,e,n){"use strict";const r=n(17),i=n(40);function o(t){i.call(this,t),this.enc="pem"}r(o,i),(t.exports=o).prototype.encode=function(t,e){const n=i.prototype.encode.call(this,t).toString("base64"),r=["-----BEGIN "+e.label+"-----"];for(let t=0;t<n.length;t+=64)r.push(n.slice(t,t+64));return r.push("-----END "+e.label+"-----"),r.join("\n")}},function(t,e,n){"use strict";const r=n(17),i=n(28).Buffer,o=n(43);function s(t){o.call(this,t),this.enc="pem"}r(s,o),(t.exports=s).prototype.decode=function(t,e){const n=t.toString().split(/[\r\n]+/g);var r=e.label.toUpperCase(),s=/^-----(BEGIN|END) ([^-]+)-----$/;let a=-1,u=-1;for(let t=0;t<n.length;t++){var h=n[t].match(s);if(null!==h&&h[2]===r){if(-1!==a){if("END"!==h[1])break;u=t;break}if("BEGIN"!==h[1])break;a=t}}if(-1===a||-1===u)throw new Error("PEM section not found for: "+r);const c=n.slice(a+1,u).join("");return c.replace(/[^a-z0-9+/=]+/gi,""),t=i.from(c,"base64"),o.prototype.decode.call(this,t,e)}},function(t,e,n){"use strict";const r=e;r.Reporter=n(30).Reporter,r.DecoderBuffer=n(19).DecoderBuffer,r.EncoderBuffer=n(19).EncoderBuffer,r.Node=n(29)},function(t,e,n){"use strict";const r=e;r._reverse=function(t){const e={};return Object.keys(t).forEach((function(n){(0|n)==n&&(n|=0);var r=t[n];e[r]=n})),e},r.der=n(31)},function(t,e,n){"use strict";const r=n(64),i=n(44),o=n(24),s=Uint8Array.from([214,144,233,254,204,225,61,183,22,182,20,194,40,251,44,5,43,103,154,118,42,190,4,195,170,68,19,38,73,134,6,153,156,66,80,244,145,239,152,122,51,84,11,67,237,207,172,98,228,179,28,169,201,8,232,149,128,223,148,250,117,143,63,166,71,7,167,252,243,115,23,186,131,89,60,25,230,133,79,168,104,107,129,178,113,100,218,139,248,235,15,75,112,86,157,53,30,36,14,94,99,88,209,162,37,34,124,59,1,33,120,135,212,0,70,87,159,211,39,82,76,54,2,231,160,196,200,158,234,191,138,210,64,199,56,181,163,247,242,206,249,97,21,161,224,174,93,164,155,52,26,85,173,147,50,48,245,140,177,227,29,246,226,46,130,102,202,96,192,41,35,171,13,83,78,111,213,219,55,69,222,253,142,47,3,255,106,114,109,108,91,81,141,27,175,146,187,221,188,127,17,217,92,65,31,16,90,216,10,193,49,136,165,205,123,189,45,116,208,18,184,229,180,176,137,105,151,74,12,150,119,126,101,185,241,9,197,110,198,132,24,240,125,236,58,220,77,32,121,238,95,62,215,203,57,72]),a=Uint32Array.from([462357,472066609,943670861,1415275113,1886879365,2358483617,2830087869,3301692121,3773296373,4228057617,404694573,876298825,1347903077,1819507329,2291111581,2762715833,3234320085,3705924337,4177462797,337322537,808926789,1280531041,1752135293,2223739545,2695343797,3166948049,3638552301,4110090761,269950501,741554753,1213159005,1684763257]),u=Uint32Array.from([2746333894,1453994832,1736282519,2993693404]),h={base64:"byteArrayToBase64",hex:"byteArrayToHex",text:"utf8ByteArrayToString"},c={base64:"stringToByteArrayInUtf8",hex:"hexToByteArray",text:"base64ToByteArray"};t.exports=class{constructor(t){let e=t.key;if("string"==typeof e&&(e=o.stringToByteArrayInUtf8(e)),16!==e.length)throw new Error("key should be a 16 bytes string");this.key=e;let n=t.adata||"";"string"==typeof n&&(n=o.stringToByteArrayInUtf8(n)),this.adata=n;let r=new Uint8Array(0);if(void 0!==t.iv&&null!==t.iv&&(r=t.iv,"string"==typeof r&&(r=o.stringToByteArrayInUtf8(r)),16!==r.length))throw new Error("iv should be a 16 bytes string");this.iv=r,0<=[this.mode="cbc","ecb","gcm"].indexOf(t.mode)&&(this.mode=t.mode),0<=[this.paddingMode="PKCS7"].indexOf(t.padding)&&(this.paddingMode=t.padding),0<=["base64","text",this.cipherType="hex"].indexOf(t.cipherType)&&(this.cipherType=t.cipherType),this.encryptRoundKeys=new Uint32Array(32),this.spawnEncryptRoundKeys(),this.decryptRoundKeys=Uint32Array.from(this.encryptRoundKeys),this.decryptRoundKeys.reverse()}doBlockCrypt(t,e){e=e||this.encryptRoundKeys;const n=new Uint32Array(36);n.set(t,0);for(let t=0;t<32;t++)n[t+4]=n[t]^this.tTransform1(n[t+1]^n[t+2]^n[t+3]^e[t]);const r=new Uint32Array(4);return r[0]=n[35],r[1]=n[34],r[2]=n[33],r[3]=n[32],r}spawnEncryptRoundKeys(){const t=new Uint32Array(4);t[0]=this.key[0]<<24|this.key[1]<<16|this.key[2]<<8|this.key[3],t[1]=this.key[4]<<24|this.key[5]<<16|this.key[6]<<8|this.key[7],t[2]=this.key[8]<<24|this.key[9]<<16|this.key[10]<<8|this.key[11],t[3]=this.key[12]<<24|this.key[13]<<16|this.key[14]<<8|this.key[15];const e=new Uint32Array(36);e[0]=t[0]^u[0],e[1]=t[1]^u[1],e[2]=t[2]^u[2],e[3]=t[3]^u[3];for(let t=0;t<32;t++)e[t+4]=e[t]^this.tTransform2(e[t+1]^e[t+2]^e[t+3]^a[t]),this.encryptRoundKeys[t]=e[t+4]}rotateLeft(t,e){return t<<e|t>>>32-e}linearTransform1(t){return t^this.rotateLeft(t,2)^this.rotateLeft(t,10)^this.rotateLeft(t,18)^this.rotateLeft(t,24)}linearTransform2(t){return t^this.rotateLeft(t,13)^this.rotateLeft(t,23)}tauTransform(t){return s[t>>>24&255]<<24|s[t>>>16&255]<<16|s[t>>>8&255]<<8|s[255&t]}tTransform1(t){return t=this.tauTransform(t),this.linearTransform1(t)}tTransform2(t){return t=this.tauTransform(t),this.linearTransform2(t)}padding(t){if(null===t)return null;var e=16-t.length%16;const n=new Uint8Array(t.length+e);return n.set(t,0),n.fill(e,t.length),n}dePadding(t){if(null===t)return null;var e=t[t.length-1];return t.slice(0,t.length-e)}uint8ToUint32Block(t,e=0){const n=new Uint32Array(4);return n[0]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],n[1]=t[e+4]<<24|t[e+5]<<16|t[e+6]<<8|t[e+7],n[2]=t[e+8]<<24|t[e+9]<<16|t[e+10]<<8|t[e+11],n[3]=t[e+12]<<24|t[e+13]<<16|t[e+14]<<8|t[e+15],n}encrypt(t){"string"==typeof t&&(t=o.stringToByteArrayInUtf8(t));var e=this.padding(t),n=e.length/16;const s=new Uint8Array(e.length);let a,u;if("cbc"===this.mode){if(null===this.iv||16!==this.iv.length)throw new Error("iv error");let t=this.uint8ToUint32Block(this.iv);for(let r=0;r<n;r++){var c=16*r,l=this.uint8ToUint32Block(e,c);t[0]=t[0]^l[0],t[1]=t[1]^l[1],t[2]=t[2]^l[2],t[3]=t[3]^l[3];var f=this.doBlockCrypt(t,this.encryptRoundKeys);t=f;for(let t=0;t<16;t++)s[c+t]=f[parseInt(t/4,10)]>>(3-t)%4*8&255}}else if("gcm"===this.mode)t=r.encrypt(this,i.bytesToBits(t),i.bytesToBits(this.iv),i.bytesToBits(this.adata),128),a=new Uint8Array(i.bytesFromBits(t.data)),u=new Uint8Array(i.bytesFromBits(t.tag));else for(let t=0;t<n;t++){var d=16*t,p=this.uint8ToUint32Block(e,d),g=this.doBlockCrypt(p,this.encryptRoundKeys);for(let t=0;t<16;t++)s[d+t]=g[parseInt(t/4,10)]>>(3-t)%4*8&255}return"gcm"===this.mode?{cipherText:o[h[this.cipherType||"base64"]](a),tag:o[h[this.cipherType||"base64"]](u)}:o[h[this.cipherType||"base64"]](s)}decrypt(t,e=""){var n=o[c[this.cipherType||"base64"]](t),s=(e=o[c[this.cipherType||"base64"]](e),n.length/16);let a=new Uint8Array(n.length);if("cbc"===this.mode){if(null===this.iv||16!==this.iv.length)throw new Error("iv error");let t=this.uint8ToUint32Block(this.iv);for(let e=0;e<s;e++){var u=16*e,h=this.uint8ToUint32Block(n,u),l=this.doBlockCrypt(h,this.decryptRoundKeys);const r=new Uint32Array(4);r[0]=t[0]^l[0],r[1]=t[1]^l[1],r[2]=t[2]^l[2],r[3]=t[3]^l[3],t=h;for(let t=0;t<16;t++)a[u+t]=r[parseInt(t/4,10)]>>(3-t)%4*8&255}}else if("gcm"===this.mode){var f=r.decrypt(this,i.bytesToBits([...n,...e]),i.bytesToBits(this.iv),i.bytesToBits(this.adata),128);a=new Uint8Array(i.bytesFromBits(f))}else for(let t=0;t<s;t++){var d=16*t,p=this.uint8ToUint32Block(n,d),g=this.doBlockCrypt(p,this.decryptRoundKeys);for(let t=0;t<16;t++)a[d+t]=g[parseInt(t/4,10)]>>(3-t)%4*8&255}return f=this.dePadding(a),f="gcm"===this.mode?a:f,o.utf8ByteArrayToString(f)}}},function(t,e,n){const r=n(44);t.exports={name:"gcm",encrypt(t,e,n,r,i){return e=e.slice(0),this._ctrMode(!0,t,e,r=r||[],n,i=i||128)},decrypt(t,e,n,i,o){let s,a=e.slice(0);const u=r;if(i=i||[],a=(o=o||128)<=(e=u.bitLength(a))?(s=u.bitSlice(a,e-o),u.bitSlice(a,0,e-o)):(s=a,[]),o=this._ctrMode(!1,t,a,i,n,o),!u.equal(o.tag,s))throw new Error("gcm: tag doesn't match");return o.data},_galoisMultiply(t,e){let n,i;var o;let s,a;const u=r._xor4;for(s=[0,0,0,0],a=e.slice(0),n=0;n<128;n++){for(0!=(t[Math.floor(n/32)]&1<<31-n%32)&&(s=u(s,a)),o=0!=(1&a[3]),i=3;0<i;i--)a[i]=a[i]>>>1|(1&a[i-1])<<31;a[0]=a[0]>>>1,o&&(a[0]=a[0]^225<<24)}return s},_ghash(t,e,n){let r,i;var o=n.length;for(r=e.slice(0),i=0;i<o;i+=4)r[0]^=4294967295&n[i],r[1]^=4294967295&n[i+1],r[2]^=4294967295&n[i+2],r[3]^=4294967295&n[i+3],r=this._galoisMultiply(r,t);return r},_ctrMode(t,e,n,i,o,s){var a,u,h,c,l;let f,d,p,g,m,y;const v=r;for(u=n.length,h=v.bitLength(n),c=v.bitLength(i),l=v.bitLength(o),a=e.doBlockCrypt(new Uint32Array([0,0,0,0])),f=96===l?(f=o.slice(0),v.concat(f,[1])):(f=this._ghash(a,[0,0,0,0],o),this._ghash(a,f,[0,0,Math.floor(l/4294967296),4294967295&l])),d=this._ghash(a,[0,0,0,0],i),m=f.slice(0),y=d.slice(0),t||(y=this._ghash(a,d,n)),g=0;g<u;g+=4)m[3]++,p=e.doBlockCrypt(new Uint32Array(m)),n[g]^=p[0],n[g+1]^=p[1],n[g+2]^=p[2],n[g+3]^=p[3];return n=v.clamp(n,h),t&&(y=this._ghash(a,d,n)),h=[Math.floor(c/4294967296),4294967295&c,Math.floor(h/4294967296),4294967295&h],y=this._ghash(a,y,h),p=e.doBlockCrypt(new Uint32Array(f)),y[0]^=p[0],y[1]^=p[1],y[2]^=p[2],y[3]^=p[3],{tag:v.bitSlice(y,0,s),data:n}}}},function(t,e){var n,r;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&r.rotl(t,8)|4278255360&r.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=r.endian(t[e]);return t},randomBytes:function(t){for(var e=[];0<t;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var e=[],r=0;r<t.length;r+=3)for(var i=t[r]<<16|t[r+1]<<8|t[r+2],o=0;o<4;o++)8*r+6*o<=8*t.length?e.push(n.charAt(i>>>6*(3-o)&63)):e.push("=");return e.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],r=0,i=0;r<t.length;i=++r%4)0!=i&&e.push((n.indexOf(t.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|n.indexOf(t.charAt(r))>>>6-2*i);return e}},t.exports=r},function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(n(t)||"function"==typeof(e=t).readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))||!!t._isBuffer);var e}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e,n){var r=n(7);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}},function(t,e,n){t=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(n){u=function(t,e,n){return t[e]=n}}function h(t,n,r,i){var o,s,a,u;n=n&&n.prototype instanceof m?n:m,n=Object.create(n.prototype),i=new S(i||[]);return n._invoke=(o=t,s=r,a=i,u=l,function(t,n){if(u===d)throw new Error("Generator is already running");if(u===p){if("throw"===t)throw n;return A()}for(a.method=t,a.arg=n;;){var r=a.delegate;if(r){var i=function t(n,r){var i;if((i=n.iterator[r.method])===e){if(r.delegate=null,"throw"===r.method){if(n.iterator.return&&(r.method="return",r.arg=e,t(n,r),"throw"===r.method))return g;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}return"throw"===(i=c(i,n.iterator,r.arg)).type?(r.method="throw",r.arg=i.arg,r.delegate=null,g):(i=i.arg)?i.done?(r[n.resultName]=i.value,r.next=n.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}(r,a);if(i){if(i===g)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(u===l)throw u=p,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(u=d,"normal"===(i=c(o,s,a)).type){if(u=a.done?p:f,i.arg!==g)return{value:i.arg,done:a.done}}else"throw"===i.type&&(u=p,a.method="throw",a.arg=i.arg)}}),n}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=h;var l="suspendedStart",f="suspendedYield",d="executing",p="completed",g={};function m(){}function y(){}function v(){}var b={};u(b,o,(function(){return this})),(i=(i=Object.getPrototypeOf)&&i(i(O([]))))&&i!==n&&r.call(i,o)&&(b=i);var _=v.prototype=m.prototype=Object.create(b);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){var n;this._invoke=function(i,o){function s(){return new e((function(n,s){!function n(i,o,s,a){if("throw"!==(i=c(t[i],t,o)).type){var u=i.arg;return(o=u.value)&&"object"==typeof o&&r.call(o,"__await")?e.resolve(o.__await).then((function(t){n("next",t,s,a)}),(function(t){n("throw",t,s,a)})):e.resolve(o).then((function(t){u.value=t,s(u)}),(function(t){return n("throw",t,s,a)}))}a(i.arg)}(i,o,n,s)}))}return n=n?n.then(s,s):s()}}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function O(t){if(t){if(n=t[o])return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n,i=-1;return(n=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n}).next=n}}return{next:A}}function A(){return{value:e,done:!0}}return u(_,"constructor",y.prototype=v),u(v,"constructor",y),y.displayName=u(v,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},w(E.prototype),u(E.prototype,s,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var s=new E(h(e,n,r,i),o);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},w(_),u(_,a,"Generator"),u(_,o,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,n=[];for(e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;0<=o;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var u=r.call(s,"catchLoc"),h=r.call(s,"finallyLoc");if(u&&h){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}var s=(o=o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc?null:o)?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),M(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r,i=n.completion;return"throw"===i.type&&(r=i.arg,M(n)),r}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}(t.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},function(t,e){!function(){"use strict";var t,e,n,r;function i(t){try{return t.defaultView&&t.defaultView.frameElement||null}catch(t){return null}}function o(t){this.time=t.time,this.target=t.target,this.rootBounds=c(t.rootBounds),this.boundingClientRect=c(t.boundingClientRect),this.intersectionRect=c(t.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0}),this.isIntersecting=!!t.intersectionRect;t=(e=this.boundingClientRect).width*e.height;var e=(e=this.intersectionRect).width*e.height;this.intersectionRatio=t?Number((e/t).toFixed(4)):this.isIntersecting?1:0}function s(t,e){var n,r,i;e=e||{};if("function"!=typeof t)throw new Error("callback must be a function");if(e.root&&1!=e.root.nodeType&&9!=e.root.nodeType)throw new Error("root must be a Document or Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),r=this.THROTTLE_TIMEOUT,i=null,function(){i=i||setTimeout((function(){n(),i=null}),r)}),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(e.rootMargin),this.thresholds=this._initThresholds(e.threshold),this.root=e.root||null,this.rootMargin=this._rootMarginValues.map((function(t){return t.value+t.unit})).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function a(t,e,n,r){"function"==typeof t.addEventListener?t.addEventListener(e,n,r||!1):"function"==typeof t.attachEvent&&t.attachEvent("on"+e,n)}function u(t,e,n,r){"function"==typeof t.removeEventListener?t.removeEventListener(e,n,r||!1):"function"==typeof t.detatchEvent&&t.detatchEvent("on"+e,n)}function h(t){var e;try{e=t.getBoundingClientRect()}catch(t){}return e?e.width&&e.height?e:{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}:{top:0,bottom:0,left:0,right:0,width:0,height:0}}function c(t){return!t||"x"in t?t:{top:t.top,y:t.top,bottom:t.bottom,left:t.left,x:t.left,right:t.right,width:t.width,height:t.height}}function l(t,e){var n=e.top-t.top;return{top:n,left:t=e.left-t.left,height:e.height,width:e.width,bottom:n+e.height,right:t+e.width}}function f(t,e){for(var n=e;n;){if(n==t)return!0;n=d(n)}return!1}function d(e){var n=e.parentNode;return 9==e.nodeType&&e!=t?i(e):(n=n&&n.assignedSlot?n.assignedSlot.parentNode:n)&&11==n.nodeType&&n.host?n.host:n}function p(t){return t&&9===t.nodeType}"object"==typeof window&&("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype?"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return 0<this.intersectionRatio}}):(t=function(){for(var t=window.document,e=i(t);e;)e=i(t=e.ownerDocument);return t}(),e=[],r=n=null,s.prototype.THROTTLE_TIMEOUT=100,s.prototype.POLL_INTERVAL=null,s.prototype.USE_MUTATION_OBSERVER=!0,s._setupCrossOriginUpdater=function(){return n=n||function(t,n){r=t&&n?l(t,n):{top:0,bottom:0,left:0,right:0,width:0,height:0},e.forEach((function(t){t._checkForIntersections()}))}},s._resetCrossOriginUpdater=function(){r=n=null},s.prototype.observe=function(t){if(!this._observationTargets.some((function(e){return e.element==t}))){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(t.ownerDocument),this._checkForIntersections()}},s.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter((function(e){return e.element!=t})),this._unmonitorIntersections(t.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},s.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},s.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},s.prototype._initThresholds=function(t){return t=t||[0],(t=Array.isArray(t)?t:[t]).sort().filter((function(t,e,n){if("number"!=typeof t||isNaN(t)||t<0||1<t)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==n[e-1]}))},s.prototype._parseRootMargin=function(t){return(t=(t||"0px").split(/\s+/).map((function(t){if(!(t=/^(-?\d*\.?\d+)(px|%)$/.exec(t)))throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}})))[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},s.prototype._monitorIntersections=function(e){var n,r,o,s=e.defaultView;s&&-1==this._monitoringDocuments.indexOf(e)&&(n=this._checkForIntersections,o=r=null,this.POLL_INTERVAL?r=s.setInterval(n,this.POLL_INTERVAL):(a(s,"resize",n,!0),a(e,"scroll",n,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in s&&(o=new s.MutationObserver(n)).observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(e),this._monitoringUnsubscribes.push((function(){var t=e.defaultView;t&&(r&&t.clearInterval(r),u(t,"resize",n,!0)),u(e,"scroll",n,!0),o&&o.disconnect()})),s=this.root&&(this.root.ownerDocument||this.root)||t,e==s||(s=i(e))&&this._monitorIntersections(s.ownerDocument))},s.prototype._unmonitorIntersections=function(e){var n,r,o=this._monitoringDocuments.indexOf(e);-1!=o&&(n=this.root&&(this.root.ownerDocument||this.root)||t,this._observationTargets.some((function(t){if((r=t.element.ownerDocument)==e)return!0;for(;r&&r!=n;){var r,o=i(r);if((r=o&&o.ownerDocument)==e)return!0}return!1}))||(r=this._monitoringUnsubscribes[o],this._monitoringDocuments.splice(o,1),this._monitoringUnsubscribes.splice(o,1),r(),e==n||(r=i(e))&&this._unmonitorIntersections(r.ownerDocument)))},s.prototype._unmonitorAllIntersections=function(){var t=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0;for(var e=this._monitoringUnsubscribes.length=0;e<t.length;e++)t[e]()},s.prototype._checkForIntersections=function(){var t,e;!this.root&&n&&!r||(t=this._rootIsInDom(),e=t?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0},this._observationTargets.forEach((function(r){var i=r.element,s=h(i),a=this._rootContainsTarget(i),u=r.entry,c=t&&a&&this._computeTargetAndRootIntersection(i,s,e),l=null;this._rootContainsTarget(i)?n&&!this.root||(l=e):l={top:0,bottom:0,left:0,right:0,width:0,height:0},c=r.entry=new o({time:window.performance&&performance.now&&performance.now(),target:i,boundingClientRect:s,rootBounds:l,intersectionRect:c}),u?t&&a?this._hasCrossedThreshold(u,c)&&this._queuedEntries.push(c):u&&u.isIntersecting&&this._queuedEntries.push(c):this._queuedEntries.push(c)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this))},s.prototype._computeTargetAndRootIntersection=function(e,i,o){if("none"!=window.getComputedStyle(e).display){for(var s=i,a=d(e),u=!1;!u&&a;){var c,f,p,g,m=null,y=1==a.nodeType?window.getComputedStyle(a):{};if("none"==y.display)return null;if(a==this.root||9==a.nodeType?(u=!0,a==this.root||a==t?n&&!this.root?!r||0==r.width&&0==r.height?s=m=a=null:m=r:m=o:(f=(c=d(a))&&h(c),p=c&&this._computeTargetAndRootIntersection(c,f,o),f&&p?(a=c,m=l(f,p)):s=a=null)):a!=(g=a.ownerDocument).body&&a!=g.documentElement&&"visible"!=y.overflow&&(m=h(a)),m&&(c=m,f=s,m=y=g=p=void 0,p=Math.max(c.top,f.top),g=Math.min(c.bottom,f.bottom),y=Math.max(c.left,f.left),m=Math.min(c.right,f.right),f=g-p,s=0<=(c=m-y)&&0<=f?{top:p,bottom:g,left:y,right:m,width:c,height:f}:null),!s)break;a=a&&d(a)}return s}},s.prototype._getRootRect=function(){var e,n;return n=this.root&&!p(this.root)?h(this.root):(e=(n=p(this.root)?this.root:t).documentElement,n=n.body,{top:0,left:0,right:e.clientWidth||n.clientWidth,width:e.clientWidth||n.clientWidth,bottom:e.clientHeight||n.clientHeight,height:e.clientHeight||n.clientHeight}),this._expandRectByRootMargin(n)},s.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map((function(e,n){return"px"==e.unit?e.value:e.value*(n%2?t.width:t.height)/100}));return(e={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]}).width=e.right-e.left,e.height=e.bottom-e.top,e},s.prototype._hasCrossedThreshold=function(t,e){var n=t&&t.isIntersecting?t.intersectionRatio||0:-1,r=e.isIntersecting?e.intersectionRatio||0:-1;if(n!==r)for(var i=0;i<this.thresholds.length;i++){var o=this.thresholds[i];if(o==n||o==r||o<n!=o<r)return!0}},s.prototype._rootIsInDom=function(){return!this.root||f(t,this.root)},s.prototype._rootContainsTarget=function(e){var n=this.root&&(this.root.ownerDocument||this.root)||t;return f(n,e)&&(!this.root||n==e.ownerDocument)},s.prototype._registerInstance=function(){e.indexOf(this)<0&&e.push(this)},s.prototype._unregisterInstance=function(){var t=e.indexOf(this);-1!=t&&e.splice(t,1)},window.IntersectionObserver=s,window.IntersectionObserverEntry=o))}()},function(t,e,n){"use strict";n.r(e),n.d(e,"resetConfig",(function(){return Z})),n.d(e,"qapmWebSdkStart",(function(){return $})),n.d(e,"setFMPEnd",(function(){return tt})),n.d(e,"qapmCustomTrack",(function(){return et})),n.d(e,"qapmAddExposeListener",(function(){return nt})),n.d(e,"qapmRemoveExposeListener",(function(){return rt})),n.d(e,"qapmSetField",(function(){return it}));var r=n(1),i=n(0),o=n(18),s=n.n(o),a=(e=n(9),n.n(e)),u=(o=n(10),n.n(o)),h=(e=n(7),n.n(e)),c=(o=n(4),n.n(o)),l=(e=n(5),n.n(e)),f={EVENT_BASE:1,EVENT_APP:2,EVENT_UI_ACTION:3,EVENT_PAGE_CHANGE:4,EVENT_TAG:5,EVENT_TRACE:6,EVENT_CAL:7};Object.freeze(f),Object.freeze({RESERVED:1,QAPM:2,QAPM_SIGKILL:4,QAPM_LAG:8}),Object.freeze({APP_ID:"app_id",USER_ID:"user_id",VERSION:"version",BUILD_ID:"build_id",BUCKETS:"buckets",ENABLE_UPLOAD_ATHENA:"enable_upload_athena"}),Object.freeze({CLICK:1,LONG_PRESS:2,SCROLL:3,KEY:4,SCREEN_ROTATION:5,ZOOM:6,INPUT:7,OTHERS:100});var d=n(12),p=n(2),g=n(11);function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h()(t);return r=e?(n=h()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),u()(this,r)}}var y=function(t){a()(n,t);var e=m(n);function n(){var t;return c()(this,n),(t=e.call(this)).topic=f.EVENT_PAGE_CHANGE,t.pre_page_id="",t.pre_page="",t.page_id="",t.page="",t.pre_page_start=0,t.pre_page_end=0,t.page_start=0,t}return l()(n,[{key:"check",value:function(){return s()(h()(n.prototype),"check",this).call(this)&&!(Object(i.q)(this.pre_page_id)||Object(i.q)(this.pre_page)||Object(i.q)(this.page_id)||Object(i.q)(this.page)||Object(i.q)(this.pre_page_start)||Object(i.q)(this.pre_page_end)||Object(i.q)(this.pre_page_start))}}]),n}(o=function(t){a()(n,t);var e=m(n);function n(){var t;return c()(this,n),(t=e.call(this)).topic=f.EVENT_APP,t}return n}(function(){function t(){var e;c()(this,t),this.id=Object(i.v)(),this.time=(new Date).toISOString(),this.topic=f.EVENT_BASE,this.extra="",this.tags={},Object(i.s)()?(e=g.a.readItem("qapm_session_id"),this.tags.session_id=e):(window.QAPM.session_id||(window.QAPM.session_id=Object(i.d)()),this.tags.refer=document.referrer,this.tags.session_id=window.QAPM.session_id),this.values={}}return l()(t,[{key:"setTime",value:function(t){this.time=new Date(t).toISOString()}},{key:"jsonstr",get:function(){return JSON.stringify(this)}},{key:"check",value:function(){return""===this.state&&(this.state=Object(d.a)(p.b.GET_PAGE_ID)),!(Object(i.q)(this.id)||Object(i.q)(this.time)||Object(i.q)(this.topic))}}]),t}())),v=function(t){a()(n,t);var e=m(n);function n(){var t;return c()(this,n),(t=e.call(this)).topic=f.EVENT_UI_ACTION,t.op=-1,t.data={},t.view_pos="",t.view_type="",t.view_tag="",t.view_text="",t.view_desc="",t.view_super="",t.page="",t.page_id="",t}return l()(n,[{key:"check",value:function(){return s()(h()(n.prototype),"check",this).call(this)&&!(Object(i.q)(this.page)||Object(i.q)(this.page_id)||Object(i.q)(this.op)||Object(i.q)(this.view_tag))}}]),n}(o),b=function(t){a()(n,t);var e=m(n);function n(t){var r;return c()(this,n),(r=e.call(this)).topic=f.EVENT_CAL,r.category="",r.state="",r.action="",r.label="",r.value=1,r.extra=t,r}return l()(n,[{key:"check",value:function(){return s()(h()(n.prototype),"check",this).call(this)&&!Object(i.q)(this.category)}}]),n}(o),_=n(3),w=(e=n(8),n.n(e)),E=(o=n(14),n(6));e=function(t){a()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h()(t);return r=e?(n=h()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),u()(this,r)}}(n);function n(t,i){return c()(this,n),r.a.info("PageTracker",t,i),t.plugin=247,(t=e.call(this,t)).name=p.e.PAGE_TRACKER,t.updateData.singleData.data.page_threshold=i.pageThreshold||E.c.data.page_threshold,t}return l()(n,null,[{key:"ps",get:function(){var t=Object(d.a)(p.b.STORE_GET,"pageTracker.ps");return(t=t&&JSON.parse(t))||{lastPageUrl:null,lastPageId:null,lastPageStart:null,lastPageEnd:null,currentPageUrl:p.c,currentPageId:p.c,currentPageStart:Object(i.u)(),currentPageEnd:null}},set:function(t){try{Object(d.a)(p.b.STORE_PUT,"pageTracker.ps",JSON.stringify(t))}catch(t){r.a.error(t)}}}]),n}(o.a);var T=[],M=function(){function t(e,n){var r=this;c()(this,t),this.context=e,this.methodName=n,this.isTask=/Task$/.test(n),this.originalMethodReference=this.isTask?e.get(n):e[n],this.methodChain=[],this.boundMethodChain=[],this.wrappedMethod=function(){return r.boundMethodChain[r.boundMethodChain.length-1].apply(void 0,arguments)},this.isTask?e.set(n,this.wrappedMethod):e[n]=this.wrappedMethod}return l()(t,[{key:"add",value:function(t){this.methodChain.push(t),this.rebindMethodChain()}},{key:"remove",value:function(t){-1<(t=this.methodChain.indexOf(t))&&(this.methodChain.splice(t,1),0<this.methodChain.length?this.rebindMethodChain():this.destroy())}},{key:"rebindMethodChain",value:function(){this.boundMethodChain=[];for(var t=0;t<this.methodChain.length;t++){var e=this.methodChain[t],n=this.boundMethodChain[t-1]||this.originalMethodReference.bind(this.context);this.boundMethodChain.push(e(n))}}},{key:"destroy",value:function(){var t=T.indexOf(this);-1<t&&(T.splice(t,1),this.isTask?this.context.set(this.methodName,this.originalMethodReference):this.context[this.methodName]=this.originalMethodReference)}}],[{key:"add",value:function(t,e,n){(function(t,e){var n=S(t,e);return n||(n=new M(t,e),T.push(n)),n})(t,e).add(n)}},{key:"remove",value:function(t,e,n){(e=S(t,e))&&e.remove(n)}}]),t}();function S(t,e){return T.filter((function(n){return n.context===t&&n.methodName===e}))[0]}function O(t){if(""!==t.id&&t.id)return'id("'.concat(t.id,'")');if(t===document.body)return t.tagName;if(t===document)return"document";var e=0;if(t.parentNode)for(var n=t.parentNode.childNodes,r=0;r<n.length;r++){var i=n[r];if(i===t)return"".concat(O(t.parentNode),"/").concat(t.tagName,"[").concat(e+1,"]");1===i.nodeType&&i.tagName===t.tagName&&e++}}function A(t){return I(t).replace(/^\s+|\s+$/g,"").slice(0,24)}function k(t,e,n){function r(t){var e=document.documentElement;e&&n.call(e,t,t.target)}var i=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];return t.addEventListener(e,r,i),1}var R=function(){function t(){c()(this,t),this.hidden=null,this.visibilityChange=null,void 0!==document.hidden?(this.hidden="hidden",this.visibilityChange="visibilitychange"):void 0!==document.msHidden?(this.hidden="msHidden",this.visibilityChange="msvisibilitychange"):void 0!==document.webkitHidden&&(this.hidden="webkitHidden",this.visibilityChange="webkitvisibilitychange")}return l()(t,[{key:"isBackground",value:function(){return!0===document[this.hidden]}},{key:"isVisible",value:function(){return"visible"===document.visibilityState}},{key:"addEventListener",value:function(t,e){document.addEventListener(this.visibilityChange,t,e)}}]),t}(),I=function(t){var e="",n=t.nodeType;if(1===n||9===n||11===n){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)e+=getText(t)}else if(3===n||4===n)return t.nodeValue;return e};var P=function(t){a()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h()(t);return r=e?(n=h()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),u()(this,r)}}(n);function n(t,o){return c()(this,n),(t=e.call(this,t)).uiTrackerOption=Object(i.a)({eventTypes:["click","scroll"],scrollThreshold:10},o),r.a.info(t.uiTrackerOption),t.name=p.e.UI_ACTION_TRACKER,t.uploadPeriod=p.g.UPLOAD,t.athenaEvents=[],t.requestStateEvent=void 0,t.resourceStateEvent=void 0,t.canUpload=!0,t.instance=null,t.sendEvent=t.sendEvent.bind(w()(t)),t.start=t.start.bind(w()(t)),t.start(),t}return l()(n,[{key:"meta",get:function(){return this.athenaMetaJson}},{key:"onBindTrigger",value:function(t,e,n,o){var s=new v;try{_.a.getInstance().upload({resource:"ALL",stage:"web/wx.sdk.athena.click.init",state:"ok",eventId:s.id}),s.op=t,s.page_id=Object(i.o)(),s.page=Object(i.n)(),s.view_tag=(e||"").slice(0,31),s.view_text=(n||"").slice(0,31),s.data={},t===p.h.CLICK||t===p.h.LONG_PRESS?(s.data.p0="".concat(parseInt(o.clientX)||-1,",").concat(parseInt(o.clientY)||-1),s.data.p1="".concat(parseInt(o.absX)||-1,",").concat(parseInt(o.absY)||-1)):t===p.h.SCROLL?(s.data.p0=o.startPoint,s.data.p1=o.endPoint,s.data.p2=o.startAbsPoint,s.data.p3=o.endAbsPoint):r.a.log("UiActionTracker.onBindTrigger, not handled action type:",t),this.sendEvent(s)}catch(t){_.a.getInstance().upload({resource:"ALL",stage:"web/wx.sdk.athena.click.init",state:"fail",eventId:s.id,annotate:JSON.stringify(t)}),r.a.error(t)}}},{key:"start",value:function(){try{this.timer&&this.stop(),r.a.debug("UserBehaviorConnect, begin event loop."),this.timer=setInterval((function(){r.a.debug("UserBehaviorConnect, looping..."),n.getInstance()&&n.getInstance().uploadAthenaEvent()}),this.uploadPeriod)}catch(t){r.a.error(t)}}},{key:"stop",value:function(){this.timer&&clearInterval(this.timer)}},{key:"sendEvent",value:function(t,e){try{_.a.getInstance().upload({resource:"ALL",stage:"web/wx.sdk.athena.send",state:"ok",eventId:t.id,annotate:""});var n=!1;return(n=e&&e.hasOwnProperty("immediately")?e.immediately:n)?this.uploadAthenaEvent({events:[t]}):this.offerEvent(t),t.id}catch(e){r.a.error(e),_.a.getInstance().upload({resource:"ALL",stage:"web/wx.sdk.athena.send",state:"fail",eventId:t.id,annotate:JSON.stringify(e)})}}},{key:"customTrack",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:{};try{if(!t)throw Error("category MUST set");var a=new b;return a.category=t,a.action=e,a.label=n,a.value=i,a.tags=Object.assign({},a.tags,o),a.values=Object.assign({},a.values,s),this.sendEvent(a),a.id}catch(a){r.a.error(a)}}},{key:"sendTerminally",value:function(t){try{var e=this.athenaUrl,n=this.meta;if(Object(i.q)(n.appId)||Object(i.q)(n.version)||Object(i.q)(n.deviceId)||Object(i.q)(n.display))return;var o={meta:n,events:[t]},s=new Blob([JSON.stringify(o)],{type:"text/plain"});navigator.sendBeacon(e,s)}catch(t){r.a.error(t)}}},{key:"offerEvent",value:function(t){var e=JSON.parse(JSON.stringify(t));delete e.values.http_info,_.a.getInstance().upload({resource:"ALL",stage:"web/wx.sdk.athena.save",state:"ok",eventId:t.id,annotate:""}),this.athenaEvents.push(e)}},{key:"uploadCountEvent",value:function(){var t=[this.requestStateEvent,this.resourceStateEvent];this.uploadAthenaEvent({events:t}),this.requestStateEvent=void 0,this.resourceStateEvent=void 0}},{key:"uploadAthenaEvent",value:function(){var t=void 0===(t=(e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{events:[],async:!0}).events)?[]:t,e=void 0===(e=e.async)||e;try{if(_.a.getInstance().upload({resource:"ALL",stage:"web/wx.sdk.athena.upload",state:"ok",eventId:"",annotate:""}),0===Object.keys(t).length&&(t=this.athenaEvents,this.athenaEvents=[]),0===t.length)return;var i={meta:this.meta,events:t};s()(h()(n.prototype),"uploadEvent",this).call(this,i,this.athenaUrl,e)}catch(e){r.a.info("uploadAthenaEvent",e),_.a.getInstance().upload({resource:"ALL",stage:"web/wx.sdk.athena.upload",state:"ok",eventId:"",annotate:JSON.stringify(e)})}}}],[{key:"setInstance",value:function(t){this.instance=t}},{key:"getInstance",value:function(){return this.instance}}]),n}(o.a);function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function B(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h()(t);return r=e?(n=h()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),u()(this,r)}}var C=function(t){a()(n,t);var e=B(n);function n(t,r){return c()(this,n),(r=e.call(this,t,r)).name=p.e.Web_PAGE_TRACKER,r.pageVisibility=new R,r.opts={scrollThreshold:10},r.refs={},r.state={isFirstPageInit:!1,isFirstPageReady:!1,scrollPercentageLast:0},r.actionMapping={click:p.h.CLICK,longpress:p.h.LONG_PRESS},r.urlTransformer=null,r.pageRecords={},r.handleUrlChange=r.handleUrlChange.bind(w()(r)),r.pushStateOverride=r.pushStateOverride.bind(w()(r)),r.replaceStateOverride=r.replaceStateOverride.bind(w()(r)),r.handlePopState=r.handlePopState.bind(w()(r)),r.handleVisibilityChange=r.handleVisibilityChange.bind(w()(r)),r.handleScrollEvent=Object(i.g)(r.handleScrollEvent.bind(w()(r)),500),r.domChange=r.domChange.bind(w()(r)),r.uploadSingleData=r.uploadSingleData.bind(w()(r)),r.pageVisibility.addEventListener(r.handleVisibilityChange,!1),M.add(history,"pushState",r.pushStateOverride),M.add(history,"replaceState",r.replaceStateOverride),window.addEventListener("popstate",r.handlePopState),window.addEventListener("pushState",r.handlePushState),r.listenForScrollChanges(),r.listenForClickEvent(),r.listenOnBeforeUnload(),r}return l()(n,[{key:"listenOnBeforeUnload",value:function(){var t=this;window.addEventListener("beforeunload",(function(){try{t.onPageControllerShowPage(p.c,p.c);var e=Object.assign({},{data:t.updateData.singleData.data},t.metaJson);t.uploadEvent(e,t.qapmUrl,!1),P.getInstance&&P.getInstance().uploadAthenaEvent({async:!1})}catch(e){r.a.info("window beforeunload",e)}}),!1),window.addEventListener("load",(function(){try{setTimeout((function(){t.onPageControllerShowPage(Object(i.o)(),Object(i.n)());var e=g.a.readItem("QAPM_beforeunload_data");e&&(e=JSON.parse(e),Object(i.y)(e.requestConfig),g.a.removeItem("QAPM_beforeunload_data"))}),3e3)}catch(t){r.a.info("window load",t)}}))}},{key:"pushStateOverride",value:function(t){var e=this;return this.onPageControllerHidePage(Object(i.n)()),function(){t.apply(void 0,arguments),e.handleUrlChange()}}},{key:"replaceStateOverride",value:function(t){var e=this;return this.onPageControllerHidePage(Object(i.n)()),function(){t.apply(void 0,arguments),e.handleUrlChange()}}},{key:"handlePopState",value:function(){this.handleUrlChange()}},{key:"handlePushState",value:function(){this.handleUrlChange()}},{key:"handleVisibilityChange",value:function(){this.pageVisibility.isBackground()?this.onPageHide():this.handleUrlChange()}},{key:"handleUrlChange",value:function(){this.state.scrollPercentageLast=0,this.onPageShow(),this.onPageReady()}},{key:"listenForScrollChanges",value:function(){(this.state.scrollPercentageLast||0)<100&&window.addEventListener("scroll",this.handleScrollEvent)}},{key:"handleScrollEvent",value:function(){var t=Object(i.m)(),e=window.pageYOffset,n=window.innerHeight;e=Math.min(100,Math.max(0,Math.round(e/(t-n)*100))),t=this.state.scrollPercentageLast,n=Math.abs(e-t);(100===e||0===e||n>=this.opts.scrollThreshold)&&(this.state.scrollPercentageLast=e,P.getInstance()&&P.getInstance().onBindTrigger(p.h.SCROLL,O(document),"scrollbar",{startPoint:"0,".concat(t),endPoint:"0,".concat(e),startAbsPoint:"0,".concat(t),endAbsPoint:"0,".concat(e)}))}},{key:"listenForClickEvent",value:function(){var t,e=this;for(t in this.actionMapping)k(document,t,(function(t,n){var r,i=e.actionMapping[t.type];i&&(r=O(n),t=A(n),n=n.getBoundingClientRect(),P.getInstance()&&P.getInstance().onBindTrigger(i,r,t,{absX:n.left+window.scrollX,absY:n.top+window.scrollY,clientX:n.left,clientY:n.top}))}),!0)}},{key:"onPageControllerHidePage",value:function(t){try{t===n.ps.currentPageId&&(n.ps.currentPageEnd=Object(i.u)())}catch(t){r.a.error(t)}}},{key:"onPageControllerShowPage",value:function(t,e){try{var o,s,a=n.ps;t!==a.currentPageId&&(o=Object(i.u)(),a.lastPageUrl=a.currentPageUrl,a.lastPageId=a.currentPageId,a.lastPageStart=a.currentPageStart,a.lastPageEnd=a.currentPageEnd||o,a.currentPageUrl=e,a.currentPageId=t,a.currentPageStart=o,a.currentPageEnd=null,n.ps=a,(s=new y).pre_page_id=a.lastPageId,s.pre_page=a.lastPageUrl,s.pre_page_start=Object(i.h)(a.lastPageStart),s.pre_page_end=Object(i.h)(a.lastPageEnd),s.page_id=a.currentPageId,s.page=a.currentPageUrl,s.page_start=Object(i.h)(a.currentPageStart),P.getInstance()&&P.getInstance().sendEvent(s))}catch(t){r.a.error(t)}}},{key:"timeBegin",value:function(t){try{this.updateData.singleData.data.methods.hasOwnProperty(t)||(this.updateData.singleData.data.methods[t]=Object.assign({},E.b)),this.updateData.singleData.data.methods[t].begin=Object(i.u)()}catch(t){r.a.error(t)}}},{key:"timeEnd",value:function(t){try{this.updateData.singleData.data.methods.hasOwnProperty(t)||(this.updateData.singleData.data.methods[t]=Object.assign({},E.b)),this.updateData.singleData.data.methods[t].end=Object(i.u)()}catch(t){r.a.error(t)}}},{key:"domChange",value:function(){window.addEventListener("load",(function(){var t=document.getElementsByTagName("body")[0];new MutationObserver((function(t){var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return{s:e=function(){},n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;"childList"===i.type||"attributes"===i.type&&r.a.log("The ".concat(i.attributeName," attribute was modified."))}}catch(t){n.e(t)}finally{n.f()}})).observe(t,{attributes:!0,childList:!0,subtree:!0})}))}},{key:"getPageRecord",value:function(){try{var t=Object(d.a)(p.b.GET_CURRENT_PAGE_IDENTIFY);return this.pageRecords[t]=this.pageRecords[t]||{},this.pageRecords[t]}catch(t){r.a.error(t)}}},{key:"onAfterPageLoad",value:function(){this.timeEnd("onLoad")}},{key:"onBeforePageReady",value:function(){try{this.timeBegin("onReady");var t,e=this.getPageRecord();e.readyTime=Object(i.u)(),e.initTime&&(e.loadCost=e.readyTime-e.initTime,(t=new b).category="_WEB.PERF_PAGE_LOAD",t.state=Object(i.o)(),t.page=Object(i.n)(),t.tags.init_time="".concat(e.initTime),t.tags.ready_time="".concat(e.readyTime),t.values.load_cost=e.loadCost,this.deliver({type:p.a.PERF_PAGE_LOAD,event:t}))}catch(t){r.a.error(t)}}},{key:"onAfterPageReady",value:function(){this.timeEnd("onReady")}},{key:"onBeforePageShow",value:function(){this.timeBegin("onShow"),this.updateData.singleData.data.page=Object(d.a)(p.b.GET_CURRENT_PAGE_URL_WITH_PARAMS),this.updateData.isDataChanged=!0}},{key:"onAfterPageShow",value:function(){var t=Object(d.a)(p.b.GET_PAGE_ID);this.getPageRecord().showTime=Object(i.u)(),this.onPageControllerShowPage(t,Object(i.n)()),this.timeEnd("onShow")}},{key:"onBeforePageHide",value:function(){try{this.timeBegin("onHide"),this.uploadSingleData();var t=Object(i.o)();this.getPageRecord().hideTime=Object(i.u)(),this.onPageControllerHidePage(t)}catch(t){r.a.error(t)}}},{key:"onAfterPageHide",value:function(){this.timeEnd("onHide")}},{key:"onBeforePageUnload",value:function(){try{this.timeBegin("onUnload"),this.uploadSingleData()}catch(t){r.a.error(t)}}},{key:"onAfterPageUnload",value:function(){this.timeEnd("onUnload")}},{key:"onPageInit",value:function(){var t=Object(d.a)(p.b.GET_CURRENT_PAGE_IDENTIFY);this.pageRecords[t]={initTime:Object(i.u)()}}},{key:"onPageShow",value:function(){}},{key:"onPageReady",value:function(){this.onPageControllerShowPage(Object(i.o)(),Object(i.n)());var t,e=this.getPageRecord();Object.assign(this.updateData.singleData.data,{performance:window.performance}),e.readyTime=Object(i.u)(),e.initTime&&(e.loadCost=e.readyTime-e.initTime,(t=new b).category="_WEB.PERF_PAGE_LOAD",t.state=Object(d.a)(p.b.GET_PAGE_ID),t.page=Object(d.a)(p.b.GET_CURRENT_PAGE_URL),t.tags.init_time="".concat(e.initTime),t.tags.ready_time="".concat(e.readyTime),t.values.load_cost=e.loadCost,this.deliver({type:p.a.PERF_PAGE_LOAD,event:t})),this.uploadSingleData()}},{key:"onPageHide",value:function(){this.uploadSingleData()}},{key:"uploadSingleData",value:function(){var t=this;setTimeout((function(){P.getInstance()&&P.getInstance().uploadCountEvent(),t.uploadEvent(Object.assign({},{data:t.updateData.singleData.data},t.metaJson),t.qapmUrl),t.resetUpdateData()}),1e3)}}],[{key:"ps",get:function(){var t=g.a.readItem("pageTracker.ps");return(t=t&&JSON.parse(t))||{lastPageUrl:null,lastPageId:null,lastPageStart:null,lastPageEnd:null,currentPageUrl:p.c,currentPageId:p.c,currentPageStart:Object(i.u)(),currentPageEnd:null}},set:function(t){try{g.a.setItem("pageTracker.ps",JSON.stringify(t))}catch(t){r.a.error(t)}}}]),n}(e),j=(e=n(32),n.n(e)),D=(e=n(47),n.n(e)),L=(e=n(20),n.n(e)),N=n(15),U=n(13);e=function(t){a()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h()(t);return r=e?(n=h()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),u()(this,r)}}(n);function n(t,o){c()(this,n);var s=e.call(this,t);t={excludePatterns:[],isRequestStatusOk:n.defaultIsRequestStatusOk,isRequestLogicOk:n.defaultIsRequestLogicOk,isRequestCache:n.defaultIsRequestCache};return s.trackerOpt=Object(i.a)(t,o),r.a.info("RequestTracker",s.trackerOpt),s.requestThreshold=o.requestThreshold||N.a.data.request_threshold,s.updateData.singleData.data.request_threshold=s.requestThreshold,s.trackerOpt.excludePatterns.push(/entrance/),s.trackerOpt.excludePatterns.push(new RegExp("https://service-p88k3sw2-1253358381.gz.apigw.tencentcs.com/release/resource_flow/")),s.name=p.e.REQUEST_TRACKER,s.reqRecords={},s.isRequestStatusOk=s.trackerOpt.isRequestStatusOk||n.defaultIsRequestStatusOk,s.isRequestLogicOk=s.trackerOpt.isRequestLogicOk||n.defaultIsRequestLogicOk,s.isRequestCache=s.trackerOpt.isRequestCache||n.defaultIsRequestCache,s.temporaryStorageRequestList=s.temporaryStorageRequestList.bind(w()(s)),s.onRequestBegin=s.onRequestBegin.bind(w()(s)),s.onRequestComplete=s.onRequestComplete.bind(w()(s)),s}return l()(n,[{key:"onCountEvent",value:function(t,e){var n=Object(d.a)(p.b.GET_PAGE_ID),r=JSON.parse(g.a.readItem(t)||"{}"),i=r[n],o=new b,s=e.endTime-e.startTime;i?((o=i).value+=1,o.values.cost_total+=s,o.values.cost_max=o.values.cost_max>s?o.values.cost_max:s):(o.category=t,o.state=Object(d.a)(p.b.GET_PAGE_ID),o.value=1,o.values.cost_total=s,o.values.cost_max=s),o.values.cost_avg=parseInt(o.values.cost_total/o.value),r[n]=o,P.getInstance()&&(P.getInstance()[t]=e)}},{key:"isExcludeUrl",value:function(t){return this.trackerOpt.excludePatterns.some((function(e){return e.test(t)}))}},{key:"onRequestBegin",value:function(t,e,n){this.isExcludeUrl(n)||(this.reqRecords[t]={startTime:Object(i.u)(),url:n,page:Object(d.a)(p.b.GET_CURRENT_PAGE_URL)})}},{key:"onRequestComplete",value:function(t,e,n,o,s,a){try{if(this.isExcludeUrl(n))return;"object"!==L()(a)||a.profile||(a.profile={});var u=this.reqRecords[t];if(!u)return;u.endTime=Object(i.u)(),/\.(jpe?g|png|gif|webp|jsx?|coffee|ts|s?css|less|sass|svg|ttf|eot|woff2?|ejs|jade|vue|html?)(\?.*)?$/.test(n)?this.onCountEvent("_APM.PAGE_RESOURCE_STAT",u):this.onCountEvent("_APM.PAGE_REQUEST_STAT",u),u.startTime&&(u.cost=u.endTime-u.startTime);var h,c,l="",f={state:Object(d.a)(p.b.GET_PAGE_ID),page:u.page||p.f.UNKNOW,label:n,values:{url:n,cost:u.cost||0,duration:u.cost||0,http_status:o||-1,status_code:o||-1,bytes_received:Object(i.w)(a),is_http_error:0,is_request_cache:this.isRequestCache(n,a)?1:0,is_https_used:n.startsWith("https")?1:0,http_info:{request:{},response:{profile:a.profile||{}}}},tags:{start_time:u.startTime.toString(),end_time:u.endTime.toString(),http_method:e,bread_crumb_id:""}},g=this.isRequestStatusOk(e,n,o),m=this.isRequestLogicOk(e,n,o,a);g&&m.ok||(f.values.is_http_error=1,f.values.http_info={request:s||{},response:a||{}},a&&a.cookies&&a.header&&(delete f.values.http_info.response.cookies,delete f.values.http_info.response.header["Set-Cookie"])),u.cost>=this.requestThreshold&&(_.a.getInstance().upload({resource:"plugin.248",stage:"web.network.slow",state:"ok",eventId:"",annotate:""}),f.values.http_info={request:JSON.parse(JSON.stringify(s))||{},response:JSON.parse(JSON.stringify(a))||{}},a&&a.cookies&&a.header&&(delete f.values.http_info.response.cookies,delete f.values.http_info.response.header["Set-Cookie"]),P.getInstance()&&P.getInstance().customTrack("PERF_NET_SLOW","","","",{d1:(Object(i.s)()?Object(U.a):Object(i.o))(),d2:n,d3:o,d4:JSON.stringify(f.values).substring(0,64),info1:""},{v1:u.cost})),g||(_.a.getInstance().upload({resource:"plugin.248",stage:"web.network.error",state:"ok",eventId:"",annotate:""}),l=(h=new b).id,h.category="_WEB.REQUEST_NETWORK_ERROR",this.requestNetworkError(h),P.getInstance()&&P.getInstance().customTrack("PERF_NET_ERROR","","","",{d1:(Object(i.s)()?Object(U.a):Object(i.o))(),d2:n,d3:o,d4:JSON.stringify(f.values).substring(0,64),info1:""},{v1:u.cost})),f.values.http_info.response.header&&-1===f.values.http_info.response.header["Content-Type"].indexOf("json")&&(f.values.http_info.response.data=""),m.ok||(l=(c=new b).id,c.category="_WEB.REQUEST_LOGIC_ERROR",c.tags.logic_code=(m.code||0).toString(),c.tags.logic_msg=m.msg,this.requestLogicError(c)),f.tags.bread_crumb_id=l;var y=new b;y.category="_WEB.PERF_REQUEST",this.temporaryStorageRequestList(Object(i.a)(y,f))}catch(t){r.a.error(t)}}},{key:"requestLogicError",value:function(t){r.a.info(t)}},{key:"requestNetworkError",value:function(t){r.a.info(t)}},{key:"temporaryStorageRequestList",value:function(t){var e=Object.assign({},this.updateData.requestItem,t.values);void 0!==(e=Object.assign({},e,t.tags)).start_time&&(e.start_time=parseInt(e.start_time)),void 0!==e.end_time&&(e.end_time=parseInt(e.end_time)),this.updateData.singleData.data.request_list.push(e),t.label}}],[{key:"defaultIsRequestStatusOk",value:function(t,e,n){return 200<=n&&n<400}},{key:"defaultIsRequestLogicOk",value:function(t,e,n,r){return{ok:!0,code:"0",msg:"ok"}}},{key:"defaultIsRequestCache",value:function(t,e){try{var n=N.b.getInstance();if(e&&e.data&&128<Object.keys(e.data).length/1024)if(n.urlCache.hasOwnProperty(t)){var o=n.urlCache[t],s=Object(i.u)();if(s-o.time<18e4&&o.data===JSON.stringify(e.data))return!0;o.time=s}else n.urlCache[t]={data:JSON.stringify(e.data),time:Object(i.u)()};return!1}catch(t){return r.a.error("defaultIsRequestCache",t),!1}}}]),n}(o.a);var q=window.fetch,F=function(t){a()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h()(t);return r=e?(n=h()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),u()(this,r)}}(n);function n(t,i){return c()(this,n),r.a.info("WebRequestTracker",i),(i=e.call(this,t,i)).hookXHR=i.hookXHR.bind(w()(i)),i.hookFetch=i.hookFetch.bind(w()(i)),i.hookFetch(),i.hookXHR(),_.a.getInstance().upload({resource:"plugin.248",stage:"web.network.init",state:"ok",eventId:"",annotate:""}),i}return l()(n,[{key:"hookXHR",value:function(){try{_.a.getInstance().upload({resource:"plugin.248",stage:"web.network.hook.xhr",state:"ok",eventId:"",annotate:""});var t=this;t.refs.xhrOpen||(t.refs.xhrOpen=XMLHttpRequest.prototype.open,t.refs.xhrSend=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.send=function(){t.refs.sendArguments=arguments[0],t.refs.xhrSend.apply(this,arguments)},XMLHttpRequest.prototype.open=function(e,n){var r=Object(i.v)();t.onRequestBegin(r,e||"GET",n),this.addEventListener("loadend",(function(){t.onRequestComplete(r,e||"GET",n,this.status,t.refs.sendArguments,this.responseText)})),t.refs.xhrOpen.apply(this,arguments)})}catch(t){r.a.info(t),_.a.getInstance().upload({resource:"plugin.248",stage:"web.network.hook.xhr",state:"fail",eventId:"",annotate:JSON.stringify(t)})}}},{key:"hookFetch",value:function(){try{_.a.getInstance().upload({resource:"plugin.248",stage:"web.network.hook.fetch",state:"fail",eventId:"",annotate:""});var t=this;Object.defineProperty(window,"fetch",{configurable:!0,enumerable:!0,get:function(){return function(e,n){var r=Object(i.v)();return t.onRequestBegin(r,n&&n.method||"GET",e),t.refs.sendArguments=n,q(e,n).then(function(){var i=D()(j.a.mark((function i(o){var s;return j.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,o.clone().text();case 2:return s=i.sent,t.onRequestComplete(r,n&&n.method||"GET",e,o.status,t.refs.sendArguments,s),i.abrupt("return",o);case 5:case"end":return i.stop()}}),i)})));return function(t){return i.apply(this,arguments)}}())}},set:function(t){q=t}})}catch(t){r.a.info(t),_.a.getInstance().upload({resource:"plugin.248",stage:"web.network.hook.fetch",state:"fail",eventId:"",annotate:JSON.stringify(t)})}}}]),n}(e);var G=function(t){a()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h()(t);return r=e?(n=h()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),u()(this,r)}}(n);function n(t){return c()(this,n),t.plugin=Object(i.t)()?43:Object(i.p)()?143:243,(t=e.call(this,t)).hookError=t.hookError.bind(w()(t)),t.hookError(),t}return l()(n,[{key:"hookError",value:function(){var t,e,n,o=this;t="onerror",e=window,n={onerror:function(t,e,n,r,i){o.onAppScriptError(t,e,n,r,i?i.stack:"")}},e&&Object.keys(n).forEach((function(o){var s,a=e[o];Object(i.r)(a),s=null,e[o]=function(){if(Object(i.r)(n[o])){try{n[o].apply(this,arguments)}catch(e){r.a.error("hookMethods, exec hook method ".concat(o," of obj ").concat(t," raise exception"),e)}if(Object(i.r)(a))return a.apply(this,arguments)}else if(Object(i.r)(n[o].before)&&Object(i.r)(n[o].after)){try{n[o].before.apply(this,arguments)}catch(e){r.a.error("hookMethods, exec hook before method ".concat(o," of obj ").concat(t," raise exception"),e)}Object(i.r)(a)&&(s=a.apply(this,arguments));try{n[o].after.apply(this,arguments)}catch(e){r.a.error("hookMethods, exec hook after method ".concat(o," of obj ").concat(t," raise exception"),e)}return s}}}))}},{key:"hookOnUnhandleRejection",value:function(){}}]),n}(function(t){a()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h()(t);return r=e?(n=h()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),u()(this,r)}}(n);function n(t){return c()(this,n),(t=e.call(this,t)).name=p.e.JS_ERROR_TRACKER,t}return l()(n,[{key:"getJSError",value:function(t){var e=t.id;(t="string"==typeof(t=t.tags.message)?t:(t.reason||t).stack)&&0!==t.length&&(r.a.log("getError-event:",t={bread_crumb_id:e,stacktrace:t}),this.uploadEvent({exception:t,plugin:this.plugin,level:"error",page:(Object(i.s)()?Object(U.a):Object(i.o))()}))}},{key:"onAppScriptError",value:function(t,e,n,o,s){try{var a=new b;a.category="_WEB.APP_SCRIPT_ERROR",s=s||"null",this.isWx?(a.state=Object(U.b)(),a.page=Object(U.a)()):(a.state=Object(i.o)(),a.page=Object(i.n)()),a.label=t,a.tags.message=t,a.tags.source=e,a.tags.line="".concat(n),a.tags.col="".concat(o),a.tags.stack=s,P.getInstance()&&P.getInstance().sendEvent(a,{immediately:!0});var u={bread_crumb_id:a.id,stacktrace:s};P.getInstance()&&P.getInstance().customTrack("PERF_JS_ERROR","","","",{d1:(Object(i.s)()?Object(U.a):Object(i.o))(),d2:"",d3:"",d4:s&&s.substring(0,64),info1:s},{}),r.a.log("getError-event:",u),this.uploadEvent(Object.assign({},{exception:u,plugin:this.plugin,level:"error",page:(this.isWx?Object(U.a):Object(i.n))()},this.metaJson),this.qapmUrl)}catch(t){r.a.error(t)}}}]),n}(o.a));function J(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return W(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return{s:e=function(){},n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n(70);var Y=function(t){a()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h()(t);return r=e?(n=h()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),u()(this,r)}}(n);function n(t,r){return c()(this,n),(t=e.call(this,t)).instance=null,t.obseverElements={},t.tmpExposeEvents={},t.exposeTrackerOption=r,E.a.expose_threshold=r.exposeThreshold||E.a.expose_threshold,E.a.expose_area_threshold=r.exposeAreaThreshold||E.a.expose_area_threshold,t.resetObserve=t.resetObserve.bind(w()(t)),t.resetObserve(E.a.expose_area_threshold),t.autoListener(),n.getInstance(),t}return l()(n,[{key:"sendExposeEvent",value:function(t,e){var n,o,s=null;try{s=JSON.parse(e.target.getAttribute&&e.target.getAttribute("expose-data"))}catch(t){return void r.a.info("sendExposeEvent error",t)}r.a.info("sendExposeEvent",t,e.target,s,e),s&&"isShow"===t?this.tmpExposeEvents[s.id]=e:s&&this.tmpExposeEvents[s.id]&&"isHide"===t&&(o=this.tmpExposeEvents[s.id].time,(n=e.time-o)<E.a.expose_threshold||((t=new v).op=p.h.EXPOSE,t.tags=s.customTags||{},t.data={duration:n},o=e.target.hasOwnProperty("getAttribute")&&e.target.getAttribute("type"),t.view_type=e.target.tagName+(o?" ".concat(o):""),t.view_tag=(O(e.target)||"").slice(0,31),t.view_text=(A(e.target)||"").slice(0,31),t.view_desc="",n=(s=e.boundingClientRect).left,o=s.top,e=s.right,s=s.bottom,t.view_pos="".concat(parseInt(n),",").concat(parseInt(o),",").concat(parseInt(e),",").concat(parseInt(s)),t.view_super="",t.page=Object(i.n)(),t.page_id=Object(i.o)(),r.a.info("sendExposeEvent send",t),P.getInstance()&&P.getInstance().sendEvent(t)))}},{key:"observe",value:function(t){var e=Object(i.v)();t.setAttribute("qapm_expose_id",e),this.obseverElements[e]=t,this.intersectionObserver&&this.intersectionObserver.observe(t)}},{key:"unObserve",value:function(t){var e=t.getAttribute("qapm_expose_id");delete this.obseverElements[e],this.intersectionObserver.unobserve(t)}},{key:"resetObserve",value:function(t){var e,n,i=this;for(e in this.obseverElements){var o=this.obseverElements[e];this.intersectionObserver&&this.intersectionObserver.unobserve(o)}for(n in this.intersectionObserver&&this.intersectionObserver.disconnect(),this.intersectionObserver=new IntersectionObserver((function(t,e){t.forEach((function(t){var e,n,o,s;t.isIntersecting?(e={id:t.target.getAttribute("qapm_expose_id")},o={},(n=t.target.getAttribute("custom_id"))&&(o.custom_id=n),window.QAPM&&window.QAPM.onExposure?(s=window.QAPM.onExposure(t.target),o=Object.assign({},s,o)):i.exposeTrackerOption.onExposure&&(s=i.exposeTrackerOption.onExposure(t.target),o=Object.assign({},s,o)),e.customTags=o,t.target.setAttribute("expose-data",JSON.stringify(e)),i.sendExposeEvent("isShow",t)):(r.a.info("isHide",E.a.expose_area_threshold,t,t.time),i.sendExposeEvent("isHide",t))}))}),{root:null,rootMargin:"0px",threshold:t}),this.obseverElements){var s=this.obseverElements[n];this.intersectionObserver.observe(s)}}},{key:"addExposeListener",value:function(t){this.observe(t)}},{key:"removeExposeListener",value:function(t){this.unobserve(t)}},{key:"autoListener",value:function(){var t=this,e=document.querySelectorAll("[expose]");r.a.info("autoListener",e);var n,i=J(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;this.intersectionObserver.observe(o)}}catch(e){i.e(e)}finally{i.f()}e=new MutationObserver((function(e,n){var r,i=J(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;if("childList"===o.type){var s,a=J(o.addedNodes);try{for(a.s();!(s=a.n()).done;){var u=s.value;u.getAttribute&&u.getAttribute("expose")&&t.observe(u)}}catch(e){a.e(e)}finally{a.f()}}}}catch(e){i.e(e)}finally{i.f()}})),document.body&&e.observe(document.body,{attributes:!1,childList:!0,subtree:!0})}}],[{key:"setInstance",value:function(t){this.instance=t}},{key:"getInstance",value:function(){return this.instance}}]),n}(o.a),H=(e=n(48),n.n(e)),K=n(16);function V(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach((function(e){H()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var X=function(t){a()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h()(t);return r=e?(n=h()(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),u()(this,r)}}(n);function n(t,r){var o;return c()(this,n),t.plugin=Object(i.p)()?141:41,(o=e.call(this,t)).xrayThreshold=r.pageThreshold||p.d.data.page_threshold,o.breadCrumbEnable=!0,o.whiteUrlList=["sngapm.qq.com","ten.sngapm.qq.com","qapm.qq.com",t.qapm_base_url],_.a.getInstance().upload({resource:"plugin.41",stage:"xray.init",state:"ok",eventId:"",annotate:""}),setTimeout((function(){o.sendXrayEvent()}),2e4),o}return l()(n,[{key:"getXrayMeta",value:function(){return this.xrayMeta=JSON.parse(JSON.stringify(this._metaJson)),delete this.xrayMeta.extra_data,delete this.xrayMeta.zone,delete this.xrayMeta.category,this.xrayMeta.os=Object(i.x)(),this.xrayMeta.arch="web",this.xrayMeta.device=Object(i.x)(),this.xrayMeta}},{key:"getPfTiming",value:function(){try{var t=window.performance||window.webkitPerformance||window.msPerformance||window.mozPerformance;if(void 0===t)return!1;var e=t.timing,n={};return n.first_word=e.responseStart-e.fetchStart,n.first_screen=e.responseEnd-e.fetchStart,n.page_finish=e.loadEventEnd-e.fetchStart,n.dom_loading=e.domLoading-e.fetchStart,n.dom_interactive=e.domInteractive-e.fetchStart,n.dom_content_loaded_event=e.domContentLoadedEventEnd-e.fetchStart,n.dom_complete=(window.QAPM&&window.QAPM.fmpEndTime||e.domComplete)-e.fetchStart,n}catch(t){return{}}}},{key:"getWebviewX5Metrics",value:function(){var t={category:"webview_x5_metrics",is_slow:0,url:"",apn_type:Object(i.i)(),first_word:0,first_screen:0,page_finish:0,dom_loading:0,dom_interactive:0,dom_content_loaded_event:0,dom_complete:0};if(Object.assign(t,this.getPfTiming(),this.getNetWork()),!(t.page_finish<0||2147483647<t.page_finish))return t.page_finish>this.xrayThreshold&&(r.a.info("XrayTracker is slow "),t.is_slow=1,P.getInstance&&P.getInstance().customTrack("PERF_PAGE_SLOW","","","",{d1:Object(i.o)(),d2:document.referrer},{v1:t.page_finish,v2:t.dom_complete})),t}},{key:"getRecData",value:function(t){function e(t,e){return t+e<=0?0:Math.round(t+e)}var n={default:-1,mianframe:0,subframe:1,css:2,script:3,img:4,FONT_RESOURCE:5,SUB_RESOURCE:6,OBJECT:7,audio:8,video:8,media:8,WORKER:9,SHARED_WORKER:10,fetch:11,FAVICON:12,xmlhttprequest:13,RESOURCE_TYPE_PING:14,RESOURCE_TYPE_SERVICE_WORKER:15,RESOURCE_TYPE_CSP_REPORT:16,RESOURCE_TYPE_PLUGIN_RESOURCE:17,RESOURCE_TYPE_LAST_TYPE:18,LAST_TYPE:19,navigation:0};try{if(!window.performance||!window.performance.getEntries)return[];var r=window.performance,o=r.getEntries();if(!o&&!o.length)return[];var s,a={},u=[];try{o.forEach((function(i){var o,s=!1;t.forEach((function(t){-1!==i.name.indexOf(t)&&(s=!0)})),s||(o=r.timing.navigationStart,void 0!==(o={shortUrl:i.name,resource_type:n[i.initiatorType],proxy_type:i.nextHopProtocol,qProxyStrategy:0,website_address:":0",dns_end:e(i.domainLookupEnd,o),dns_start:e(i.domainLookupStart,o),connect_end:e(i.connectEnd,o),connect_start:e(i.connectStart,o),ssl_handshake_end:0===i.secureConnectionStart?0:e(i.connectEnd,o),ssl_handshake_start:0===i.secureConnectionStart?0:e(i.secureConnectionStart,o),send_end:e(i.responseStart,o),send_start:e(i.requestStart,o),recv_end:e(i.responseEnd,o),recv_start:e(i.responseStart,o),zero:0,recv_bytes:void 0!==i.encodedBodySize?i.encodedBodySize:0,session_resumption:0,cipher_suit:0,proxy_data:0,socket_reused:0,was_cached:0,expired_time:864e5,error_id:0,resourceRequestTriggerTime:e(i.requestStart,o),resourceRequestHandleTime:e(i.domainLookupEnd,o),status_code:200,connectInfo:0,redirect_end_time:0===i.redirectEnd?0:e(i.redirectEnd,o),redirect_start_time:0===i.redirectStart?0:e(i.redirectEnd,o),redirect_times:0!==i.redirectStart?2:1,is_first_screen_resource:0,sent_bytes:0,http_method:"GET",content_encoding:""}).resource_type&&(i instanceof PerformanceResourceTiming?u:a).push(o))}))}catch(o){}return"{}"===JSON.stringify(a)&&(s=r.timing,a={shortUrl:window.location.href,resource_type:0,proxy_type:0,qProxyStrategy:0,website:":0",dns_end:s.domainLookupEnd,dns_start:s.domainLookupStart,connect_end:s.connectEnd,connect_start:s.connectStart,ssl_handshake_end:0===s.secureConnectionStart?0:s.connectEnd,ssl_handshake_start:s.secureConnectionStart,send_end:s.responseStart,send_start:s.requestStart,recv_end:s.responseEnd,recv_start:s.responseStart,zero:0,recv_bytes:0,session_resumption:0,cipher_suit:0,proxy_data:0,socket_reused:0,was_cached:0,expired_time:864e5,error_id:0,resourceRequestTriggerTime:s.requestStart,resourceRequestHandleTime:s.domainLookupEnd,status_code:200,connectInfo:0,redirect_end_time:s.redirectEnd,redirect_start_time:s.redirectStart,redirect_times:r.navigation.redirectCount+1,is_first_screen_resource:0,sent_bytes:0,http_method:"GET",content_encoding:""}),{main_resource:Object(i.b)(a),sub_resource_json_arr:Object(i.c)(u)}}catch(o){return[]}}},{key:"getSingletonTiming",value:function(){try{var t=window.performance||window.webkitPerformance||window.msPerformance||window.mozPerformance;if(void 0===t)return!1;var e=t.timing,n={};return n.first_screen=e.loadEventStart,n.dom_loading=e.domLoading,n.page_finish=e.loadEventEnd,n.dom_interactive=e.domInteractive,n.dom_complete=e.domComplete,n.first_word=e.responseStart,n.dom_content_loaded_event_start=e.domContentLoadedEventStart,n.dom_content_loaded_event_end=e.domContentLoadedEventEnd,n.first_word_stamp=e.domLoading,n.first_screen_stamp=e.loadEventEnd,n.first_byte_stamp=e.responseStart,n.frame_start_time=0,n.frame_end_time=0,n.parser_elapsed=e.domInteractive,n.render_elapsed=e.domContentLoadedEventEnd,n.layout_elapsed=e.loadEventEnd,n.page_start=e.fetchStart,n.is_system_kernel="Mac68K"===navigator.platform||"MacPPC"===navigator.platform||"Macintosh"===navigator.platform||"MacIntel"===navigator.platform?1:0,n.start_monitor_time=e.navigationStart,n.stop_monitor_time=e.loadEventEnd,n}catch(t){return{}}}},{key:"getNetWork",value:function(){return document?{url:document.URL||"",referer:document.referrer,qproxy_strategy:0}:{}}},{key:"getOtherData",value:function(){return{fps_json_arr:[],cup_info_json_arr:[],memory_info_json_arr:[],network_info_json_arr:[],gpu_info_json_arr:[],proxy_type:0,socket_reuse_pro:0,qproxy_strategy:0,hostcount:0,apn_type:Object(i.i)(),version:"V1",quic_pro:0,frame_start_time:0,frame_end_time:0,layer_num:0,total_layer_mem:0,min_layer_size:0,max_layer_size:0,base_time:0}}},{key:"getBreadcrumbId",value:function(t){var e=new b;return e.category=t,P.getInstance()&&P.getInstance().sendEvent(e)}},{key:"getWebviewX5Singleton",value:function(){var t={category:"webview_x5_singleton"};if(Object.assign(t,this.getSingletonTiming(),this.getRecData(this.whiteUrlList),this.getNetWork(),this.getOtherData()),t.main_resource){var e={bread_crumb_id:""};return this.breadCrumbEnable?e.bread_crumb_id=this.getBreadcrumbId("_APM.LAG"):e.bread_crumb_id="",Object.assign(t,e),t}}},{key:"getXrayUplaodUrl",value:function(){var t=this.qapmBaseUrl;t.endsWith("/")||(t+="/");var e=this._metaJson.p_id,n=this._metaJson.version,r=this._metaJson.uin,i=this._metaJson.plugin;return Object(K.a)()?"".concat(t,"entrance/").concat(e,"/uploadEncryptedJson/?p_id=").concat(e,"&plugin=").concat(i,"&version=").concat(n,"&uin=").concat(r,"&arch=web&device=web&q=0&format=2"):"".concat(t,"entrance/").concat(e,"/uploadJson/?p_id=").concat(e,"&plugin=").concat(i,"&version=").concat(n,"&uin=").concat(r,"&arch=web&device=web&q=0")}},{key:"sendXrayEvent",value:function(){try{_.a.getInstance().upload({resource:"plugin.41",stage:"xray.upload",state:"ok",eventId:"",annotate:""}),this.getXrayMeta();var t=z(z({},this.xrayMeta),{},{parts:[]}),e=this.getWebviewX5Metrics(),n=this.getWebviewX5Singleton();e&&t.parts.push(e),n&&t.parts.push(n);var r=this.getXrayUplaodUrl();this.uploadEvent(t,r,!0)}catch(t){_.a.getInstance().upload({resource:"plugin.41",stage:"xray.upload",state:"fail",eventId:"",annotate:JSON.stringify(t)})}}}]),n}(o.a),Q={},Z=function(){if(Object(i.t)())try{Q.user_id=window.qapmBaseInfo.userId,Q.device_id=window.qapmBaseInfo.deviceId,Q.app_key=window.qapmBaseInfo.appKey,Q.version=window.qapmBaseInfo.version,Q.jsrror_enable=window.qapmBaseInfo.jsErrorEnable,Q.web_monitor_enable=window.qapmBaseInfo.webMonitorEnable,Q.bread_crumb_enable=window.qapmBaseInfo.breadCrumbEnable,Q.qapm_base_url=window.qapmBaseInfo.qapmUrl,Q.bread_crumb_upload_interval=window.qapmBaseInfo.breadCrumbUploadInterval,Q.bread_crumb_buckets=window.qapmBaseInfo.breadCrumbBuckets,Q.encrypt=window.qapmBaseInfo.encrypt||!1,Q.net_op=window.qapmBaseInfo.net_op||"",Q.net_type=window.qapmBaseInfo.net_type||"",Q.brand=window.qapmBaseInfo.brand||"",Q.channel_install=window.qapmBaseInfo.channel_install||"",Q.channel_open=window.qapmBaseInfo.channel_open||""}catch(t){r.a.info(t.toString())}if(Object(i.p)())try{Q.user_id=window.QAPMAndroidJsBridge.getUin(),Q.device_id=window.QAPMAndroidJsBridge.getDeviceId(),Q.app_key=window.QAPMAndroidJsBridge.getAppkey(),Q.version=window.QAPMAndroidJsBridge.getVersion(),Q.jsrror_enable=window.QAPMAndroidJsBridge.getJsErrorEnable(),Q.web_monitor_enable=window.QAPMAndroidJsBridge.getWebMonitorEnable(),Q.bread_crumb_enable=window.QAPMAndroidJsBridge.getBreadCrumbEnable(),Q.qapm_base_url=window.QAPMAndroidJsBridge.getQAPMUrl(),Q.bread_crumb_upload_interval=window.QAPMAndroidJsBridge.getBreadCrumbUploadInterval(),Q.bread_crumb_buckets=window.QAPMAndroidJsBridge.getBreadCrumbBuckets(),Q.encrypt=window.QAPMAndroidJsBridge.encrypt()||!1,Q.net_op=window.QAPMAndroidJsBridge.getNetOp()||"",Q.brand=window.QAPMAndroidJsBridge.getBrand()||"",Q.channel_open=window.QAPMAndroidJsBridge.getOpenChannel()||"",Q.channel_install=window.QAPMAndroidJsBridge.getInstallChannel()||"",Q.net_type=window.QAPMAndroidJsBridge.getNetType()||""}catch(t){r.a.info(t.toString())}};function $(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Q,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{pageTracker:{},requestTracker:{},uiActionTracker:{},exposeTracker:{},xrayTracker:{}};Z(),r.a.info(t,e),it("debug",t.debug),it("encrypt",t.encrypt),it("netOp",t.net_op),it("brand",t.brand),it("channelOpen",t.channel_open),it("channelInstall",t.channel_install),it("netType",t.net_type);var n=new _.a(t.app_key);r.a.info("dataAlignInstance",n),_.a.setInstance(n),e.uiActionTracker.channelOpen&&it("channelOpen",e.uiActionTracker.channelOpen),e.uiActionTracker.channelInstall&&it("channelInstall",e.uiActionTracker.channelInstall);try{Object(K.c)(t.qapm_base_url,t.app_key.split("-")[1]),t.qapm_base_url=t.qapm_base_url||"https://ten.sngapm.qq.com",t.appconfig_base_url=t.appconfig_base_url||t.qapm_base_url,void 0===t.jsrror_enable||!0===t.jsrror_enable?(new G(t),_.a.getInstance().upload({resource:"plugin.43/143/243",stage:"jserror.enable",state:"ok",eventId:"",annotate:""})):_.a.getInstance().upload({resource:"plugin.43/143/243",stage:"jserror.enable",state:"fail",eventId:"",annotate:""}),void 0===t.web_monitor_enable||!0===t.web_monitor_enable?(new F(t,e.requestTracker||{}),new C(t,e.pageTracker||{}),P.setInstance(new P(t,e.uiActionTracker||{})),new X(t,e.xrayTracker||{}),Y.setInstance(new Y(t,e.exposeTracker||{})),_.a.getInstance().upload({resource:"plugin.41",stage:"xray.enable",state:"ok",eventId:"",annotate:""}),_.a.getInstance().upload({resource:"plugin.247",stage:"page.enable",state:"ok",eventId:"",annotate:""}),_.a.getInstance().upload({resource:"plugin.248",stage:"network.enable",state:"ok",eventId:"",annotate:"虚拟plugin，管的是QAPM的网络功能"})):(_.a.getInstance().upload({resource:"plugin.41",stage:"xray.enable",state:"fail",eventId:"",annotate:""}),_.a.getInstance().upload({resource:"plugin.247",stage:"page.enable",state:"fail",eventId:"",annotate:""}),_.a.getInstance().upload({resource:"plugin.248",stage:"network.enable",state:"fail",eventId:"",annotate:"虚拟plugin，管的是QAPM的网络功能"})),void 0!==t.bread_crumb_enable&&!0!==t.bread_crumb_enable||P.setInstance(new P(t,e.uiActionTracker||{})),_.a.getInstance().upload({resource:"athena",stage:"athena.enable",state:"ok",eventId:"",annotate:""}),_.a.getInstance().upload({resource:"ALL",stage:"web.sdk.launch",state:"ok",eventId:""}),r.a.info("web sdk start success，v".concat("1.3.0",", app_key is ").concat(t.app_key))}catch(e){r.a.info("web sdk cannot start, v".concat("1.3.0"," ,app_key is ").concat(t.app_key),e),_.a.getInstance().upload({resource:"ALL",stage:"web.sdk.launch",state:"fail",eventId:"",annotate:JSON.stringify(e)}),_.a.getInstance().upload({resource:"plugin.41",stage:"xray.enable",state:"fail",eventId:"",annotate:""}),_.a.getInstance().upload({resource:"plugin.43/143/243",stage:"jserror.enable",state:"fail",eventId:"",annotate:""}),_.a.getInstance().upload({resource:"plugin.247",stage:"page.enable",state:"fail",eventId:"",annotate:""}),_.a.getInstance().upload({resource:"plugin.248",stage:"network.enable",state:"fail",eventId:"",annotate:"虚拟plugin，管的是QAPM的网络功能"}),_.a.getInstance().upload({resource:"athena",stage:"athena.enable",state:"fail",eventId:"",annotate:""})}}function tt(){var t=(new Date).getTime();window.QAPM&&(window.QAPM.fmpEndTime=t)}function et(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:{};return P.getInstance()&&P.getInstance().customTrack(t,e,n,r,i,o)}function nt(t){return Y.getInstance().addExposeListener(t)}function rt(t){return Y.getInstance().removeExposeListener(t)}function it(t,e){var n;r.a.info("qapmSetField",t,e),"exposeThreshold"!==t?"exposeAreaThreshold"!==t?"debug"!==t?"userId"!==t?("netOp"===t&&(E.d.getInstance().app.net_op=e),"brand"===t&&(E.d.getInstance().app.brand=e),"channelInstall"===t&&(E.d.getInstance().app.channel_install=e),"channelOpen"===t&&(E.d.getInstance().app.channel_open=e),"netType"===t&&(E.d.getInstance().app.net_type=e),"encrypt"===t&&(!0!==e&&(e=!1),E.d.getInstance().encrypt=e)):E.d.getInstance().userId=e:E.d.getInstance().debug=e:(n=parseFloat(e))&&0<=n&&n<=1&&(E.a.expose_area_threshold=n,Y.getInstance().resetObserve(n)):(n=parseFloat(e))&&0<=n&&(E.a.expose_threshold=e)}window.QAPM={},window.QAPM.qapmWebSdkStart=$,window.QAPMAndroidBreadCrumb=function(){var t;return!0===(window.QAPMAndroidJsBridge&&window.QAPMAndroidJsBridge.getBreadCrumbEnable()||window.qapmBaseInfo&&window.qapmBaseInfo.breadCrumbEnable)?("_APM.LAG",(t=new b).category="_APM.LAG",et(t)):""},window.QAPM.resetConfig=Z,window.QAPM.setFMPEnd=tt,window.QAPM.qapmCustomTrack=et,window.QAPM.qapmSetField=it,window.QAPM.qapmAddExposeListener=nt,window.QAPM.qapmRemoveExposeListener=rt}],n={},t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(t){return e[t]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t.p="",t(t.s=71);function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var e,n}));
//# sourceMappingURL=web.qapm.js.map